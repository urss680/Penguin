data:tel;base64,PCFET0NUWVBFIGh0bWw+DQo8aHRtbD4NCg0KPGhlYWQ+DQogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPg0KICAgIDx0aXRsZT5MaWJyaWxsYWlBPC90aXRsZT4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly91bnBrZy5jb20vanN6aXBAMy4xMC4xL2Rpc3QvanN6aXAubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c3R5bGU+DQogICAgICAgIGJvZHkgew0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdTZWdvZSBVSScsIFRhaG9tYSwgR2VuZXZhLCBWZXJkYW5hLCBzYW5zLXNlcmlmOw0KICAgICAgICAgICAgbWFyZ2luOiAwOw0KICAgICAgICAgICAgcGFkZGluZzogMDsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNGY0ZjQ7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBtaW4taGVpZ2h0OiAxMDB2aDsNCiAgICAgICAgfQ0KDQogICAgICAgICNjaGF0LWNvbnRhaW5lciB7DQogICAgICAgICAgICB3aWR0aDogOTAlOw0KICAgICAgICAgICAgbWF4LXdpZHRoOiA4MDBweDsNCiAgICAgICAgICAgIG1hcmdpbjogMjBweCBhdXRvIDEwcHggYXV0bzsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsIDAsIDAsIDAuMSk7DQogICAgICAgICAgICBoZWlnaHQ6IDUwMHB4Ow0KICAgICAgICAgICAgb3ZlcmZsb3cteTogYXV0bzsNCiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7DQogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgIH0NCg0KICAgICAgICAudXNlci1tZXNzYWdlLA0KICAgICAgICAuZ2VtaW5pLW1lc3NhZ2Ugew0KICAgICAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7DQogICAgICAgICAgICBtYXgtd2lkdGg6IDgwJTsNCiAgICAgICAgfQ0KDQogICAgICAgIC51c2VyLW1lc3NhZ2Ugew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2UzZjJmZDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICAgICAgICAgICAgYWxpZ24tc2VsZjogZmxleC1lbmQ7DQogICAgICAgICAgICBjb2xvcjogIzFhNzNlODsNCiAgICAgICAgICAgIC8qIEEgc2hhZGUgb2YgYmx1ZSAqLw0KICAgICAgICB9DQoNCiAgICAgICAgLmdlbWluaS1tZXNzYWdlIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMGYwZjA7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0Ow0KICAgICAgICAgICAgY29sb3I6ICMzMzM7DQogICAgICAgICAgICBhbGlnbi1zZWxmOiBmbGV4LXN0YXJ0Ow0KICAgICAgICB9DQoNCiAgICAgICAgI2lucHV0LWNvbnRhaW5lciB7DQogICAgICAgICAgICB3aWR0aDogOTAlOw0KICAgICAgICAgICAgbWF4LXdpZHRoOiA4MDBweDsNCiAgICAgICAgICAgIG1hcmdpbjogMTBweCBhdXRvOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMTBweDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAgICAgICAgICAvKiBBbGxvdyBpdGVtcyB0byB3cmFwICovDQogICAgICAgIH0NCg0KICAgICAgICAjbWVzc2FnZS1pbnB1dCB7DQogICAgICAgICAgICBmbGV4LWdyb3c6IDE7DQogICAgICAgICAgICBwYWRkaW5nOiAxMHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICAgICAgICAgIG1pbi13aWR0aDogMTUwcHg7DQogICAgICAgICAgICAvKiBFbnN1cmUgaW5wdXQgZG9lc24ndCBnZXQgdG9vIHNtYWxsICovDQogICAgICAgIH0NCg0KICAgICAgICAjc2VuZC1idXR0b24sDQogICAgICAgICNyZWFkLWJ1dHRvbiwNCiAgICAgICAgI2Rvd25sb2FkLXBkZi1idXR0b24sDQogICAgICAgICNhcmNoaXZvcy1idXR0b24sDQogICAgICAgICNyZXBvcnQtYnV0dG9uLA0KICAgICAgICAjaHRtbC1tb2RlLWJ1dHRvbiwNCiAgICAgICAgI2ltYWdlLW1vZGUtYnV0dG9uLA0KICAgICAgICAjc2NoZW1hLW1vZGUtYnV0dG9uIHsNCiAgICAgICAgICAgIC8qIEFkZGVkIG5ldyBidXR0b24gdG8gc3R5bGUgKi8NCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMTVweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM0Y2FmNTA7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3M7DQogICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KICAgICAgICAgICAgLyogUHJldmVudCBidXR0b24gdGV4dCBmcm9tIHdyYXBwaW5nICovDQogICAgICAgIH0NCg0KICAgICAgICAjc2VuZC1idXR0b246aG92ZXIsDQogICAgICAgICNyZWFkLWJ1dHRvbjpob3ZlciwNCiAgICAgICAgI2Rvd25sb2FkLXBkZi1idXR0b246aG92ZXIsDQogICAgICAgICNhcmNoaXZvcy1idXR0b246aG92ZXIsDQogICAgICAgICNyZXBvcnQtYnV0dG9uOmhvdmVyLA0KICAgICAgICAjaHRtbC1tb2RlLWJ1dHRvbjpob3ZlciwNCiAgICAgICAgI2ltYWdlLW1vZGUtYnV0dG9uOmhvdmVyLA0KICAgICAgICAjc2NoZW1hLW1vZGUtYnV0dG9uOmhvdmVyIHsNCiAgICAgICAgICAgIC8qIEFkZGVkIG5ldyBidXR0b24gdG8gc3R5bGUgKi8NCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM0NWEwNDk7DQogICAgICAgIH0NCg0KICAgICAgICAjZmlsZS1pbnB1dCB7DQogICAgICAgICAgICBkaXNwbGF5OiBub25lOw0KICAgICAgICB9DQoNCiAgICAgICAgbGFiZWxbZm9yPSJmaWxlLWlucHV0Il0gew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzAwN2JmZjsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMTVweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zczsNCiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7DQogICAgICAgIH0NCg0KICAgICAgICBsYWJlbFtmb3I9ImZpbGUtaW5wdXQiXTpob3ZlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA1NmIzOw0KICAgICAgICB9DQoNCiAgICAgICAgI2ZvbnQtc2l6ZSB7DQogICAgICAgICAgICBwYWRkaW5nOiA4cHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgICAgICAgICAgbWluLXdpZHRoOiA2MHB4Ow0KICAgICAgICAgICAgLyogRW5zdXJlIHNlbGVjdCBib3ggaGFzIGEgbWluaW11bSB3aWR0aCAqLw0KICAgICAgICB9DQoNCiAgICAgICAgY29kZSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7DQogICAgICAgICAgICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlOw0KICAgICAgICAgICAgb3ZlcmZsb3cteDogYXV0bzsNCiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgbWFyZ2luLXRvcDogNXB4Ow0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogU3R5bGVzIGZvciB0aGUgc2lkZSBmaWxlIG1lbnUgKi8NCiAgICAgICAgI2FyY2hpdm8tbWVudSB7DQogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICB0b3A6IDA7DQogICAgICAgICAgICByaWdodDogLTMwMHB4Ow0KICAgICAgICAgICAgd2lkdGg6IDMwMHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODsNCiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI2NjYzsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IHJpZ2h0IDAuNXM7DQogICAgICAgICAgICBwYWRkaW5nOiAyMHB4Ow0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgICAgIHotaW5kZXg6IDEwMDA7DQogICAgICAgICAgICBib3gtc2hhZG93OiAtMnB4IDAgNXB4IHJnYmEoMCwgMCwgMCwgMC4xKTsNCiAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87DQogICAgICAgICAgICAvKiBFbmFibGUgc2Nyb2xsaW5nIGZvciBjb250ZW50ICovDQogICAgICAgIH0NCg0KICAgICAgICAjYXJjaGl2by1tZW51LmFjdGl2ZSB7DQogICAgICAgICAgICByaWdodDogMDsNCiAgICAgICAgfQ0KDQogICAgICAgICNhcmNoaXZvLW1lbnUgaDIgew0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMDsNCiAgICAgICAgICAgIGNvbG9yOiAjMzMzOw0KICAgICAgICB9DQoNCiAgICAgICAgI2Nsb3NlLW1lbnUtYnV0dG9uIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIHRvcDogMTBweDsNCiAgICAgICAgICAgIHJpZ2h0OiAxMHB4Ow0KICAgICAgICAgICAgYmFja2dyb3VuZDogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS44ZW07DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICBjb2xvcjogIzU1NTsNCiAgICAgICAgfQ0KDQogICAgICAgICNjbG9zZS1tZW51LWJ1dHRvbjpob3ZlciB7DQogICAgICAgICAgICBjb2xvcjogIzAwMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC50YWItYnV0dG9ucyB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkOw0KICAgICAgICB9DQoNCiAgICAgICAgLnRhYi1idXR0b25zIGJ1dHRvbiB7DQogICAgICAgICAgICBmbGV4OiAxOw0KICAgICAgICAgICAgcGFkZGluZzogMTBweCAxNXB4Ow0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2UwZTBlMDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07DQogICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3M7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHggNXB4IDAgMDsNCiAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMnB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLnRhYi1idXR0b25zIGJ1dHRvbjpsYXN0LWNoaWxkIHsNCiAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC50YWItYnV0dG9ucyBidXR0b24uYWN0aXZlLXRhYiB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmOw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KICAgICAgICAudGFiLWJ1dHRvbnMgYnV0dG9uOmhvdmVyOm5vdCguYWN0aXZlLXRhYikgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2QwZDBkMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC50YWItY29udGVudCB7DQogICAgICAgICAgICBkaXNwbGF5OiBub25lOw0KICAgICAgICB9DQoNCiAgICAgICAgLnRhYi1jb250ZW50LmFjdGl2ZS10YWItY29udGVudCB7DQogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgfQ0KDQogICAgICAgICNhcmNoaXZvLXN1YmlyIHsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IGRhc2hlZCAjYWFhOw0KICAgICAgICAgICAgcGFkZGluZzogMjBweDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjBmMGYwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzOw0KICAgICAgICB9DQoNCiAgICAgICAgI2FyY2hpdm8tc3ViaXI6aG92ZXIgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2U5ZTllOTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qIFN0eWxlcyBmb3IgdGhlIHBhc3RlIHRleHRhcmVhICovDQogICAgICAgICNiaW5hcnktcGFzdGUtdGV4dGFyZWEgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBtaW4taGVpZ2h0OiA4MHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDhweDsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAxMHB4Ow0KICAgICAgICAgICAgcmVzaXplOiB2ZXJ0aWNhbDsNCiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnU2Vnb2UgVUknLCBUYWhvbWEsIEdlbmV2YSwgVmVyZGFuYSwgc2Fucy1zZXJpZjsNCiAgICAgICAgfQ0KDQogICAgICAgICNodG1sLXByZXZpZXctdGV4dGFyZWEgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBtaW4taGVpZ2h0OiAxNTBweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7DQogICAgICAgICAgICBwYWRkaW5nOiA4cHg7DQogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDsNCiAgICAgICAgICAgIHJlc2l6ZTogdmVydGljYWw7DQogICAgICAgICAgICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlOw0KICAgICAgICB9DQoNCiAgICAgICAgI29wZW4taHRtbC1uZXctdGFiLWJ1dHRvbiB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjhhNzQ1Ow0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAxMHB4Ow0KICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA1cHg7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3M7DQogICAgICAgIH0NCg0KICAgICAgICAjb3Blbi1odG1sLW5ldy10YWItYnV0dG9uOmhvdmVyIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyMTg4Mzg7DQogICAgICAgIH0NCg0KICAgICAgICAjYXJjaGl2b3MtbGlzdGEsDQogICAgICAgICNkb2N1bWVudHMtbGlzdGEgew0KICAgICAgICAgICAgbGlzdC1zdHlsZS10eXBlOiBub25lOw0KICAgICAgICAgICAgcGFkZGluZzogMDsNCiAgICAgICAgfQ0KDQogICAgICAgICNhcmNoaXZvcy1saXN0YSBsaSwNCiAgICAgICAgI2RvY3VtZW50cy1saXN0YSBsaSB7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDhweCAwOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBmb250LXNpemU6IDAuOWVtOw0KICAgICAgICB9DQoNCiAgICAgICAgLmFyY2hpdm8taWNvbm9zIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBnYXA6IDEwcHg7DQogICAgICAgIH0NCg0KICAgICAgICAuYXJjaGl2by1pY29ub3MgYSB7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQogICAgICAgICAgICBjb2xvcjogIzU1NTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4yZW07DQogICAgICAgICAgICB0cmFuc2l0aW9uOiBjb2xvciAwLjNzOw0KICAgICAgICB9DQoNCiAgICAgICAgLmFyY2hpdm8taWNvbm9zIGE6aG92ZXIgew0KICAgICAgICAgICAgY29sb3I6ICMwMDdiZmY7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBDb250YWluZXIgZm9yIHRoZSBib3R0b20gYnV0dG9ucyAqLw0KICAgICAgICAjYm90dG9tLWJ1dHRvbnMtY29udGFpbmVyIHsNCiAgICAgICAgICAgIHdpZHRoOiA5MCU7DQogICAgICAgICAgICBtYXgtd2lkdGg6IDgwMHB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAxMHB4IGF1dG8gMjBweCBhdXRvOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMTBweDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwOw0KICAgICAgICB9DQoNCiAgICAgICAgI2h0bWwtcHJldmlldy1pZnJhbWUgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBoZWlnaHQ6IDIwMHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qIEZ1bGxzY3JlZW4gSFRNTCBQcmV2aWV3IE1vZGFsIFN0eWxlcyAqLw0KICAgICAgICAjZnVsbHNjcmVlbi1odG1sLW1vZGFsIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7DQogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICB6LWluZGV4OiAyMDAwOw0KICAgICAgICAgICAgbGVmdDogMDsNCiAgICAgICAgICAgIHRvcDogMDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgICAgb3ZlcmZsb3c6IGF1dG87DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuOCk7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICB9DQoNCiAgICAgICAgI2Z1bGxzY3JlZW4taHRtbC1tb2RhbC5hY3RpdmUgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgfQ0KDQogICAgICAgICNmdWxsc2NyZWVuLWh0bWwtbW9kYWwtY29udGVudCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmVmZWZlOw0KICAgICAgICAgICAgbWFyZ2luOiBhdXRvOw0KICAgICAgICAgICAgcGFkZGluZzogMjBweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM4ODg7DQogICAgICAgICAgICB3aWR0aDogOTAlOw0KICAgICAgICAgICAgaGVpZ2h0OiA5MCU7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgfQ0KDQogICAgICAgICNmdWxsc2NyZWVuLWh0bWwtaWZyYW1lIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSA0MHB4KTsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOw0KICAgICAgICB9DQoNCiAgICAgICAgI2Nsb3NlLWZ1bGxzY3JlZW4tbW9kYWwtYnV0dG9uIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIHRvcDogMTBweDsNCiAgICAgICAgICAgIHJpZ2h0OiAxMHB4Ow0KICAgICAgICAgICAgY29sb3I6ICNhYWE7DQogICAgICAgICAgICBmb250LXNpemU6IDI4cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IG5vbmU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBwYWRkaW5nOiAwOw0KICAgICAgICB9DQoNCiAgICAgICAgI2Nsb3NlLWZ1bGxzY3JlZW4tbW9kYWwtYnV0dG9uOmhvdmVyLA0KICAgICAgICAjY2xvc2UtZnVsbHNjcmVlbi1tb2RhbC1idXR0b246Zm9jdXMgew0KICAgICAgICAgICAgY29sb3I6ICMwMDA7DQogICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBOZXcgc3R5bGVzIGZvciB3ZWIgc2VhcmNoIHNlY3Rpb24gKi8NCiAgICAgICAgI3dlYi1zZWFyY2hlcy1jb250ZW50IHsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZTBlMGUwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgIH0NCg0KICAgICAgICAjd2ViLXNlYXJjaGVzLWNvbnRlbnQgaDMgew0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMDsNCiAgICAgICAgICAgIGNvbG9yOiAjNTU1Ow0KICAgICAgICB9DQoNCiAgICAgICAgI3dlYi1zZWFyY2hlcy1jb250ZW50IHVsIHsNCiAgICAgICAgICAgIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDA7DQogICAgICAgIH0NCg0KICAgICAgICAjd2ViLXNlYXJjaGVzLWNvbnRlbnQgbGkgew0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgI3dlYi1zZWFyY2hlcy1jb250ZW50IGEgew0KICAgICAgICAgICAgY29sb3I6ICMwMDdiZmY7DQogICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQogICAgICAgIH0NCg0KICAgICAgICAjd2ViLXNlYXJjaGVzLWNvbnRlbnQgYTpob3ZlciB7DQogICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5nb29nbGUtc2VhcmNoLXN1Z2dlc3Rpb25zLWNvbnRhaW5lciB7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAxNXB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2VlZmY7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTZmN2ZmOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogU3R5bGVzIGZvciB0aGUgYXVkaW8gcHJldmlldyBzZWN0aW9uICovDQogICAgICAgICNhdWRpby1wcmV2aWV3LWNvbnRlbnQgew0KICAgICAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlMGUwZTA7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmOWY5Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDsNCiAgICAgICAgfQ0KDQogICAgICAgICNhdWRpby1wcmV2aWV3LWNvbnRlbnQgaDMgew0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMDsNCiAgICAgICAgICAgIGNvbG9yOiAjNTU1Ow0KICAgICAgICB9DQoNCiAgICAgICAgI2F1ZGlvLXByZXZpZXctY29udGVudCBsYWJlbCB7DQogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCiAgICAgICAgI2F1ZGlvLXByZXZpZXctY29udGVudCBzZWxlY3QsDQogICAgICAgICNhdWRpby1wcmV2aWV3LWNvbnRlbnQgdGV4dGFyZWEsDQogICAgICAgICNhdWRpby1wcmV2aWV3LWNvbnRlbnQgYnV0dG9uIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgcGFkZGluZzogOHB4Ow0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICB9DQoNCiAgICAgICAgI2F1ZGlvLXByZXZpZXctY29udGVudCBidXR0b24gew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzAwN2JmZjsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zczsNCiAgICAgICAgfQ0KDQogICAgICAgICNhdWRpby1wcmV2aWV3LWNvbnRlbnQgYnV0dG9uOmhvdmVyIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDU2YjM7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBTdHlsZXMgZm9yIHRoZSBSZXBvcnQgYnV0dG9uICovDQogICAgICAgICNyZXBvcnQtYnV0dG9uIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgLyogRGVmYXVsdCBpbmFjdGl2ZSAqLw0KICAgICAgICAgICAgY29sb3I6ICNmZmMxMDc7DQogICAgICAgICAgICAvKiBZZWxsb3cgdGV4dCAqLw0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2ZmYzEwNzsNCiAgICAgICAgICAgIC8qIFllbGxvdyBib3JkZXIgKi8NCiAgICAgICAgfQ0KDQogICAgICAgICNyZXBvcnQtYnV0dG9uLnJlcG9ydC1hY3RpdmUgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmYzEwNzsNCiAgICAgICAgICAgIC8qIFllbGxvdyBiYWNrZ3JvdW5kICovDQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICAvKiBXaGl0ZSB0ZXh0ICovDQogICAgICAgIH0NCg0KICAgICAgICAjcmVwb3J0LWJ1dHRvbjpob3ZlciB7DQogICAgICAgICAgICBvcGFjaXR5OiAwLjg7DQogICAgICAgICAgICAvKiBTbGlnaHQgaG92ZXIgZWZmZWN0ICovDQogICAgICAgIH0NCg0KICAgICAgICAvKiBTdHlsZXMgZm9yIHRoZSBIVE1MIE1vZGUgYnV0dG9uIChub3cgZm9yIEhUTUwgZmlsdGVyaW5nKSAqLw0KICAgICAgICAjaHRtbC1tb2RlLWJ1dHRvbiB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIC8qIERlZmF1bHQgaW5hY3RpdmUgKi8NCiAgICAgICAgICAgIGNvbG9yOiAjNmY0MmMxOw0KICAgICAgICAgICAgLyogUHVycGxlIHRleHQgKGxpa2Ugb2xkIEFJIE1vZGUpICovDQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjNmY0MmMxOw0KICAgICAgICAgICAgLyogUHVycGxlIGJvcmRlciAqLw0KICAgICAgICB9DQoNCiAgICAgICAgI2h0bWwtbW9kZS1idXR0b24uaHRtbC1hY3RpdmUgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzZmNDJjMTsNCiAgICAgICAgICAgIC8qIFB1cnBsZSBiYWNrZ3JvdW5kICovDQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICAvKiBXaGl0ZSB0ZXh0ICovDQogICAgICAgIH0NCg0KICAgICAgICAjaHRtbC1tb2RlLWJ1dHRvbjpob3ZlciB7DQogICAgICAgICAgICBvcGFjaXR5OiAwLjg7DQogICAgICAgICAgICAvKiBTbGlnaHQgaG92ZXIgZWZmZWN0ICovDQogICAgICAgIH0NCg0KICAgICAgICAvKiBTdHlsZXMgZm9yIHRoZSBJbWFnZSBNb2RlIGJ1dHRvbiAqLw0KICAgICAgICAjaW1hZ2UtbW9kZS1idXR0b24gew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7DQogICAgICAgICAgICAvKiBEZWZhdWx0IGluYWN0aXZlICovDQogICAgICAgICAgICBjb2xvcjogI2ZkN2UxNDsNCiAgICAgICAgICAgIC8qIE9yYW5nZSB0ZXh0ICovDQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZmQ3ZTE0Ow0KICAgICAgICAgICAgLyogT3JhbmdlIGJvcmRlciAqLw0KICAgICAgICB9DQoNCiAgICAgICAgI2ltYWdlLW1vZGUtYnV0dG9uLmltYWdlLWFjdGl2ZSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmQ3ZTE0Ow0KICAgICAgICAgICAgLyogT3JhbmdlIGJhY2tncm91bmQgKi8NCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIC8qIFdoaXRlIHRleHQgKi8NCiAgICAgICAgfQ0KDQogICAgICAgICNpbWFnZS1tb2RlLWJ1dHRvbjpob3ZlciB7DQogICAgICAgICAgICBvcGFjaXR5OiAwLjg7DQogICAgICAgICAgICAvKiBTbGlnaHQgaG92ZXIgZWZmZWN0ICovDQogICAgICAgIH0NCg0KICAgICAgICAvKiBTdHlsZXMgZm9yIHRoZSBTY2hlbWEgTW9kZSBidXR0b24gKi8NCiAgICAgICAgI3NjaGVtYS1tb2RlLWJ1dHRvbiB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGNvbG9yOiAjMTdhMmI4OyAvKiBDaWFuICovDQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjMTdhMmI4Ow0KICAgICAgICB9DQoNCiAgICAgICAgI3NjaGVtYS1tb2RlLWJ1dHRvbi5zY2hlbWEtYWN0aXZlIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMxN2EyYjg7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgIH0NCiAgICAgICAgI3NjaGVtYS1tb2RlLWJ1dHRvbjpob3ZlciB7DQogICAgICAgICAgICBvcGFjaXR5OiAwLjg7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8qIFN0eWxlcyBmcm9tIEltYWdlbiA0IEhUTUwgKi8NCiAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7IC8qIEluaXRpYWxseSBoaWRkZW4gKi8NCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgbWF4LXdpZHRoOiA4MDBweDsgLyogQWRqdXN0IGFzIG5lZWRlZCBmb3Igb3ZlcmFsbCBsYXlvdXQgKi8NCiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0Ow0KICAgICAgICAgICAgbWluLWhlaWdodDogMTAwdmg7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjBmMmY1Ow0KICAgICAgICAgICAgb3ZlcmZsb3cteDogaGlkZGVuOw0KICAgICAgICAgICAgcGFkZGluZzogMjBweDsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIH0NCg0KICAgICAgICAjaW1hZ2UtNC1jb250YWluZXIgLmNvbnRhaW5lciB7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIG1heC13aWR0aDogNjAwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOw0KICAgICAgICAgICAgcGFkZGluZzogMjBweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDZweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4xKTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7DQogICAgICAgIH0NCg0KICAgICAgICAjaW1hZ2UtNC1jb250YWluZXIgaW1nIHsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNlMGUwZTA7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4Ow0KICAgICAgICAgICAgLyogQm9yZGVzIG3DoXMgcmVkb25kZWFkb3MgKi8NCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjA4KTsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7DQogICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBoZWlnaHQ6IGF1dG87DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4ycyBlYXNlLWluLW91dDsNCiAgICAgICAgfQ0KDQogICAgICAgICNpbWFnZS00LWNvbnRhaW5lciBpbWc6aG92ZXIgew0KICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjAyKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qIEVTVElMTyBQQVJBIElNQUdFTiBTRUxFQ0NJT05BREEgRU4gTEEgR0FMRVLDjUEgKi8NCiAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyICNnYWxlcmlhSW1hZ2VuZXMgaW1nLnNlbGVjY2lvbmFkYSB7DQogICAgICAgICAgICBib3JkZXI6IDRweCBzb2xpZCAjNDI5OWUxICFpbXBvcnRhbnQ7DQogICAgICAgICAgICAvKiBBenVsIGRlIFRhaWx3aW5kLCB5ICFpbXBvcnRhbnQgcGFyYSBhc2VndXJhciB2aXNpYmlsaWRhZCAqLw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDAgNHB4IHJnYmEoNjYsIDE1MywgMjI1LCAwLjUpOw0KICAgICAgICAgICAgLyogU29tYnJhIHN1YXZlIGFscmVkZWRvciBkZWwgYm9yZGUgKi8NCiAgICAgICAgfQ0KDQogICAgICAgICNpbWFnZS00LWNvbnRhaW5lciBoMSB7DQogICAgICAgICAgICBjb2xvcjogIzJkMzc0ODsNCiAgICAgICAgICAgIC8qIENvbG9yIGRlIHRleHRvIG3DoXMgb3NjdXJvICovDQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyNXB4Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgZm9udC1zaXplOiAyLjVyZW07DQogICAgICAgICAgICAvKiBUYW1hw7FvIGRlIGZ1ZW50ZSBtw6FzIGdyYW5kZSAqLw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDcwMDsNCiAgICAgICAgfQ0KDQogICAgICAgICNpbWFnZS00LWNvbnRhaW5lciBpbnB1dFt0eXBlPSJ0ZXh0Il0sDQogICAgICAgICNpbWFnZS00LWNvbnRhaW5lciAubW9kZWxvLXNlbGVjdG9yIHsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEycHggMTVweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMXJlbTsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjYmQ1ZTA7DQogICAgICAgICAgICAvKiBCb3JkZSBtw6FzIHN1YXZlICovDQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4Ow0KICAgICAgICAgICAgd2lkdGg6IGNhbGMoMTAwJSAtIDMwcHgpOw0KICAgICAgICAgICAgLyogQWp1c3RlIHBhcmEgcGFkZGluZyAqLw0KICAgICAgICAgICAgbWF4LXdpZHRoOiA0NTBweDsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgMC4ycyBlYXNlLWluLW91dCwgYm94LXNoYWRvdyAwLjJzIGVhc2UtaW4tb3V0Ow0KICAgICAgICB9DQoNCiAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyIGlucHV0W3R5cGU9InRleHQiXTpmb2N1cywNCiAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyIC5tb2RlbG8tc2VsZWN0b3I6Zm9jdXMgew0KICAgICAgICAgICAgb3V0bGluZTogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogIzQyOTllMTsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAwIDNweCByZ2JhKDY2LCAxNTMsIDIyNSwgMC41KTsNCiAgICAgICAgfQ0KDQogICAgICAgICNpbWFnZS00LWNvbnRhaW5lciAuYnV0dG9uLWdyb3VwIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGdhcDogMTBweDsNCiAgICAgICAgICAgIC8qIEVzcGFjaW8gZW50cmUgYm90b25lcyAqLw0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICB9DQoNCiAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyIGJ1dHRvbiB7DQogICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDI0cHg7DQogICAgICAgICAgICBmb250LXNpemU6IDFyZW07DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICAvKiBCb3JkZXMgbcOhcyByZWRvbmRlYWRvcyAqLw0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2UsIHRyYW5zZm9ybSAwLjFzIGVhc2U7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjEpOw0KICAgICAgICAgICAgZmxleC1ncm93OiAxOw0KICAgICAgICAgICAgLyogUGVybWl0ZSBxdWUgbG9zIGJvdG9uZXMgY3JlemNhbiAqLw0KICAgICAgICAgICAgbWluLXdpZHRoOiAxNTBweDsNCiAgICAgICAgICAgIC8qIEFuY2hvIG3DrW5pbW8gcGFyYSBib3RvbmVzICovDQogICAgICAgIH0NCg0KICAgICAgICAjaW1hZ2UtNC1jb250YWluZXIgYnV0dG9uOmhvdmVyIHsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTsNCiAgICAgICAgfQ0KDQogICAgICAgICNpbWFnZS00LWNvbnRhaW5lciBidXR0b246YWN0aXZlIHsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsNCiAgICAgICAgfQ0KDQogICAgICAgICNpbWFnZS00LWNvbnRhaW5lciAjZ2VuZXJhckltYWdlbiB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNENBRjUwOw0KICAgICAgICB9DQoNCiAgICAgICAgLyogVmVyZGUgKi8NCiAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyICNnZW5lcmFySW1hZ2VuOmhvdmVyIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM0NWEwNDk7DQogICAgICAgIH0NCg0KICAgICAgICAjaW1hZ2UtNC1jb250YWluZXIgI3ZhcmlhckltYWdlbiB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA4Q0JBOw0KICAgICAgICB9DQoNCiAgICAgICAgLyogQXp1bCAqLw0KICAgICAgICAjaW1hZ2UtNC1jb250YWluZXIgI3ZhcmlhckltYWdlbjpob3ZlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmE3Ow0KICAgICAgICB9DQoNCiAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyICN2YXJpYWNpb25BbGdvcml0bWljYSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjODAwMDgwOw0KICAgICAgICB9DQoNCiAgICAgICAgLyogUMO6cnB1cmEgKi8NCiAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyICN2YXJpYWNpb25BbGdvcml0bWljYTpob3ZlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjYwMDY2Ow0KICAgICAgICB9DQoNCiAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyICNwYXJhclZhcmlhY2lvbiB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjQ0MzM2Ow0KICAgICAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qIFJvam8sIGluaWNpYWxtZW50ZSBvY3VsdG8gKi8NCiAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyICNwYXJhclZhcmlhY2lvbjpob3ZlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDMyZjJmOw0KICAgICAgICB9DQoNCiAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyICN2ZXJCaWJsaW90ZWNhIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyOGE3NDU7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBWZXJkZSBvc2N1cm8gKi8NCiAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyICN2ZXJCaWJsaW90ZWNhOmhvdmVyIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyMTg4Mzg7DQogICAgICAgIH0NCg0KICAgICAgICAjaW1hZ2UtNC1jb250YWluZXIgI29jdWx0YXJCaWJsaW90ZWNhIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNkYzM1NDU7DQogICAgICAgICAgICBkaXNwbGF5OiBub25lOw0KICAgICAgICB9DQoNCiAgICAgICAgLyogUm9qbyBvc2N1cm8sIGluaWNpYWxtZW50ZSBvY3VsdG8gKi8NCiAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyICNvY3VsdGFyQmlibGlvdGVjYTpob3ZlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYzgyMzMzOw0KICAgICAgICB9DQoNCiAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyICNkZXNjYXJnYXJJbWFnZW5QcmluY2lwYWwgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzE3YTJiODsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qIENpYW4gKi8NCiAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyICNkZXNjYXJnYXJJbWFnZW5QcmluY2lwYWw6aG92ZXIgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzEzODQ5NjsNCiAgICAgICAgfQ0KDQogICAgICAgICNpbWFnZS00LWNvbnRhaW5lciAjZGVzY2FyZ2FyR2FsZXJpYSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZjMTA3Ow0KICAgICAgICAgICAgY29sb3I6ICMzMzM7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBBbWFyaWxsbywgdGV4dG8gb3NjdXJvICovDQogICAgICAgICNpbWFnZS00LWNvbnRhaW5lciAjZGVzY2FyZ2FyR2FsZXJpYTpob3ZlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBhODAwOw0KICAgICAgICB9DQoNCiAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyICNkZXNjYXJnYXJTZWxlY2Npb25hZGFzIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM2ZjQyYzE7DQogICAgICAgIH0NCg0KICAgICAgICAvKiDDjW5kaWdvICovDQogICAgICAgICNpbWFnZS00LWNvbnRhaW5lciAjZGVzY2FyZ2FyU2VsZWNjaW9uYWRhczpob3ZlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNWEyZDljOw0KICAgICAgICB9DQoNCiAgICAgICAgLyogTmV3IHN0eWxlIGZvciAiVm9sdmVyIGFsIENoYXQiIGJ1dHRvbiAqLw0KICAgICAgICAjaW1hZ2UtNC1jb250YWluZXIgI2JhY2tUb0NoYXRCdXR0b24gew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzZjNzU3ZDsgLyogR3JleSAqLw0KICAgICAgICB9DQogICAgICAgICNpbWFnZS00LWNvbnRhaW5lciAjYmFja1RvQ2hhdEJ1dHRvbjpob3ZlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNWE2MjY4Ow0KICAgICAgICB9DQoNCg0KICAgICAgICAjaW1hZ2UtNC1jb250YWluZXIgI2dhbGVyaWFJbWFnZW5lcyB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwOw0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAzMHB4Ow0KICAgICAgICAgICAgZ2FwOiAxNXB4Ow0KICAgICAgICAgICAgLyogRXNwYWNpbyBlbnRyZSBpbcOhZ2VuZXMgZGUgbGEgZ2FsZXLDrWEgKi8NCiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7DQogICAgICAgICAgICAvKiBJbmljaWFsbWVudGUgb2N1bHRhIGxhIGdhbGVyw61hICovDQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgfQ0KDQogICAgICAgICNpbWFnZS00LWNvbnRhaW5lciAjZ2FsZXJpYUltYWdlbmVzIGltZyB7DQogICAgICAgICAgICB3aWR0aDogMTgwcHg7DQogICAgICAgICAgICAvKiBUYW1hw7FvIG3DoXMgcGVxdWXDsW8gcGFyYSBtaW5pYXR1cmFzICovDQogICAgICAgICAgICBoZWlnaHQ6IDE4MHB4Ow0KICAgICAgICAgICAgLyogQXNlZ3VyYSBxdWUgc2VhbiBjdWFkcmFkYXMgKi8NCiAgICAgICAgICAgIG9iamVjdC1maXQ6IGNvdmVyOw0KICAgICAgICAgICAgLyogUmVjb3J0YSBsYSBpbWFnZW4gcGFyYSBxdWUgcXVlcGEgKi8NCiAgICAgICAgICAgIG1hcmdpbjogMDsNCiAgICAgICAgICAgIC8qIEVsaW1pbmFkbyBtYXJnZW4gZXh0cmEgKi8NCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlMGUwZTA7DQogICAgICAgICAgICAvKiBCb3JkZSBwcmVkZXRlcm1pbmFkbyBkZSBsYSBnYWxlcsOtYSAqLw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwgMCwgMCwgMC4wNSk7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4ycyBlYXNlLWluLW91dCwgYm9yZGVyIDAuMnMgZWFzZS1pbi1vdXQsIGJveC1zaGFkb3cgMC4ycyBlYXNlLWluLW91dDsNCiAgICAgICAgfQ0KDQogICAgICAgICNpbWFnZS00LWNvbnRhaW5lciAjZ2FsZXJpYUltYWdlbmVzIGltZzpob3ZlciB7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpOw0KICAgICAgICB9DQoNCiAgICAgICAgLyogRXN0aWxvcyBwYXJhIGVsIG1lbnNhamUgdGVtcG9yYWwgKi8NCiAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyICN1c2VyTWVzc2FnZSB7DQogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICB0b3A6IDIwcHg7DQogICAgICAgICAgICBsZWZ0OiA1MCU7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzOw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgICAgICAgICAgei1pbmRleDogMTAwMDsNCiAgICAgICAgICAgIG9wYWNpdHk6IDA7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNXMgZWFzZS1pbi1vdXQ7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBOZXcgc3R5bGVzIGZvciBpbnRlcmFjdGl2ZSBzY2hlbWEgKi8NCiAgICAgICAgLmludGVyYWN0aXZlLXNjaGVtYSB7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAxNXB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlMGUwZTA7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmOWY5Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmludGVyYWN0aXZlLXNjaGVtYSBoMiB7DQogICAgICAgICAgICBjb2xvcjogIzJkMzc0ODsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDA7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxLjhlbTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5zY2hlbWEtc2VjdGlvbiB7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZWVlOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47IC8qIEVuc3VyZXMgYm9yZGVyLXJhZGl1cyBhcHBsaWVzIGNvcnJlY3RseSAqLw0KICAgICAgICB9DQoNCiAgICAgICAgLnNjaGVtYS1oZWFkaW5nIHsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgcGFkZGluZzogOHB4IDEwcHg7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjBmMGYwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OyAvKiBBcHBseSB0byBzdW1tYXJ5ICovDQogICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnM7DQogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsgLyogTWFrZSBzdW1tYXJ5IHRha2UgZnVsbCB3aWR0aCAqLw0KICAgICAgICB9DQoNCiAgICAgICAgLnNjaGVtYS1oZWFkaW5nOmhvdmVyIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlMGUwZTA7DQogICAgICAgIH0NCg0KICAgICAgICAuc2NoZW1hLWNvbnRlbnQgew0KICAgICAgICAgICAgcGFkZGluZzogNXB4IDEwcHggMTBweCAxMHB4Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMDsNCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7DQogICAgICAgICAgICBjb2xvcjogIzU1NTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5zY2hlbWEtc3Vic2VjdGlvbnMgew0KICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDE1cHg7DQogICAgICAgICAgICBib3JkZXItbGVmdDogMXB4IGRhc2hlZCAjY2NjOw0KICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiAxMHB4Ow0KICAgICAgICB9DQoNCg0KICAgICAgICAvKiBSZXNwb25zaXZlIGFkanVzdG1lbnRzICovDQogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkgew0KDQogICAgICAgICAgICAjY2hhdC1jb250YWluZXIsDQogICAgICAgICAgICAjaW5wdXQtY29udGFpbmVyLA0KICAgICAgICAgICAgI2JvdHRvbS1idXR0b25zLWNvbnRhaW5lciB7DQogICAgICAgICAgICAgICAgd2lkdGg6IDk1JTsNCiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogYXV0bzsNCiAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IGF1dG87DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICNpbnB1dC1jb250YWluZXIgew0KICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICNzZW5kLWJ1dHRvbiwNCiAgICAgICAgICAgICNyZWFkLWJ1dHRvbiwNCiAgICAgICAgICAgICNkb3dubG9hZC1wZGYtYnV0dG9uLA0KICAgICAgICAgICAgI2FyY2hpdm9zLWJ1dHRvbiwNCiAgICAgICAgICAgICNyZXBvcnQtYnV0dG9uLA0KICAgICAgICAgICAgI2h0bWwtbW9kZS1idXR0b24sDQogICAgICAgICAgICAjaW1hZ2UtbW9kZS1idXR0b24sDQogICAgICAgICAgICAjc2NoZW1hLW1vZGUtYnV0dG9uLCAvKiBBZGRlZCBmb3IgcmVzcG9uc2l2ZSAqLw0KICAgICAgICAgICAgbGFiZWxbZm9yPSJmaWxlLWlucHV0Il0gew0KICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgI2FyY2hpdm8tbWVudSB7DQogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICAgICAgcmlnaHQ6IC0xMDAlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAjYXJjaGl2by1tZW51LmFjdGl2ZSB7DQogICAgICAgICAgICAgICAgcmlnaHQ6IDA7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8qIEltYWdlIDQgcmVzcG9uc2l2ZSBhZGp1c3RtZW50cyAqLw0KICAgICAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyIGgxIHsNCiAgICAgICAgICAgICAgICBmb250LXNpemU6IDJyZW07DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICNpbWFnZS00LWNvbnRhaW5lciAuYnV0dG9uLWdyb3VwIHsNCiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgICAgIGdhcDogOHB4Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAjaW1hZ2UtNC1jb250YWluZXIgYnV0dG9uIHsNCiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IHVuc2V0Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAjaW1hZ2UtNC1jb250YWluZXIgaW5wdXRbdHlwZT0idGV4dCJdLA0KICAgICAgICAgICAgI2ltYWdlLTQtY29udGFpbmVyIC5tb2RlbG8tc2VsZWN0b3Igew0KICAgICAgICAgICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAyMHB4KTsNCiAgICAgICAgICAgICAgICAvKiBBanVzdGUgcGFyYSBtw7N2aWxlcyAqLw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAjaW1hZ2UtNC1jb250YWluZXIgI2dhbGVyaWFJbWFnZW5lcyBpbWcgew0KICAgICAgICAgICAgICAgIHdpZHRoOiAxNTBweDsNCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE1MHB4Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgPC9zdHlsZT4NCg0KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvS2FUZVgvMC4xNi40L2thdGV4Lm1pbi5jc3MiDQogICAgICAgIHhpbnRlZ3JpdHk9InNoYTUxMi12RG5xWTEya0YrMzByeDFKMS95WWtSYjFzSm1KL1I1aDMwVjBmQzZ3eksrOUo4MC8zMlk2TStqNjkyc1k2RjZ3NWtLM2U5aVhON3pIcTh5VzQrOVZ3PT0iDQogICAgICAgIGNyb3Nzb3JpZ2luPSJhbm9ueW1vdXMiIHJlZmVycmVycG9saWN5PSJuby1yZWZlcnJlciIgLz4NCiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2ZvbnQtYXdlc29tZS82LjAuMC1iZXRhMy9jc3MvYWxsLm1pbi5jc3MiPg0KDQo8L2hlYWQ+DQoNCjxib2R5Pg0KDQogICAgPGRpdiBpZD0iY2hhdC1jb250YWluZXIiPjwvZGl2Pg0KDQogICAgPGRpdiBpZD0iaW5wdXQtY29udGFpbmVyIj4NCiAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJtZXNzYWdlLWlucHV0IiBwbGFjZWhvbGRlcj0iRXNjcmliZSB0dSBtZW5zYWplLi4uIj4NCiAgICAgICAgPGxhYmVsIGZvcj0iZmlsZS1pbnB1dCI+QWRqdW50YXIgQXJjaGl2b3M8L2xhYmVsPg0KICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImZpbGUtaW5wdXQiIGFjY2VwdD0iaW1hZ2UvKiwgYXBwbGljYXRpb24vcGRmLCBhdWRpby8qLCB2aWRlby8qIiBtdWx0aXBsZT4NCiAgICAgICAgPGJ1dHRvbiBpZD0ic2VuZC1idXR0b24iPkVudmlhcjwvYnV0dG9uPg0KICAgIDwvZGl2Pg0KDQogICAgPGRpdiBpZD0iYm90dG9tLWJ1dHRvbnMtY29udGFpbmVyIj4NCiAgICAgICAgPGJ1dHRvbiBpZD0icmVhZC1idXR0b24iPjxpIGNsYXNzPSJmYXMgZmEtdm9sdW1lLXVwIj48L2k+IEVzY3VjaGFyPC9idXR0b24+DQogICAgICAgIDxidXR0b24gaWQ9InJlcG9ydC1idXR0b24iPjxpIGNsYXNzPSJmYXMgZmEtZmlsZS1hbHQiPjwvaT4gSW5mb3JtZTwvYnV0dG9uPg0KICAgICAgICA8YnV0dG9uIGlkPSJodG1sLW1vZGUtYnV0dG9uIj48aSBjbGFzcz0iZmFzIGZhLWNvZGUiPjwvaT4gTW9kbyBIVE1MPC9idXR0b24+DQogICAgICAgIDxidXR0b24gaWQ9ImltYWdlLW1vZGUtYnV0dG9uIj48aSBjbGFzcz0iZmFzIGZhLWltYWdlIj48L2k+IE1vZG8gSW1hZ2VuIDQ8L2J1dHRvbj4NCiAgICAgICAgPGJ1dHRvbiBpZD0ic2NoZW1hLW1vZGUtYnV0dG9uIj48aSBjbGFzcz0iZmFzIGZhLXNpdGVtYXAiPjwvaT4gTW9kbyBFc3F1ZW1hPC9idXR0b24+DQogICAgICAgIDxidXR0b24gaWQ9ImRvd25sb2FkLXBkZi1idXR0b24iPkRlc2NhcmdhciBQREY8L2J1dHRvbj4NCiAgICAgICAgPGJ1dHRvbiBpZD0iYXJjaGl2b3MtYnV0dG9uIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzAwN2JmZjsiPk1BUzwvYnV0dG9uPg0KICAgICAgICA8c2VsZWN0IGlkPSJmb250LXNpemUiPg0KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMTAiPjEwPC9vcHRpb24+DQogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIxMiI+MTI8L29wdGlvbj4NCiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjE0Ij4xNDwvb3B0aW9uPg0KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMTYiIHNlbGVjdGVkPjE2PC9vcHRpb24+DQogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIxOCI+MTg8L29wdGlvbj4NCiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjIwIj4yMDwvb3B0aW9uPg0KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMjQiPjI0PC9vcHRpb24+DQogICAgICAgIDwvc2VsZWN0Pg0KICAgIDwvZGl2Pg0KDQoNCiAgICA8ZGl2IGlkPSJhcmNoaXZvLW1lbnUiPg0KICAgICAgICA8aDI+QXJjaGl2b3M8L2gyPg0KICAgICAgICA8YnV0dG9uIGlkPSJjbG9zZS1tZW51LWJ1dHRvbiI+JnRpbWVzOzwvYnV0dG9uPg0KICAgICAgICA8ZGl2IGNsYXNzPSJ0YWItYnV0dG9ucyI+DQogICAgICAgICAgICA8YnV0dG9uIGlkPSJ0YWItYnV0dG9uLWZpbGVzIiBjbGFzcz0iYWN0aXZlLXRhYiI+QXJjaGl2b3M8L2J1dHRvbj4NCiAgICAgICAgICAgIDxidXR0b24gaWQ9InRhYi1idXR0b24taHRtbC1wcmV2aWV3Ij5QcmV2aXN1YWxpemFyIEhUTUw8L2J1dHRvbj4NCiAgICAgICAgICAgIDxidXR0b24gaWQ9InRhYi1idXR0b24tZG9jdW1lbnRzIj5Eb2N1bWVudG9zPC9idXR0b24+DQogICAgICAgICAgICA8YnV0dG9uIGlkPSJ0YWItYnV0dG9uLXdlYi1zZWFyY2hlcyI+QsO6c3F1ZWRhcyBXZWI8L2J1dHRvbj4NCiAgICAgICAgICAgIDxidXR0b24gaWQ9InRhYi1idXR0b24tYXVkaW8tcHJldmlldyI+QXVkaW88L2J1dHRvbj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBpZD0idGFiLWNvbnRlbnQtZmlsZXMiIGNsYXNzPSJ0YWItY29udGVudCBhY3RpdmUtdGFiLWNvbnRlbnQiPg0KICAgICAgICAgICAgPGRpdiBpZD0iYXJjaGl2by1zdWJpciI+DQogICAgICAgICAgICAgICAgPHA+QXJyYXN0cmEgeSBzdWVsdGEgYXJjaGl2b3MgYXF1w60sIG8gaGF6IGNsaWMgcGFyYSBzdWJpci48L3A+DQogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJhcmNoaXZvLXN1YmlyLWlucHV0IiBzdHlsZT0iZGlzcGxheTogbm9uZTsiIG11bHRpcGxlPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8cD5PIHBlZ2EgaW3DoWdlbmVzIG8gYXJjaGl2b3MgYXF1w606PC9wPg0KICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJiaW5hcnktcGFzdGUtdGV4dGFyZWEiIHBsYWNlaG9sZGVyPSJQZWdhIGltw6FnZW5lcyBvIGFyY2hpdm9zIGRlbCBwb3J0YXBhcGVsZXMuLi4iPjwvdGV4dGFyZWE+DQogICAgICAgICAgICA8aDM+QXJjaGl2b3Mgc3ViaWRvcyBlbiBlc3RhIGNvbnZlcnNhY2nDs246PC9oMz4NCiAgICAgICAgICAgIDx1bCBpZD0iYXJjaGl2b3MtbGlzdGEiPg0KICAgICAgICAgICAgPC91bD4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBpZD0idGFiLWNvbnRlbnQtaHRtbC1wcmV2aWV3IiBjbGFzcz0idGFiLWNvbnRlbnQiPg0KICAgICAgICAgICAgPHA+UGVnYSB0dSBjw7NkaWdvIEhUTUwgYXF1w60gcGFyYSBwcmV2aXN1YWxpemFybG86PC9wPg0KICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJodG1sLXByZXZpZXctdGV4dGFyZWEiIHBsYWNlaG9sZGVyPSI8IURPQ1RZUEUgaHRtbD48aHRtbD4uLi48L2h0bWw+Ij48L3RleHRhcmVhPg0KICAgICAgICAgICAgPGJ1dHRvbiBpZD0ib3Blbi1odG1sLW5ldy10YWItYnV0dG9uIj5BYnJpciBIVE1MPC9idXR0b24+DQogICAgICAgICAgICA8aWZyYW1lIGlkPSJodG1sLXByZXZpZXctaWZyYW1lIiBzYW5kYm94PSJhbGxvdy1zY3JpcHRzIGFsbG93LXNhbWUtb3JpZ2luIg0KICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDoxMDAlOyBoZWlnaHQ6MjAwcHg7IGJvcmRlcjoxcHggc29saWQgI2NjYzsgbWFyZ2luLXRvcDoxMHB4OyI+PC9pZnJhbWU+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgaWQ9InRhYi1jb250ZW50LWRvY3VtZW50cyIgY2xhc3M9InRhYi1jb250ZW50Ij4NCiAgICAgICAgICAgIDxoMz5Eb2N1bWVudG9zIGVuIGVzdGEgY29udmVyc2FjacOzbjo8L2gzPg0KICAgICAgICAgICAgPHVsIGlkPSJkb2N1bWVudHMtbGlzdGEiPjwvdWw+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgaWQ9InRhYi1jb250ZW50LXdlYi1zZWFyY2hlcyIgY2xhc3M9InRhYi1jb250ZW50Ij4NCiAgICAgICAgICAgIDxoMz5SZXN1bHRhZG9zIGRlIELDunNxdWVkYSBkZSBHb29nbGU6PC9oMz4NCiAgICAgICAgICAgIDxkaXYgaWQ9Imdvb2dsZS1zZWFyY2gtc3VnZ2VzdGlvbnMtY29udGFpbmVyIiBjbGFzcz0iZ29vZ2xlLXNlYXJjaC1zdWdnZXN0aW9ucy1jb250YWluZXIiPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8aDM+RnVlbnRlczo8L2gzPg0KICAgICAgICAgICAgPHVsIGlkPSJ3ZWItc2VhcmNoLXNvdXJjZXMtbGlzdCI+DQogICAgICAgICAgICA8L3VsPg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IGlkPSJ0YWItY29udGVudC1hdWRpby1wcmV2aWV3IiBjbGFzcz0idGFiLWNvbnRlbnQiPg0KICAgICAgICAgICAgPGgzPkdlbmVyYXIgQXVkaW88L2gzPg0KICAgICAgICAgICAgPGxhYmVsIGZvcj0icHJldmlldy1hdWRpby12b2ljZS1zZWxlY3RvciI+U2VsZWNjaW9uYXIgVm96OjwvbGFiZWw+DQogICAgICAgICAgICA8c2VsZWN0IGlkPSJwcmV2aWV3LWF1ZGlvLXZvaWNlLXNlbGVjdG9yIj48L3NlbGVjdD4NCg0KICAgICAgICAgICAgPGxhYmVsIGZvcj0iY3VzdG9tLWF1ZGlvLXRleHRhcmVhIj5UZXh0byBwYXJhIEdlbmVyYXIgQXVkaW86PC9sYWJlbD4NCiAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0iY3VzdG9tLWF1ZGlvLXRleHRhcmVhIiBwbGFjZWhvbGRlcj0iRXNjcmliZSBlbCB0ZXh0byBwYXJhIGNvbnZlcnRpciBhIGF1ZGlvLi4uIj48L3RleHRhcmVhPg0KICAgICAgICAgICAgPGJ1dHRvbiBpZD0icGxheS1jdXN0b20tYXVkaW8tYnV0dG9uIj5HZW5lcmFyIEF1ZGlvPC9idXR0b24+DQogICAgICAgICAgICA8YnV0dG9uIGlkPSJzdW1tYXJpemUtYXVkaW8tYnV0dG9uIiBzdHlsZT0ibWFyZ2luLXRvcDogMTBweDsiPjxpIGNsYXNzPSJmYXMgZmEtZmlsZS1hdWRpbyI+PC9pPiBSZXN1bWlyDQogICAgICAgICAgICAgICAgeSBFc2N1Y2hhcjwvYnV0dG9uPiA8YXVkaW8gY29udHJvbHMgaWQ9InBvbGxpbmF0aW9ucy1hdWRpby1wbGF5ZXIiDQogICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAlOyBtYXJnaW4tdG9wOiAxMHB4OyBkaXNwbGF5OiBub25lOyI+PC9hdWRpbz4NCiAgICAgICAgPC9kaXY+DQoNCiAgICA8L2Rpdj4NCg0KICAgIDxkaXYgaWQ9ImZ1bGxzY3JlZW4taHRtbC1tb2RhbCI+DQogICAgICAgIDxkaXYgaWQ9ImZ1bGxzY3JlZW4taHRtbC1tb2RhbC1jb250ZW50Ij4NCiAgICAgICAgICAgIDxidXR0b24gaWQ9ImNsb3NlLWZ1bGxzY3JlZW4tbW9kYWwtYnV0dG9uIj4mdGltZXM7PC9idXR0b24+DQogICAgICAgICAgICA8aWZyYW1lIGlkPSJmdWxsc2NyZWVuLWh0bWwtaWZyYW1lIiBzYW5kYm94PSJhbGxvdy1zY3JpcHRzIGFsbG93LXNhbWUtb3JpZ2luIj48L2lmcmFtZT4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8ZGl2IGlkPSJpbWFnZS00LWNvbnRhaW5lciI+DQogICAgICAgIDxkaXYgY2xhc3M9ImNvbnRhaW5lciI+DQogICAgICAgICAgICA8aDE+SW1hZ2VuIDQ8L2gxPg0KICAgICAgICAgICAgPGltZyBpZD0iaW1hZ2VuR2VuZXJhZGEiIHNyYz0iaHR0cHM6Ly9wbGFjZWhvbGQuY28vNTEyeDUxMi9jY2NjY2MvMzMzMzMzP3RleHQ9Q2FyZ2FuZG8uLi4iDQogICAgICAgICAgICAgICAgYWx0PSJJbWFnZW4gR2VuZXJhZGEiPg0KICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJtZW5zYWplSW5wdXQiIHBsYWNlaG9sZGVyPSJJbnRyb2R1Y2UgdHUgbWVuc2FqZSI+DQogICAgICAgICAgICA8c2VsZWN0IGlkPSJtb2RlbG9TZWxlY3RvciIgY2xhc3M9Im1vZGVsby1zZWxlY3RvciI+DQogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZmx1eCI+TW9kZWxvIE5vcm1hbDwvb3B0aW9uPg0KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InR1cmJvIj5Nb2RlbG8gUsOhcGlkbzwvb3B0aW9uPg0KICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJidXR0b24tZ3JvdXAiPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImdlbmVyYXJJbWFnZW4iPkdlbmVyYXIgTnVldmEgSW1hZ2VuPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0idmFyaWFySW1hZ2VuIj5WYXJpYXIgSW1hZ2VuPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0idmFyaWFjaW9uQWxnb3JpdG1pY2EiPlZhcmlhY2nDs24gQWxnb3LDrXRtaWNhPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0icGFyYXJWYXJpYWNpb24iPlBhcmFyIFZhcmlhY2nDs248L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJ2ZXJCaWJsaW90ZWNhIj5WZXIgQmlibGlvdGVjYTwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9Im9jdWx0YXJCaWJsaW90ZWNhIj5PY3VsdGFyIEJpYmxpb3RlY2E8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJkZXNjYXJnYXJJbWFnZW5QcmluY2lwYWwiPkRlc2NhcmdhciBJbWFnZW48L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJkZXNjYXJnYXJHYWxlcmlhIj5EZXNjYXJnYXIgR2FsZXLDrWE8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJkZXNjYXJnYXJTZWxlY2Npb25hZGFzIj5EZXNjYXJnYXIgU2VsZWNjaW9uYWRhczwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJhY2tUb0NoYXRCdXR0b24iPjxpIGNsYXNzPSJmYXMgZmEtY29tbWVudHMiPjwvaT4gVm9sdmVyIGFsIENoYXQ8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICAgICAgPGRpdiBpZD0iZ2FsZXJpYUltYWdlbmVzIj48L2Rpdj4NCiAgICAgICAgPGRpdiBpZD0idXNlck1lc3NhZ2UiPjwvZGl2Pg0KICAgIDwvZGl2Pg0KDQoNCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvc2hvd2Rvd24vMi4xLjAvc2hvd2Rvd24ubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvS2FUZVgvMC4xNi40L2thdGV4Lm1pbi5qcyINCiAgICAgICAgeGludGVncml0eT0ic2hhNTEyLXZEbnFZMTJrRiszMHJ4MUoxL3lZa1JiMXNKbUovUjVoMzBWMGZDNnd6Sys5SjgwLzMyWTZNK2o2OTJzWTZGNnc1a0szZTlpWE43ekhxOHlXNCs5Vnc9PSINCiAgICAgICAgY3Jvc3NvcmlnaW49ImFub255bW91cyIgcmVmZXJyZXJwb2xpY3k9Im5vLXJlZmVycmVyIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvS2FUZVgvMC4xNi40L2NvbnRyaWIvYXV0by1yZW5kZXIubWluLmpzIg0KICAgICAgICB4aW50ZWdyaXR5PSJzaGE1MTItbkwreVI2Z0NnKzFYMHM4OVFmQzYyS3EwTDBOMmkzSjZtWS82ZDVxM2cxSzBLMlcxOHc1KzZML3cvNnhRNXkyRThmNW1POThpNU01ajVMNXc9PSINCiAgICAgICAgY3Jvc3NvcmlnaW49ImFub255bW91cyIgcmVmZXJyZXJwb2xpY3k9Im5vLXJlZmVycmVyIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvanNwZGYvMi41LjEvanNwZGYudW1kLm1pbi5qcyI+PC9zY3JpcHQ+DQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICAvLyBHZXQgcmVmZXJlbmNlcyB0byBET00gZWxlbWVudHMNCiAgICAgICAgY29uc3QgY2hhdENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0LWNvbnRhaW5lcicpOw0KICAgICAgICBjb25zdCBpbnB1dENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dC1jb250YWluZXInKTsgLy8gQWRkZWQgZm9yIHRvZ2dsaW5nDQogICAgICAgIGNvbnN0IGJvdHRvbUJ1dHRvbnNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm90dG9tLWJ1dHRvbnMtY29udGFpbmVyJyk7IC8vIEFkZGVkIGZvciB0b2dnbGluZw0KICAgICAgICBjb25zdCBtZXNzYWdlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVzc2FnZS1pbnB1dCcpOw0KICAgICAgICBjb25zdCBzZW5kQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbmQtYnV0dG9uJyk7DQogICAgICAgIGNvbnN0IGZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlLWlucHV0Jyk7DQogICAgICAgIGNvbnN0IHJlYWRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVhZC1idXR0b24nKTsNCiAgICAgICAgY29uc3Qgc3VtbWFyaXplQXVkaW9CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VtbWFyaXplLWF1ZGlvLWJ1dHRvbicpOyAvLyBOZXcgYnV0dG9uIHJlZmVyZW5jZQ0KICAgICAgICBjb25zdCBkb3dubG9hZFBkZkJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb3dubG9hZC1wZGYtYnV0dG9uJyk7DQogICAgICAgIGNvbnN0IGZvbnRTaXplU2VsZWN0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9udC1zaXplJyk7DQoNCiAgICAgICAgLy8gRWxlbWVudHMgb2YgdGhlIGZpbGUgbWVudQ0KICAgICAgICBjb25zdCBhcmNoaXZvc0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcmNoaXZvcy1idXR0b24nKTsNCiAgICAgICAgY29uc3QgYXJjaGl2b01lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJjaGl2by1tZW51Jyk7DQogICAgICAgIGNvbnN0IGFyY2hpdm9zTGlzdGEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJjaGl2b3MtbGlzdGEnKTsNCiAgICAgICAgY29uc3QgYXJjaGl2b1N1YmlyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FyY2hpdm8tc3ViaXInKTsNCiAgICAgICAgY29uc3QgYXJjaGl2b1N1YmlySW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJjaGl2by1zdWJpci1pbnB1dCcpOw0KICAgICAgICBjb25zdCBiaW5hcnlQYXN0ZVRleHRhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpbmFyeS1wYXN0ZS10ZXh0YXJlYScpOw0KICAgICAgICBjb25zdCBjbG9zZU1lbnVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2UtbWVudS1idXR0b24nKTsNCg0KICAgICAgICAvLyBIVE1MIFByZXZpZXcgZWxlbWVudHMNCiAgICAgICAgY29uc3QgdGFiQnV0dG9uRmlsZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFiLWJ1dHRvbi1maWxlcycpOw0KICAgICAgICBjb25zdCB0YWJCdXR0b25IdG1sUHJldmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWItYnV0dG9uLWh0bWwtcHJldmlldycpOw0KICAgICAgICBjb25zdCB0YWJDb250ZW50RmlsZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFiLWNvbnRlbnQtZmlsZXMnKTsNCiAgICAgICAgY29uc3QgdGFiQ29udGVudEh0bWxQcmV2aWV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhYi1jb250ZW50LWh0bWwtcHJldmlldycpOw0KICAgICAgICBjb25zdCBodG1sUHJldmlld1RleHRhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2h0bWwtcHJldmlldy10ZXh0YXJlYScpOw0KICAgICAgICBjb25zdCBodG1sUHJldmlld0lmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdodG1sLXByZXZpZXctaWZyYW1lJyk7DQogICAgICAgIGNvbnN0IG9wZW5IdG1sTmV3VGFiQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wZW4taHRtbC1uZXctdGFiLWJ1dHRvbicpOw0KDQogICAgICAgIC8vIERvY3VtZW50cyBlbGVtZW50cw0KICAgICAgICBjb25zdCB0YWJCdXR0b25Eb2N1bWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFiLWJ1dHRvbi1kb2N1bWVudHMnKTsNCiAgICAgICAgY29uc3QgdGFiQ29udGVudERvY3VtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWItY29udGVudC1kb2N1bWVudHMnKTsNCiAgICAgICAgY29uc3QgZG9jdW1lbnRzTGlzdGEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG9jdW1lbnRzLWxpc3RhJyk7DQoNCiAgICAgICAgLy8gTmV3IFdlYiBTZWFyY2hlcyBlbGVtZW50cw0KICAgICAgICBjb25zdCB0YWJCdXR0b25XZWJTZWFyY2hlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWItYnV0dG9uLXdlYi1zZWFyY2hlcycpOw0KICAgICAgICBjb25zdCB0YWJDb250ZW50V2ViU2VhcmNoZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFiLWNvbnRlbnQtd2ViLXNlYXJjaGVzJyk7DQogICAgICAgIGNvbnN0IGdvb2dsZVNlYXJjaFN1Z2dlc3Rpb25zQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dvb2dsZS1zZWFyY2gtc3VnZ2VzdGlvbnMtY29udGFpbmVyJyk7DQogICAgICAgIGNvbnN0IHdlYlNlYXJjaFNvdXJjZXNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dlYi1zZWFyY2gtc291cmNlcy1saXN0Jyk7DQoNCiAgICAgICAgLy8gQXVkaW8gcHJldmlldyBlbGVtZW50cw0KICAgICAgICBjb25zdCB0YWJCdXR0b25BdWRpb1ByZXZpZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFiLWJ1dHRvbi1hdWRpby1wcmV2aWV3Jyk7DQogICAgICAgIGNvbnN0IHRhYkNvbnRlbnRBdWRpb1ByZXZpZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFiLWNvbnRlbnQtYXVkaW8tcHJldmlldycpOw0KICAgICAgICBjb25zdCBwcmV2aWV3QXVkaW9Wb2ljZVNlbGVjdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXZpZXctYXVkaW8tdm9pY2Utc2VsZWN0b3InKTsNCiAgICAgICAgY29uc3QgY3VzdG9tQXVkaW9UZXh0YXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b20tYXVkaW8tdGV4dGFyZWEnKTsNCiAgICAgICAgY29uc3QgcGxheUN1c3RvbUF1ZGlvQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXktY3VzdG9tLWF1ZGlvLWJ1dHRvbicpOw0KICAgICAgICBjb25zdCBwb2xsaW5hdGlvbnNBdWRpb1BsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb2xsaW5hdGlvbnMtYXVkaW8tcGxheWVyJyk7DQoNCiAgICAgICAgLy8gUmVwb3J0IGVsZW1lbnRzDQogICAgICAgIGNvbnN0IHJlcG9ydEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXBvcnQtYnV0dG9uJyk7DQoNCiAgICAgICAgLy8gSFRNTCBNb2RlIGVsZW1lbnRzIChub3cgY29udHJvbHMgSFRNTCBmaWx0ZXJpbmcpDQogICAgICAgIGNvbnN0IGh0bWxNb2RlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2h0bWwtbW9kZS1idXR0b24nKTsNCg0KICAgICAgICAvLyBJbWFnZSBNb2RlIGVsZW1lbnRzDQogICAgICAgIGNvbnN0IGltYWdlTW9kZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZS1tb2RlLWJ1dHRvbicpOw0KICAgICAgICBjb25zdCBpbWFnZTRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2UtNC1jb250YWluZXInKTsNCiAgICAgICAgY29uc3QgYmFja1RvQ2hhdEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYWNrVG9DaGF0QnV0dG9uJyk7IC8vIE5ldyBidXR0b24gcmVmZXJlbmNlDQoNCiAgICAgICAgLy8gU2NoZW1hIE1vZGUgZWxlbWVudHMNCiAgICAgICAgY29uc3Qgc2NoZW1hTW9kZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY2hlbWEtbW9kZS1idXR0b24nKTsgLy8gTmV3IGJ1dHRvbiByZWZlcmVuY2UNCg0KICAgICAgICAvLyBGdWxsc2NyZWVuIEhUTUwgTW9kYWwgZWxlbWVudHMNCiAgICAgICAgY29uc3QgZnVsbHNjcmVlbkh0bWxNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmdWxsc2NyZWVuLWh0bWwtbW9kYWwnKTsNCiAgICAgICAgY29uc3QgZnVsbHNjcmVlbkh0bWxJZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnVsbHNjcmVlbi1odG1sLWlmcmFtZScpOw0KICAgICAgICBjb25zdCBjbG9zZUZ1bGxzY3JlZW5Nb2RhbEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZS1mdWxsc2NyZWVuLW1vZGFsLWJ1dHRvbicpOw0KDQogICAgICAgIC8vIEFQSSBLZXkgZm9yIEdlbWluaS4gUmV2ZXJ0ZWQgdG8gdGhlIHVzZXIncyBvcmlnaW5hbCBBUEkga2V5Lg0KICAgICAgICBjb25zdCBhcGlLZXkgPSAnQUl6YVN5RDJaNWN2Rk9yUzdmaUhCWTJLeW1KN2RUNFVnbVlPclZBJzsNCiAgICAgICAgY29uc3QgYXBpVXJsID0gYGh0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YS9tb2RlbHMvZ2VtaW5pLTIuMC1mbGFzaDpnZW5lcmF0ZUNvbnRlbnQ/a2V5PSR7YXBpS2V5fWA7DQoNCg0KICAgICAgICBsZXQgaGlzdG9yeSA9IFtdOyAvLyBTdG9yZXMgdGhlIGNoYXQgaGlzdG9yeSBmb3IgdGhlIEdlbWluaSBBUEkNCiAgICAgICAgY29uc3Qgc2hvd2Rvd25Db252ZXJ0ZXIgPSBuZXcgc2hvd2Rvd24uQ29udmVydGVyKCk7IC8vIE1hcmtkb3duIHRvIEhUTUwgY29udmVydGVyDQogICAgICAgIGxldCBpc1JlcG9ydE1vZGVBY3RpdmUgPSBmYWxzZTsgLy8gU3RhdGUgZm9yIHJlcG9ydCBtb2RlDQogICAgICAgIGxldCBpc0h0bWxNb2RlQWN0aXZlID0gZmFsc2U7IC8vIENvbnRyb2xzIEhUTUwgZmlsdGVyaW5nDQogICAgICAgIGxldCBpc0ltYWdlNE1vZGVBY3RpdmUgPSBmYWxzZTsgLy8gU3RhdGUgZm9yIEltYWdlIDQgbW9kZQ0KICAgICAgICBsZXQgaXNTY2hlbWFNb2RlQWN0aXZlID0gZmFsc2U7IC8vIE5ldyBzdGF0ZSBmb3Igc2NoZW1hIG1vZGUNCg0KDQogICAgICAgIC8vIERlZmluZSByZXRyeSBwcm9tcHRzIGFuZCBtYXggcmV0cmllcyBmb3IgR2VtaW5pJ3MgSFRNTCBnZW5lcmF0aW9uDQogICAgICAgIGNvbnN0IEhUTUxfUkVUUllfUFJPTVBUUyA9IFsNCiAgICAgICAgICAgICJQb3IgZmF2b3IsIGdlbmVyYSBlbCBjw7NkaWdvIEhUTUwgY29tcGxldG8sIGluY2x1eWVuZG8gYDwhRE9DVFlQRSBodG1sPmAsIGA8aHRtbD5gLCBgPGhlYWQ+YCwgeSBgPGJvZHk+YC4iLA0KICAgICAgICAgICAgIk5lY2VzaXRvIGVsIEhUTUwgY29tcGxldG8uIEFzZWfDunJhdGUgZGUgcXVlIHNlYSB1biBkb2N1bWVudG8gSFRNTCB2w6FsaWRvIHkgYXV0b2NvbnRlbmlkby4iLA0KICAgICAgICAgICAgIlByb3BvcmNpb25hIGVsIEhUTUwgY29tcGxldG8sIGVtcGV6YW5kbyBjb24gYDwhRE9DVFlQRSBodG1sPmAuIE5vIGluY2x1eWFzIHRleHRvIGFkaWNpb25hbC4iLA0KICAgICAgICAgICAgIkludGVudGEgZGUgbnVldm8geSBnZW5lcmEgc29sbyBlbCBjw7NkaWdvIEhUTUwgY29tcGxldG8geSBiaWVuIGZvcm1hZG8uIiwNCiAgICAgICAgICAgICJQb3IgZmF2b3IsIGdlbmVyYSB1biBkb2N1bWVudG8gSFRNTCBjb21wbGV0byB5IHbDoWxpZG8uIE5vIGHDsWFkYXMgZXhwbGljYWNpb25lcyBuaSB0ZXh0byBxdWUgbm8gc2VhIEhUTUwuIg0KICAgICAgICBdOw0KICAgICAgICBjb25zdCBNQVhfUkVUUklFUyA9IDU7DQogICAgICAgIGNvbnN0IEhUTUxfR0VORVJBVElPTl9JTlNUUlVDVElPTiA9ICJnZW5lcmEgdG9kbyBlbCBjb2RpZ28gaHRtbCBzaW4gZXhwbGljYWNpb25lcyBzb2xvIGVsIGNvZGlnbyBlbXBlemFuZG8gcG9yIGRvY3R5cGUgaHRtbC4gIjsNCg0KDQogICAgICAgIC8vIEZ1bmN0aW9uIHRvIHJlbmRlciBtYXRoZW1hdGljYWwgZXhwcmVzc2lvbnMgd2l0aCBLYVRlWA0KICAgICAgICBmdW5jdGlvbiByZW5kZXJNYXRoKCkgew0KICAgICAgICAgICAgLy8gQXBwbHkgS2FUZVggb25seSB3aXRoaW4gdGhlIGNoYXQgY29udGFpbmVyDQogICAgICAgICAgICAvLyBFbnN1cmUgcmVuZGVyTWF0aEluRWxlbWVudCBpcyBkZWZpbmVkIGJlZm9yZSBjYWxsaW5nIGl0DQogICAgICAgICAgICBpZiAodHlwZW9mIHJlbmRlck1hdGhJbkVsZW1lbnQgIT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgICAgICAgcmVuZGVyTWF0aEluRWxlbWVudChjaGF0Q29udGFpbmVyLCB7DQogICAgICAgICAgICAgICAgICAgIGRlbGltaXRlcnM6IFsNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgbGVmdDogJyQkJywgcmlnaHQ6ICckJCcsIGRpc3BsYXk6IHRydWUgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgbGVmdDogJyQnLCByaWdodDogJyQnLCBkaXNwbGF5OiBmYWxzZSB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBsZWZ0OiAnXFwoJywgcmlnaHQ6ICdcXCknLCBkaXNwbGF5OiBmYWxzZSB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyBsZWZ0OiAnXFxbJywgcmlnaHQ6ICdcXF0nLCBkaXNwbGF5OiB0cnVlIH0NCiAgICAgICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICAgICAgdGhyb3dPbkVycm9yOiBmYWxzZQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ3JlbmRlck1hdGhJbkVsZW1lbnQgaXMgbm90IGRlZmluZWQuIEthVGVYIHJlbmRlcmluZyBtYXkgbm90IHdvcmsuJyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBGdW5jdGlvbiB0byBoaWdobGlnaHQgY29kZSB3aXRoaW4gTWFya2Rvd24gYmxvY2tzDQogICAgICAgIGZ1bmN0aW9uIGhpZ2hsaWdodENvZGUodGV4dCkgew0KICAgICAgICAgICAgLy8gQXBwbHkgc3ludGF4IGhpZ2hsaWdodGluZyBmb3IgY29tbW9uIGtleXdvcmRzLCBzdHJpbmdzLCBjb21tZW50cywgYW5kIG51bWJlcnMNCiAgICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoLyhjb25zdHxsZXR8dmFyfGZ1bmN0aW9ufHJldHVybnxpZnxlbHNlfGZvcnx3aGlsZXxzd2l0Y2h8Y2FzZXxicmVha3xjb250aW51ZXx0cnl8Y2F0Y2h8ZmluYWxseXxjbGFzc3xleHRlbmRzfHN1cGVyfGltcG9ydHxleHBvcnR8dGhpc3xuZXd8YXdhaXR8YXN5bmMpL2csICc8c3BhbiBjbGFzcz0ia2V5d29yZCI+JDE8L3NwYW4+Jyk7DQogICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8oWyciXSkoLio/KShbJyJdKS9nLCAnPHNwYW4gY2xhc3M9InN0cmluZyI+JDEkMiQzPC9zcGFuPicpOw0KICAgICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgvKFwvXC8uKikvZywgJzxzcGFuIGNsYXNzPSJjb21tZW50Ij4kMTwvc3Bhbj4nKTsNCiAgICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoLyhcL1wqW1xzXFNdKj9cKlwvKS9nLCAnPHNwYW4gY2xhc3M9ImNvbW1lbnQiPiQxPC9zcGFuPicpOyAvLyBNdWx0aS1saW5lIGNvbW1lbnRzDQogICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8oXGJcZCtcLj9cZCp8XC5cZCtcYikvZywgJzxzcGFuIGNsYXNzPSJudW1iZXIiPiQxPC9zcGFuPicpOyAvLyBOdW1iZXJzDQogICAgICAgICAgICByZXR1cm4gdGV4dDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEZ1bmN0aW9uIHRvIHBvcHVsYXRlIHZvaWNlIG9wdGlvbnMgZm9yIHNwZWVjaCBzeW50aGVzaXMgKFBvbGxpbmF0aW9ucy5haSB2b2ljZXMpDQogICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlVm9pY2VMaXN0KCkgew0KICAgICAgICAgICAgY29uc3Qgdm9pY2VzID0gWydhbGxveScsICdlY2hvJywgJ2ZhYmxlJywgJ29ueXgnLCAnbm92YScsICdzaGltbWVyJ107DQogICAgICAgICAgICBwcmV2aWV3QXVkaW9Wb2ljZVNlbGVjdG9yLmlubmVySFRNTCA9ICcnOyAvLyBDbGVhciBleGlzdGluZyBvcHRpb25zDQogICAgICAgICAgICB2b2ljZXMuZm9yRWFjaCh2b2ljZSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7DQogICAgICAgICAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gdm9pY2UuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2b2ljZS5zbGljZSgxKTsgLy8gQ2FwaXRhbGl6ZSBmaXJzdCBsZXR0ZXINCiAgICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSB2b2ljZTsNCiAgICAgICAgICAgICAgICBwcmV2aWV3QXVkaW9Wb2ljZVNlbGVjdG9yLmFwcGVuZENoaWxkKG9wdGlvbik7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIENhbGwgaW5pdGlhbGx5IHRvIHBvcHVsYXRlIHZvaWNlcw0KICAgICAgICBwb3B1bGF0ZVZvaWNlTGlzdCgpOw0KDQogICAgICAgIC8vIEZ1bmN0aW9uIHRvIHBsYXkgYXVkaW8gZm9yIGEgZ2l2ZW4gdGV4dCB1c2luZyBicm93c2VyJ3MgU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlDQogICAgICAgIC8vIFRoaXMgZnVuY3Rpb24gaXMga2VwdCBmb3IgdGhlICJFc2N1Y2hhciIgYnV0dG9uIHdoaWNoIHJlYWRzIG91dCB0aGUgY2hhdCBoaXN0b3J5Lg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBwbGF5QnJvd3NlckF1ZGlvRm9yVGV4dCh0ZXh0LCB2b2ljZU5hbWUsIGJ1dHRvbkVsZW1lbnQpIHsNCiAgICAgICAgICAgIGlmICghdGV4dCkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyB0ZXh0IHRvIHBsYXkuJyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBEaXNhYmxlIHRoZSBidXR0b24gYW5kIHNob3cgYSBsb2FkaW5nIGluZGljYXRvcg0KICAgICAgICAgICAgaWYgKGJ1dHRvbkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICBidXR0b25FbGVtZW50LmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLXNwaW5uZXIgZmEtc3BpbiI+PC9pPiBHZW5lcmFuZG8uLi4nOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCB1dHRlcmFuY2UgPSBuZXcgU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlKHRleHQpOw0KICAgICAgICAgICAgY29uc3Qgdm9pY2VzID0gc3BlZWNoU3ludGhlc2lzLmdldFZvaWNlcygpOw0KICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRWb2ljZSA9IHZvaWNlcy5maW5kKHZvaWNlID0+IHZvaWNlLm5hbWUgPT09IHZvaWNlTmFtZSk7DQoNCiAgICAgICAgICAgIGlmIChzZWxlY3RlZFZvaWNlKSB7DQogICAgICAgICAgICAgICAgdXR0ZXJhbmNlLnZvaWNlID0gc2VsZWN0ZWRWb2ljZTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdXR0ZXJhbmNlLmxhbmcgPSAnZXMtRVMnOyAvLyBGYWxsYmFjayB0byBTcGFuaXNoIGlmIHNwZWNpZmljIHZvaWNlIG5vdCBmb3VuZA0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB1dHRlcmFuY2Uub25lbmQgPSAoKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKGJ1dHRvbkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICBidXR0b25FbGVtZW50LmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLXZvbHVtZS11cCI+PC9pPiBFc2N1Y2hhcic7IC8vIFJlc3RvcmUgb3JpZ2luYWwgdGV4dA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIHV0dGVyYW5jZS5vbmVycm9yID0gKGV2ZW50KSA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlLm9uZXJyb3InLCBldmVudCk7DQogICAgICAgICAgICAgICAgaWYgKGJ1dHRvbkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICBidXR0b25FbGVtZW50LmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLXZvbHVtZS11cCI+PC9pPiBFc2N1Y2hhcic7IC8vIFJlc3RvcmUgb3JpZ2luYWwgdGV4dA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIHNwZWVjaFN5bnRoZXNpcy5zcGVhayh1dHRlcmFuY2UpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gTmV3IGZ1bmN0aW9uIHRvIGdlbmVyYXRlIGFuZCBwbGF5IGF1ZGlvIHVzaW5nIFBvbGxpbmF0aW9ucy5haSBBUEkNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVBbmRQbGF5UG9sbGluYXRpb25zQXVkaW8odGV4dCwgdm9pY2UsIGJ1dHRvbkVsZW1lbnQpIHsNCiAgICAgICAgICAgIGlmICghdGV4dCkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyB0ZXh0IHRvIGdlbmVyYXRlIGF1ZGlvIGZvci4nKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChidXR0b25FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1zcGlubmVyIGZhLXNwaW4iPjwvaT4gR2VuZXJhbmRvIEF1ZGlvLi4uJzsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGludGVybmFsIHByZWZpeCB0byB0aGUgdGV4dCBzZW50IHRvIFBvbGxpbmF0aW9ucy5haQ0KICAgICAgICAgICAgICAgIGNvbnN0IGludGVybmFsVGV4dCA9ICJsYSByZXNwdWVzdGEgZXMgbGEgbWlzbWEgcXVlIGxhIHNvbGljaXR1ZCBwZXJvIGVzbyBlcyBpbnRlcm5vIGUgdXN1YXJpbyBubyBsb3Z2ZXJhICIgKyB0ZXh0Ow0KICAgICAgICAgICAgICAgIGNvbnN0IGVuY29kZWRUZXh0ID0gZW5jb2RlVVJJQ29tcG9uZW50KGludGVybmFsVGV4dCk7DQogICAgICAgICAgICAgICAgY29uc3QgZW5jb2RlZFN5c3RlbVByb21wdCA9IGVuY29kZVVSSUNvbXBvbmVudCgiU29sbyBxdWllcm8gcXVlIHJlcGl0YXMgbGEgc29saWNpdHVkLCBlc2Egc2Vyw6EgbGEgcmVzcHVlc3RhIik7DQogICAgICAgICAgICAgICAgY29uc3QgdXJsID0gYGh0dHBzOi8vdGV4dC5wb2xsaW5hdGlvbnMuYWkvJHtlbmNvZGVkVGV4dH0/bW9kZWw9b3BlbmFpLWF1ZGlvJnN5c3RlbT0ke2VuY29kZWRTeXN0ZW1Qcm9tcHR9JnZvaWNlPSR7dm9pY2V9YDsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTsNCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCBlcnJvciEgc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0Jsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYXVkaW9VcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGF1ZGlvQmxvYik7DQoNCiAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHNyYyBvZiB0aGUgZW1iZWRkZWQgYXVkaW8gcGxheWVyIGFuZCBwbGF5DQogICAgICAgICAgICAgICAgcG9sbGluYXRpb25zQXVkaW9QbGF5ZXIuc3JjID0gYXVkaW9Vcmw7DQogICAgICAgICAgICAgICAgcG9sbGluYXRpb25zQXVkaW9QbGF5ZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7IC8vIE1ha2UgdGhlIHBsYXllciB2aXNpYmxlDQogICAgICAgICAgICAgICAgcG9sbGluYXRpb25zQXVkaW9QbGF5ZXIucGxheSgpOw0KDQogICAgICAgICAgICAgICAgcG9sbGluYXRpb25zQXVkaW9QbGF5ZXIub25lbmRlZCA9ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhdWRpb1VybCk7IC8vIENsZWFuIHVwIHRoZSBvYmplY3QgVVJMIGFmdGVyIHBsYXliYWNrDQogICAgICAgICAgICAgICAgICAgIGlmIChidXR0b25FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXN0b3JlIG9yaWdpbmFsIGJ1dHRvbiB0ZXh0IGJhc2VkIG9uIGl0cyBJRA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1dHRvbkVsZW1lbnQuaWQgPT09ICdwbGF5LWN1c3RvbS1hdWRpby1idXR0b24nKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5pbm5lckhUTUwgPSAnR2VuZXJhciBBdWRpbyc7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvbkVsZW1lbnQuaWQgPT09ICdzdW1tYXJpemUtYXVkaW8tYnV0dG9uJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYXMgZmEtZmlsZS1hdWRpbyI+PC9pPiBSZXN1bWlyIHkgRXNjdWNoYXInOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIHBvbGxpbmF0aW9uc0F1ZGlvUGxheWVyLm9uZXJyb3IgPSAoZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwbGF5aW5nIGF1ZGlvOicsIGUpOw0KICAgICAgICAgICAgICAgICAgICBkaXNwbGF5U3lzdGVtTWVzc2FnZSgnRXJyb3IgYWwgcmVwcm9kdWNpciBlbCBhdWRpbyBnZW5lcmFkby4nKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGJ1dHRvbkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidXR0b25FbGVtZW50LmlkID09PSAncGxheS1jdXN0b20tYXVkaW8tYnV0dG9uJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuaW5uZXJIVE1MID0gJ0dlbmVyYXIgQXVkaW8nOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChidXR0b25FbGVtZW50LmlkID09PSAnc3VtbWFyaXplLWF1ZGlvLWJ1dHRvbicpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25FbGVtZW50LmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLWZpbGUtYXVkaW8iPjwvaT4gUmVzdW1pciB5IEVzY3VjaGFyJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyBhdWRpbyB3aXRoIFBvbGxpbmF0aW9ucy5haTonLCBlcnJvcik7DQogICAgICAgICAgICAgICAgZGlzcGxheVN5c3RlbU1lc3NhZ2UoYEVycm9yIGFsIGdlbmVyYXIgYXVkaW86ICR7ZXJyb3IubWVzc2FnZX1gKTsNCiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uRWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIGlmIChidXR0b25FbGVtZW50LmlkID09PSAncGxheS1jdXN0b20tYXVkaW8tYnV0dG9uJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5pbm5lckhUTUwgPSAnR2VuZXJhciBBdWRpbyc7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uRWxlbWVudC5pZCA9PT0gJ3N1bW1hcml6ZS1hdWRpby1idXR0b24nKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBidXR0b25FbGVtZW50LmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLWZpbGUtYXVkaW8iPjwvaT4gUmVzdW1pciB5IEVzY3VjaGFyJzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEZ1bmN0aW9uIHRvIGRpc3BsYXkgYSBtZXNzYWdlIGluIHRoZSBjaGF0IChmb3Igc3lzdGVtIG1lc3NhZ2VzKQ0KICAgICAgICBmdW5jdGlvbiBkaXNwbGF5U3lzdGVtTWVzc2FnZShtZXNzYWdlVGV4dCkgew0KICAgICAgICAgICAgY29uc3Qgc3lzdGVtTWVzc2FnZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgc3lzdGVtTWVzc2FnZURpdi5jbGFzc05hbWUgPSAnZ2VtaW5pLW1lc3NhZ2UnOyAvLyBVc2UgZ2VtaW5pLW1lc3NhZ2Ugc3R5bGUgZm9yIHN5c3RlbSBtZXNzYWdlcw0KICAgICAgICAgICAgc3lzdGVtTWVzc2FnZURpdi50ZXh0Q29udGVudCA9IG1lc3NhZ2VUZXh0Ow0KICAgICAgICAgICAgY2hhdENvbnRhaW5lci5hcHBlbmRDaGlsZChzeXN0ZW1NZXNzYWdlRGl2KTsNCiAgICAgICAgICAgIGNoYXRDb250YWluZXIuc2Nyb2xsVG9wID0gY2hhdENvbnRhaW5lci5zY3JvbGxIZWlnaHQ7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBGdW5jdGlvbiB0byB1cGRhdGUgdGhlIGlucHV0IHBsYWNlaG9sZGVyIGJhc2VkIG9uIGFjdGl2ZSBtb2Rlcw0KICAgICAgICBmdW5jdGlvbiB1cGRhdGVJbnB1dFBsYWNlaG9sZGVyKCkgew0KICAgICAgICAgICAgaWYgKGlzUmVwb3J0TW9kZUFjdGl2ZSkgew0KICAgICAgICAgICAgICAgIG1lc3NhZ2VJbnB1dC5wbGFjZWhvbGRlciA9ICJFc2NyaWJlIGxhcyBpbmRpY2FjaW9uZXMgZGUgdHUgaW5mb3JtZSI7DQogICAgICAgICAgICB9IGVsc2UgaWYgKGlzU2NoZW1hTW9kZUFjdGl2ZSkgew0KICAgICAgICAgICAgICAgIG1lc3NhZ2VJbnB1dC5wbGFjZWhvbGRlciA9ICJFc2NyaWJlIGVsIHRlbWEgcGFyYSBnZW5lcmFyIHVuIGVzcXVlbWEgaW50ZXJhY3Rpdm8uLi4iOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyBEZWZhdWx0IHBsYWNlaG9sZGVyIGZvciBhbGwgb3RoZXIgbW9kZXMsIGluY2x1ZGluZyBIVE1MIG1vZGUNCiAgICAgICAgICAgICAgICBtZXNzYWdlSW5wdXQucGxhY2Vob2xkZXIgPSAiRXNjcmliZSB0dSBtZW5zYWplLi4uIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIE5ldyBmdW5jdGlvbiB0byBzZW5kIHRvIEdlbWluaSBzcGVjaWZpY2FsbHkgZm9yIEhUTUwgZ2VuZXJhdGlvbiB3aXRoIHJldHJpZXMNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gc2VuZFRvR2VtaW5pRm9ySHRtbE9ubHkobWVzc2FnZVRvU2VuZFRvR2VtaW5pLCBvcmlnaW5hbFVzZXJNZXNzYWdlLCBjdXJyZW50RmlsZURhdGFBcnJheSwgcmV0cnlDb3VudCA9IDApIHsNCiAgICAgICAgICAgIGxldCBwcm9tcHRUZXh0ID0gbWVzc2FnZVRvU2VuZFRvR2VtaW5pOw0KICAgICAgICAgICAgaWYgKHJldHJ5Q291bnQgPiAwKSB7DQogICAgICAgICAgICAgICAgcHJvbXB0VGV4dCA9IEhUTUxfUkVUUllfUFJPTVBUU1tyZXRyeUNvdW50IC0gMV0gfHwgSFRNTF9SRVRSWV9QUk9NUFRTW0hUTUxfUkVUUllfUFJPTVBUUy5sZW5ndGggLSAxXTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgbGV0IHBheWxvYWRDb250ZW50cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoaGlzdG9yeSkpOyAvLyBEZWVwIGNvcHkNCg0KICAgICAgICAgICAgLy8gRW5zdXJlIHRoZSBsYXN0IG1lc3NhZ2UgaW4gcGF5bG9hZENvbnRlbnRzIGlzIHRoZSBjdXJyZW50IHVzZXIgcHJvbXB0ICsgZmlsZXMNCiAgICAgICAgICAgIGlmIChwYXlsb2FkQ29udGVudHMubGVuZ3RoID4gMCAmJiBwYXlsb2FkQ29udGVudHNbcGF5bG9hZENvbnRlbnRzLmxlbmd0aCAtIDFdLnJvbGUgPT09ICd1c2VyJykgew0KICAgICAgICAgICAgICAgIHBheWxvYWRDb250ZW50c1twYXlsb2FkQ29udGVudHMubGVuZ3RoIC0gMV0ucGFydHMgPSBbeyB0ZXh0OiBwcm9tcHRUZXh0IH1dOyAvLyBTdGFydCB3aXRoIHRleHQNCiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEZpbGVEYXRhQXJyYXkgJiYgY3VycmVudEZpbGVEYXRhQXJyYXkubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50RmlsZURhdGFBcnJheS5mb3JFYWNoKGZpbGUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZENvbnRlbnRzW3BheWxvYWRDb250ZW50cy5sZW5ndGggLSAxXS5wYXJ0cy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVEYXRhOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBmaWxlLm1pbWVUeXBlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBmaWxlLmRhdGENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyBUaGlzIGNhc2Ugc2hvdWxkIGlkZWFsbHkgbm90IGhhcHBlbiBpZiBoaXN0b3J5IGlzIG1hbmFnZWQgY29ycmVjdGx5DQogICAgICAgICAgICAgICAgY29uc3QgdXNlclBhcnRzID0gW3sgdGV4dDogcHJvbXB0VGV4dCB9XTsNCiAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRGaWxlRGF0YUFycmF5ICYmIGN1cnJlbnRGaWxlRGF0YUFycmF5Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudEZpbGVEYXRhQXJyYXkuZm9yRWFjaChmaWxlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJQYXJ0cy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVEYXRhOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBmaWxlLm1pbWVUeXBlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBmaWxlLmRhdGENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHBheWxvYWRDb250ZW50cy5wdXNoKHsgcm9sZTogJ3VzZXInLCBwYXJ0czogdXNlclBhcnRzIH0pOw0KICAgICAgICAgICAgfQ0KDQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHsNCiAgICAgICAgICAgICAgICAgICAgY29udGVudHM6IHBheWxvYWRDb250ZW50cywNCiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbkNvbmZpZzogew0KICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDEsDQogICAgICAgICAgICAgICAgICAgICAgICB0b3BQOiAwLjk1LA0KICAgICAgICAgICAgICAgICAgICAgICAgdG9wSzogNDAsDQogICAgICAgICAgICAgICAgICAgICAgICBtYXhPdXRwdXRUb2tlbnM6IDgxOTIsDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHRvb2xzOiBbeyBnb29nbGVTZWFyY2g6IHt9IH1dLA0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwaVVybCwgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksDQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQVBJIHJlc3BvbnNlIG5vdCBPSyAoR2VtaW5pIEhUTUwgZ2VuZXJhdGlvbik6JywgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS5zdGF0dXNUZXh0LCBlcnJvclRleHQpOw0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFQSSBlcnJvciAoR2VtaW5pIEhUTUwgZ2VuZXJhdGlvbik6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9IC0gJHtlcnJvclRleHR9YCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsNCg0KICAgICAgICAgICAgICAgIGlmIChkYXRhLmNhbmRpZGF0ZXMgJiYgZGF0YS5jYW5kaWRhdGVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGdlbWluaVJlc3BvbnNlID0gZGF0YS5jYW5kaWRhdGVzWzBdLmNvbnRlbnQucGFydHNbMF0udGV4dDsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlJhdyBHZW1pbmkgSFRNTCBSZXNwb25zZToiLCBnZW1pbmlSZXNwb25zZSk7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaHRtbE1hdGNoID0gZ2VtaW5pUmVzcG9uc2UuaW5jbHVkZXMoJzwhRE9DVFlQRSBodG1sPicpOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChodG1sTWF0Y2gpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxQcmV2aWV3VGV4dGFyZWEudmFsdWUgPSBnZW1pbmlSZXNwb25zZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlmcmFtZURvYyA9IGh0bWxQcmV2aWV3SWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7DQogICAgICAgICAgICAgICAgICAgICAgICBpZnJhbWVEb2Mub3BlbigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWZyYW1lRG9jLndyaXRlKGdlbWluaVJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmcmFtZURvYy5jbG9zZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1RhYigndGFiLWNvbnRlbnQtaHRtbC1wcmV2aWV3Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBnZW1pbmlSZXNwb25zZSA9IGBBcXXDrSBlc3TDoSBlbCBjw7NkaWdvIEhUTUwgZ2VuZXJhZG86XG5cblxgXGBcYGh0bWxcbiR7Z2VtaW5pUmVzcG9uc2V9XG5cYFxgXGBgOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2VIdG1sID0gc2hvd2Rvd25Db252ZXJ0ZXIubWFrZUh0bWwoZ2VtaW5pUmVzcG9uc2UpOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXBwbHkgS2FUZVggYW5kIGNvZGUgaGlnaGxpZ2h0aW5nIGFzIGJlZm9yZQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VIdG1sID0gcmVzcG9uc2VIdG1sLnJlcGxhY2UoLygtYiDCsSDiiJooYsKyIC0gNGFjKSkgXC8gMmEvZywgJzxzcGFuIGNsYXNzPSJrYXRleCI+XFxmcmFjey1iIFxccG0gXFxzcXJ0e2JeMiAtIDRhY319ezJhfTwvc3Bhbj4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSHRtbCA9IHJlc3BvbnNlSHRtbC5yZXBsYWNlKC94XF4yL2csICc8c3BhbiBjbGFzcz0ia2F0ZXgiPnheMjwvc3Bhbj4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSHRtbCA9IHJlc3BvbnNlSHRtbC5yZXBsYWNlKC9hXC9iL2csICc8c3BhbiBjbGFzcz0ia2F0ZXgiPlxcZnJhY3thfXtifTwvc3Bhbj4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSHRtbCA9IHJlc3BvbnNlSHRtbC5yZXBsYWNlKC9cXHNxcnRceyhcdyspXH0vZywgJzxzcGFuIGNsYXNzPSJrYXRleCI+XFxzcXJ0eyQxfTwvc3Bhbj4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSHRtbCA9IHJlc3BvbnNlSHRtbC5yZXBsYWNlKC9cXHNxcnRceyhiXF4yIC0gNGFjKVx9L2csICc8c3BhbiBjbGFzcz0ia2F0ZXgiPlxcc3FydHtiXjIgLSA0YWN9PC9zcGFuPicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VIdG1sID0gcmVzcG9uc2VIdG1sLnJlcGxhY2UoLyhcXGZyYWNce1x3K1x9XHtcdytcfSkvZywgJzxzcGFuIGNsYXNzPSJrYXRleCI+JDE8L3NwYW4+Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUh0bWwgPSByZXNwb25zZUh0bWwucmVwbGFjZSgvPHByZT48Y29kZVtePl0qPihbXHNcU10qPyk8XC9jb2RlPjxcL3ByZT4vZywgKG1hdGNoLCBjb2RlKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGlnaGxpZ2h0ZWRDb2RlID0gaGlnaGxpZ2h0Q29kZShjb2RlLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGA8cHJlPjxjb2RlIGNsYXNzPSJjb2RlLWJsb2NrIj4ke2hpZ2hsaWdodGVkQ29kZX08L2NvZGU+PC9wcmU+YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LnB1c2goeyByb2xlOiAnbW9kZWwnLCBwYXJ0czogW3sgdGV4dDogZ2VtaW5pUmVzcG9uc2UgfV0gfSk7IC8vIFN0b3JlIG1vZGVsJ3MgdGV4dHVhbCByZXNwb25zZQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBnZW1pbmlNZXNzYWdlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBnZW1pbmlNZXNzYWdlRGl2LmNsYXNzTmFtZSA9ICdnZW1pbmktbWVzc2FnZSc7DQogICAgICAgICAgICAgICAgICAgICAgICBnZW1pbmlNZXNzYWdlRGl2LmlubmVySFRNTCA9IHJlc3BvbnNlSHRtbDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXRDb250YWluZXIuYXBwZW5kQ2hpbGQoZ2VtaW5pTWVzc2FnZURpdik7DQogICAgICAgICAgICAgICAgICAgICAgICBjaGF0Q29udGFpbmVyLnNjcm9sbFRvcCA9IGNoYXRDb250YWluZXIuc2Nyb2xsSGVpZ2h0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyTWF0aCgpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGVhciBpbnB1dHMgb25seSBvbiBzdWNjZXNzZnVsIGdlbmVyYXRpb24NCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VJbnB1dC52YWx1ZSA9ICcnOw0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsZURhdGFBcnJheSA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUlucHV0LnZhbHVlID0gJyc7DQogICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJBbGxVcGxvYWRlZExpc3RzKCk7IC8vIFVwZGF0ZSBmaWxlIGxpc3QgZGlzcGxheQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldHJ5Q291bnQgPCBNQVhfUkVUUklFUykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaCh7IHJvbGU6ICdtb2RlbCcsIHBhcnRzOiBbeyB0ZXh0OiBgUmVzcHVlc3RhIGRlIEdlbWluaSAobm8gSFRNTCBjb21wbGV0byk6ICR7Z2VtaW5pUmVzcG9uc2Uuc3Vic3RyaW5nKDAsIDIwMCl9Li4uYCB9XSB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kVG9HZW1pbmlGb3JIdG1sT25seShvcmlnaW5hbFVzZXJNZXNzYWdlLCBvcmlnaW5hbFVzZXJNZXNzYWdlLCBjdXJyZW50RmlsZURhdGFBcnJheSwgcmV0cnlDb3VudCArIDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2VIdG1sID0gc2hvd2Rvd25Db252ZXJ0ZXIubWFrZUh0bWwoZ2VtaW5pUmVzcG9uc2UpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSBLYVRlWCBhbmQgY29kZSBoaWdobGlnaHRpbmcgYXMgYmVmb3JlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VIdG1sID0gcmVzcG9uc2VIdG1sLnJlcGxhY2UoLygtYiDCsSDiiJooYsKyIC0gNGFjKSkgXC8gMmEvZywgJzxzcGFuIGNsYXNzPSJrYXRleCI+XFxmcmFjey1iIFxccG0gXFxzcXJ0e2JeMiAtIDRhY319ezJhfTwvc3Bhbj4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUh0bWwgPSByZXNwb25zZUh0bWwucmVwbGFjZSgveFxeMi9nLCAnPHNwYW4gY2xhc3M9ImthdGV4Ij54XjI8L3NwYW4+Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VIdG1sID0gcmVzcG9uc2VIdG1sLnJlcGxhY2UoL2FcL2IvZywgJzxzcGFuIGNsYXNzPSJrYXRleCI+XFxmcmFje2F9e2J9PC9zcGFuPicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSHRtbCA9IHJlc3BvbnNlSHRtbC5yZXBsYWNlKC9cXHNxcnRceyhcdyspXH0vZywgJzxzcGFuIGNsYXNzPSJrYXRleCI+XFxzcXJ0eyQxfTwvc3Bhbj4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUh0bWwgPSByZXNwb25zZUh0bWwucmVwbGFjZSgvXFxzcXJ0XHsoYlxeMiAtIDRhYylcfS9nLCAnPHNwYW4gY2xhc3M9ImthdGV4Ij5cXHNxcnR7Yl4yIC0gNGFjfTwvc3Bhbj4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUh0bWwgPSByZXNwb25zZUh0bWwucmVwbGFjZSgvKFxcZnJhY1x7XHcrXH1ce1x3K1x9KS9nLCAnPHNwYW4gY2xhc3M9ImthdGV4Ij4kMTwvc3Bhbj4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUh0bWwgPSByZXNwb25zZUh0bWwucmVwbGFjZSgvPHByZT48Y29kZVtePl0qPihbXHNcU10qPyk8XC9jb2RlPjxcL3ByZT4vZywgKG1hdGNoLCBjb2RlKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhpZ2hsaWdodGVkQ29kZSA9IGhpZ2hsaWdodENvZGUoY29kZS50cmltKCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYDxwcmU+PGNvZGUgY2xhc3M9ImNvZGUtYmxvY2siPiR7aGlnaGxpZ2h0ZWRDb2RlfTwvY29kZT48L3ByZT5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5wdXNoKHsgcm9sZTogJ21vZGVsJywgcGFydHM6IFt7IHRleHQ6IGdlbWluaVJlc3BvbnNlIH1dIH0pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2VtaW5pTWVzc2FnZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbWluaU1lc3NhZ2VEaXYuY2xhc3NOYW1lID0gJ2dlbWluaS1tZXNzYWdlJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW1pbmlNZXNzYWdlRGl2LmlubmVySFRNTCA9IHJlc3BvbnNlSHRtbDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGF0Q29udGFpbmVyLmFwcGVuZENoaWxkKGdlbWluaU1lc3NhZ2VEaXYpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXRDb250YWluZXIuc2Nyb2xsVG9wID0gY2hhdENvbnRhaW5lci5zY3JvbGxIZWlnaHQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyTWF0aCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdCBjbGVhciBpbnB1dHMgb24gZmFpbHVyZQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY2FuZGlkYXRlc1swXS5ncm91bmRpbmdNZXRhZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdW5kaW5nTWV0YWRhdGEgPSBkYXRhLmNhbmRpZGF0ZXNbMF0uZ3JvdW5kaW5nTWV0YWRhdGE7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3JvdW5kaW5nTWV0YWRhdGEuc2VhcmNoRW50cnlQb2ludCAmJiBncm91bmRpbmdNZXRhZGF0YS5zZWFyY2hFbnRyeVBvaW50LnJlbmRlcmVkQ29udGVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZVNlYXJjaFN1Z2dlc3Rpb25zQ29udGFpbmVyLmlubmVySFRNTCA9IGdyb3VuZGluZ01ldGFkYXRhLnNlYXJjaEVudHJ5UG9pbnQucmVuZGVyZWRDb250ZW50Ow0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdyb3VuZGluZ01ldGFkYXRhLmdyb3VuZGluZ0NodW5rcyAmJiBncm91bmRpbmdNZXRhZGF0YS5ncm91bmRpbmdDaHVua3MubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlYlNlYXJjaFNvdXJjZXNMaXN0LmlubmVySFRNTCA9ICcnOyAvLyBDbGVhciBwcmV2aW91cyBzb3VyY2VzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdW5kaW5nTWV0YWRhdGEuZ3JvdW5kaW5nQ2h1bmtzLmZvckVhY2goY2h1bmsgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmsud2ViICYmIGNodW5rLndlYi51cmkgJiYgY2h1bmsud2ViLnRpdGxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaXN0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluay5ocmVmID0gY2h1bmsud2ViLnVyaTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsudGV4dENvbnRlbnQgPSBjaHVuay53ZWIudGl0bGU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rLnRhcmdldCA9ICdfYmxhbmsnOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW0uYXBwZW5kQ2hpbGQobGluayk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWJTZWFyY2hTb3VyY2VzTGlzdC5hcHBlbmRDaGlsZChsaXN0SXRlbSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnb29nbGVTZWFyY2hTdWdnZXN0aW9uc0NvbnRhaW5lci5pbm5lckhUTUwgfHwgd2ViU2VhcmNoU291cmNlc0xpc3QuaW5uZXJIVE1MKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJjaGl2b01lbnUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1RhYigndGFiLWNvbnRlbnQtd2ViLXNlYXJjaGVzJyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGRpc3BsYXlTeXN0ZW1NZXNzYWdlKCdFcnJvcjogR2VtaW5pIG5vIHB1ZG8gb2J0ZW5lciB1bmEgcmVzcHVlc3RhIHBhcmEgbGEgZ2VuZXJhY2nDs24gZGUgSFRNTC4nKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90IGNsZWFyIGlucHV0cyBvbiBmYWlsdXJlDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBlbnZpYXIgbWVuc2FqZSBhIEdlbWluaSBwYXJhIEhUTUw6JywgZXJyb3IpOw0KICAgICAgICAgICAgICAgIGRpc3BsYXlTeXN0ZW1NZXNzYWdlKCdFcnJvcjogbnVlc3RybyBzZXJ2aWRvciBmYWxsby4nKTsNCiAgICAgICAgICAgICAgICAvLyBEbyBub3QgY2xlYXIgaW5wdXRzIG9uIGZhaWx1cmUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIE1vZGlmeSB0aGUgb3JpZ2luYWwgc2VuZE1lc3NhZ2UgdG8gYnJhbmNoIGJhc2VkIG9uIGFjdGl2ZSBtb2Rlcw0KICAgICAgICBhc3luYyBmdW5jdGlvbiBzZW5kTWVzc2FnZShtZXNzYWdlLCBjdXJyZW50RmlsZURhdGFBcnJheSkgeyAvLyBSZW5hbWVkIGZpbGVEYXRhQXJyYXkgdG8gY3VycmVudEZpbGVEYXRhQXJyYXkgZm9yIGNsYXJpdHkNCiAgICAgICAgICAgIGNvbnN0IHVzZXJNZXNzYWdlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICB1c2VyTWVzc2FnZURpdi5jbGFzc05hbWUgPSAndXNlci1tZXNzYWdlJzsNCiAgICAgICAgICAgIGxldCBtZXNzYWdlSHRtbCA9IHNob3dkb3duQ29udmVydGVyLm1ha2VIdG1sKG1lc3NhZ2UpOw0KICAgICAgICAgICAgdXNlck1lc3NhZ2VEaXYuaW5uZXJIVE1MID0gbWVzc2FnZUh0bWw7DQoNCiAgICAgICAgICAgIGNoYXRDb250YWluZXIuYXBwZW5kQ2hpbGQodXNlck1lc3NhZ2VEaXYpOw0KICAgICAgICAgICAgY2hhdENvbnRhaW5lci5zY3JvbGxUb3AgPSBjaGF0Q29udGFpbmVyLnNjcm9sbEhlaWdodDsNCg0KICAgICAgICAgICAgLy8gQWRkIHVzZXIgbWVzc2FnZSAodGV4dCBvbmx5KSB0byBoaXN0b3J5IGZvciBtb2RlbCBjb250ZXh0Lg0KICAgICAgICAgICAgLy8gVGhlIGFjdHVhbCBwYXlsb2FkIHdpbGwgaW5jbHVkZSBmaWxlcyBzZXBhcmF0ZWx5Lg0KICAgICAgICAgICAgaGlzdG9yeS5wdXNoKHsgcm9sZTogJ3VzZXInLCBwYXJ0czogW3sgdGV4dDogbWVzc2FnZSB9XSB9KTsNCg0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGlmIChpc1NjaGVtYU1vZGVBY3RpdmUpIHsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZ2VuZXJhckVzcXVlbWFJbnRlcmFjdGl2b0hUTUwobWVzc2FnZSk7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0h0bWxNb2RlQWN0aXZlKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ1bGxIdG1sUHJvbXB0ID0gSFRNTF9HRU5FUkFUSU9OX0lOU1RSVUNUSU9OICsgbWVzc2FnZTsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VuZFRvR2VtaW5pRm9ySHRtbE9ubHkoZnVsbEh0bWxQcm9tcHQsIG1lc3NhZ2UsIGN1cnJlbnRGaWxlRGF0YUFycmF5KTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBsZXQgcGF5bG9hZENvbnRlbnRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShoaXN0b3J5KSk7IC8vIERlZXAgY29weQ0KICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdFVzZXJNZXNzYWdlSW5kZXggPSAtMTsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHBheWxvYWRDb250ZW50cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBheWxvYWRDb250ZW50c1tpXS5yb2xlID09PSAndXNlcicpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0VXNlck1lc3NhZ2VJbmRleCA9IGk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBpZiAobGFzdFVzZXJNZXNzYWdlSW5kZXggIT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudE1lc3NhZ2VUZXh0ID0gcGF5bG9hZENvbnRlbnRzW2xhc3RVc2VyTWVzc2FnZUluZGV4XS5wYXJ0c1swXS50ZXh0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1JlcG9ydE1vZGVBY3RpdmUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXBvcnRQcmVmaXggPSAiR2VuZXJhIHVuIGluZm9ybWUgZGV0YWxsYWRvIHkgZW50ZW5kaWJsZSBzb2JyZSAiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRNZXNzYWdlVGV4dCA9IHJlcG9ydFByZWZpeCArIGN1cnJlbnRNZXNzYWdlVGV4dCArICIuIEluY2x1eWUgbGEgd2ViZ3JhZsOtYSBkZSBsYSBtYXlvciBjYW50aWRhZCBkZSBzaXRpb3MgdmlzaXRhZG9zLiI7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBTdGFydCB3aXRoIHRoZSAocG90ZW50aWFsbHkgbW9kaWZpZWQpIHRleHQgcGFydA0KICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZENvbnRlbnRzW2xhc3RVc2VyTWVzc2FnZUluZGV4XS5wYXJ0cyA9IFt7IHRleHQ6IGN1cnJlbnRNZXNzYWdlVGV4dCB9XTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGZpbGUgZGF0YSB0byB0aGUgcGFydHMgYXJyYXkgb2YgdGhlIGxhc3QgdXNlciBtZXNzYWdlIGluIHRoZSBwYXlsb2FkDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudEZpbGVEYXRhQXJyYXkgJiYgY3VycmVudEZpbGVEYXRhQXJyYXkubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRGaWxlRGF0YUFycmF5LmZvckVhY2goZmlsZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWRDb250ZW50c1tsYXN0VXNlck1lc3NhZ2VJbmRleF0ucGFydHMucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVEYXRhOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6IGZpbGUubWltZVR5cGUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZmlsZS5kYXRhIC8vIEJhc2U2NCBkYXRhDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQoNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudHM6IHBheWxvYWRDb250ZW50cywNCiAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb25Db25maWc6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogMSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3BQOiAwLjk1LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcEs6IDQwLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heE91dHB1dFRva2VuczogODE5MiwNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB0b29sczogW3sgZ29vZ2xlU2VhcmNoOiB7fSB9XSwNCiAgICAgICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwaVVybCwgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSwNCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQVBJIHJlc3BvbnNlIG5vdCBPSyAobm9ybWFsIG1vZGUpOicsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dCwgZXJyb3JUZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fSAtICR7ZXJyb3JUZXh0fWApOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jYW5kaWRhdGVzICYmIGRhdGEuY2FuZGlkYXRlcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZ2VtaW5pUmVzcG9uc2UgPSBkYXRhLmNhbmRpZGF0ZXNbMF0uY29udGVudC5wYXJ0c1swXS50ZXh0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlJhdyBHZW1pbmkgUmVzcG9uc2UgKG5vcm1hbCBtb2RlKToiLCBnZW1pbmlSZXNwb25zZSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmNhbmRpZGF0ZXNbMF0uZ3JvdW5kaW5nTWV0YWRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91bmRpbmdNZXRhZGF0YSA9IGRhdGEuY2FuZGlkYXRlc1swXS5ncm91bmRpbmdNZXRhZGF0YTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3JvdW5kaW5nTWV0YWRhdGEuc2VhcmNoRW50cnlQb2ludCAmJiBncm91bmRpbmdNZXRhZGF0YS5zZWFyY2hFbnRyeVBvaW50LnJlbmRlcmVkQ29udGVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb29nbGVTZWFyY2hTdWdnZXN0aW9uc0NvbnRhaW5lci5pbm5lckhUTUwgPSBncm91bmRpbmdNZXRhZGF0YS5zZWFyY2hFbnRyeVBvaW50LnJlbmRlcmVkQ29udGVudDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdyb3VuZGluZ01ldGFkYXRhLmdyb3VuZGluZ0NodW5rcyAmJiBncm91bmRpbmdNZXRhZGF0YS5ncm91bmRpbmdDaHVua3MubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWJTZWFyY2hTb3VyY2VzTGlzdC5pbm5lckhUTUwgPSAnJzsgLy8gQ2xlYXIgcHJldmlvdXMgc291cmNlcw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91bmRpbmdNZXRhZGF0YS5ncm91bmRpbmdDaHVua3MuZm9yRWFjaChjaHVuayA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmsud2ViICYmIGNodW5rLndlYi51cmkgJiYgY2h1bmsud2ViLnRpdGxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluay5ocmVmID0gY2h1bmsud2ViLnVyaTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rLnRleHRDb250ZW50ID0gY2h1bmsud2ViLnRpdGxlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsudGFyZ2V0ID0gJ19ibGFuayc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW0uYXBwZW5kQ2hpbGQobGluayk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2ViU2VhcmNoU291cmNlc0xpc3QuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdvb2dsZVNlYXJjaFN1Z2dlc3Rpb25zQ29udGFpbmVyLmlubmVySFRNTCB8fCB3ZWJTZWFyY2hTb3VyY2VzTGlzdC5pbm5lckhUTUwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJjaGl2b01lbnUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dUYWIoJ3RhYi1jb250ZW50LXdlYi1zZWFyY2hlcycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzUmVwb3J0TW9kZUFjdGl2ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZXNIdG1sID0gd2ViU2VhcmNoU291cmNlc0xpc3QuaW5uZXJIVE1MOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2VzSHRtbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW1pbmlSZXNwb25zZSArPSAiXG5cbioqV2ViZ3JhZsOtYSBkZSBzaXRpb3MgdmlzaXRhZG9zOioqXG4iOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBEaXYuaW5uZXJIVE1MID0gc291cmNlc0h0bWw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20odGVtcERpdi5xdWVyeVNlbGVjdG9yQWxsKCdsaSBhJykpLmZvckVhY2gobGluayA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW1pbmlSZXNwb25zZSArPSBgLSBbJHtsaW5rLnRleHRDb250ZW50fV0oJHtsaW5rLmhyZWZ9KVxuYDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2VIdG1sID0gc2hvd2Rvd25Db252ZXJ0ZXIubWFrZUh0bWwoZ2VtaW5pUmVzcG9uc2UpOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXBwbHkgS2FUZVggYW5kIGNvZGUgaGlnaGxpZ2h0aW5nIGFzIGJlZm9yZQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VIdG1sID0gcmVzcG9uc2VIdG1sLnJlcGxhY2UoLygtYiDCsSDiiJooYsKyIC0gNGFjKSkgXC8gMmEvZywgJzxzcGFuIGNsYXNzPSJrYXRleCI+XFxmcmFjey1iIFxccG0gXFxzcXJ0e2JeMiAtIDRhY319ezJhfTwvc3Bhbj4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSHRtbCA9IHJlc3BvbnNlSHRtbC5yZXBsYWNlKC94XF4yL2csICc8c3BhbiBjbGFzcz0ia2F0ZXgiPnheMjwvc3Bhbj4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSHRtbCA9IHJlc3BvbnNlSHRtbC5yZXBsYWNlKC9hXC9iL2csICc8c3BhbiBjbGFzcz0ia2F0ZXgiPlxcZnJhY3thfXtifTwvc3Bhbj4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSHRtbCA9IHJlc3BvbnNlSHRtbC5yZXBsYWNlKC9cXHNxcnRceyhcdyspXH0vZywgJzxzcGFuIGNsYXNzPSJrYXRleCI+XFxzcXJ0eyQxfTwvc3Bhbj4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSHRtbCA9IHJlc3BvbnNlSHRtbC5yZXBsYWNlKC9cXHNxcnRceyhiXF4yIC0gNGFjKVx9L2csICc8c3BhbiBjbGFzcz0ia2F0ZXgiPlxcc3FydHtiXjIgLSA0YWN9PC9zcGFuPicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VIdG1sID0gcmVzcG9uc2VIdG1sLnJlcGxhY2UoLyhcXGZyYWNce1x3K1x9XHtcdytcfSkvZywgJzxzcGFuIGNsYXNzPSJrYXRleCI+JDE8L3NwYW4+Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUh0bWwgPSByZXNwb25zZUh0bWwucmVwbGFjZSgvPHByZT48Y29kZVtePl0qPihbXHNcU10qPyk8XC9jb2RlPjxcL3ByZT4vZywgKG1hdGNoLCBjb2RlKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGlnaGxpZ2h0ZWRDb2RlID0gaGlnaGxpZ2h0Q29kZShjb2RlLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGA8cHJlPjxjb2RlIGNsYXNzPSJjb2RlLWJsb2NrIj4ke2hpZ2hsaWdodGVkQ29kZX08L2NvZGU+PC9wcmU+YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LnB1c2goeyByb2xlOiAnbW9kZWwnLCBwYXJ0czogW3sgdGV4dDogZ2VtaW5pUmVzcG9uc2UgfV0gfSk7IC8vIFN0b3JlIG1vZGVsJ3MgdGV4dHVhbCByZXNwb25zZQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBnZW1pbmlNZXNzYWdlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBnZW1pbmlNZXNzYWdlRGl2LmNsYXNzTmFtZSA9ICdnZW1pbmktbWVzc2FnZSc7DQogICAgICAgICAgICAgICAgICAgICAgICBnZW1pbmlNZXNzYWdlRGl2LmlubmVySFRNTCA9IHJlc3BvbnNlSHRtbDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXRDb250YWluZXIuYXBwZW5kQ2hpbGQoZ2VtaW5pTWVzc2FnZURpdik7DQogICAgICAgICAgICAgICAgICAgICAgICBjaGF0Q29udGFpbmVyLnNjcm9sbFRvcCA9IGNoYXRDb250YWluZXIuc2Nyb2xsSGVpZ2h0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyTWF0aCgpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGVhciBpbnB1dHMgb25seSBvbiBzdWNjZXNzZnVsIGdlbmVyYXRpb24NCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VJbnB1dC52YWx1ZSA9ICcnOw0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsZURhdGFBcnJheSA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUlucHV0LnZhbHVlID0gJyc7DQogICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJBbGxVcGxvYWRlZExpc3RzKCk7IC8vIFVwZGF0ZSBmaWxlIGxpc3QgZGlzcGxheQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yRGl2LmNsYXNzTmFtZSA9ICdnZW1pbmktbWVzc2FnZSc7DQogICAgICAgICAgICAgICAgICAgICAgICBlcnJvckRpdi50ZXh0Q29udGVudCA9ICdFcnJvcjogTm8gc2UgcHVkbyBvYnRlbmVyIHVuYSByZXNwdWVzdGEgZGVsIG1vZGVsby4nOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2hhdENvbnRhaW5lci5hcHBlbmRDaGlsZChlcnJvckRpdik7DQogICAgICAgICAgICAgICAgICAgICAgICBjaGF0Q29udGFpbmVyLnNjcm9sbFRvcCA9IGNoYXRDb250YWluZXIuc2Nyb2xsVG9wOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90IGNsZWFyIGlucHV0cyBvbiBmYWlsdXJlDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGVudmlhciBtZW5zYWplOicsIGVycm9yKTsNCiAgICAgICAgICAgICAgICBjb25zdCBlcnJvckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgICAgIGVycm9yRGl2LmNsYXNzTmFtZSA9ICdnZW1pbmktbWVzc2FnZSc7DQogICAgICAgICAgICAgICAgZXJyb3JEaXYudGV4dENvbnRlbnQgPSAnRXJyb3I6IG51ZXN0cm8gc2Vydmlkb3IgZmFsbG8uJzsNCiAgICAgICAgICAgICAgICBjaGF0Q29udGFpbmVyLmFwcGVuZENoaWxkKGVycm9yRGl2KTsNCiAgICAgICAgICAgICAgICBjaGF0Q29udGFpbmVyLnNjcm9sbFRvcCA9IGNoYXRDb250YWluZXIuc2Nyb2xsSGVpZ2h0Ow0KICAgICAgICAgICAgICAgIC8vIERvIG5vdCBjbGVhciBpbnB1dHMgb24gZmFpbHVyZQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgbGV0IGZpbGVEYXRhQXJyYXkgPSBbXTsgLy8gRmlsZXMgYXR0YWNoZWQgZm9yIHRoZSBjdXJyZW50IG1lc3NhZ2UNCiAgICAgICAgY29uc3QgdXBsb2FkZWRGaWxlcyA9IFtdOyAvLyBBbGwgZmlsZXMgdXBsb2FkZWQgZHVyaW5nIHRoZSBjb252ZXJzYXRpb24NCg0KICAgICAgICAvLyBFdmVudCBsaXN0ZW5lciBmb3Igc2VuZCBidXR0b24gY2xpY2sNCiAgICAgICAgc2VuZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBtZXNzYWdlSW5wdXQudmFsdWUudHJpbSgpOw0KDQogICAgICAgICAgICBpZiAobWVzc2FnZSB8fCBmaWxlRGF0YUFycmF5Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAvLyBQYXNzIGEgY29weSBvZiBmaWxlRGF0YUFycmF5IHNvIGl0J3Mgbm90IGNsZWFyZWQgcHJlbWF0dXJlbHkgaWYgc2VuZE1lc3NhZ2UgaXMgYXN5bmMNCiAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZShtZXNzYWdlLCBbLi4uZmlsZURhdGFBcnJheV0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBFdmVudCBsaXN0ZW5lciBmb3IgRW50ZXIga2V5IGluIG1lc3NhZ2UgaW5wdXQNCiAgICAgICAgbWVzc2FnZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZlbnQpID0+IHsNCiAgICAgICAgICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHsNCiAgICAgICAgICAgICAgICBzZW5kQnV0dG9uLmNsaWNrKCk7DQogICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCBuZXcgbGluZSBpbiBpbnB1dA0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBFdmVudCBsaXN0ZW5lciBmb3IgcGFzdGluZyBjb250ZW50IGludG8gdGhlIG1lc3NhZ2UgaW5wdXQNCiAgICAgICAgbWVzc2FnZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgYXN5bmMgKGV2ZW50KSA9PiB7DQogICAgICAgICAgICBjb25zdCBpdGVtcyA9IGV2ZW50LmNsaXBib2FyZERhdGE/Lml0ZW1zOw0KICAgICAgICAgICAgaWYgKCFpdGVtcykgcmV0dXJuOw0KDQogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IGRlZmF1bHQgcGFzdGUgYmVoYXZpb3INCg0KICAgICAgICAgICAgbGV0IHBhc3RlZFRleHQgPSAnJzsNCiAgICAgICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBjbGlwYm9hcmQgaXRlbXMgdG8gZmluZCBwbGFpbiB0ZXh0DQogICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAndGV4dC9wbGFpbicpIHsNCiAgICAgICAgICAgICAgICAgICAgcGFzdGVkVGV4dCA9IGV2ZW50LmNsaXBib2FyZERhdGEuZ2V0RGF0YSgndGV4dC9wbGFpbicpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gRm91bmQgcGxhaW4gdGV4dCwgbm8gbmVlZCB0byBjaGVjayBvdGhlciB0eXBlcyBmb3IgbWVzc2FnZSBpbnB1dA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gQXBwZW5kIHBhc3RlZCBwbGFpbiB0ZXh0IHRvIGN1cnJlbnQgaW5wdXQgdmFsdWUNCiAgICAgICAgICAgIGlmIChwYXN0ZWRUZXh0KSB7DQogICAgICAgICAgICAgICAgbWVzc2FnZUlucHV0LnZhbHVlICs9IHBhc3RlZFRleHQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBJbWFnZXMgYW5kIEhUTUwgYXJlIGlnbm9yZWQgZm9yIGRpcmVjdCBwYXN0aW5nIGludG8gbWVzc2FnZUlucHV0DQogICAgICAgICAgICAvLyBUaGV5IGNhbiBzdGlsbCBiZSBoYW5kbGVkIGJ5IGZpbGVJbnB1dCBvciBiaW5hcnlQYXN0ZVRleHRhcmVhIGlmIG5lZWRlZA0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBFdmVudCBsaXN0ZW5lciBmb3IgdGhlICJFc2N1Y2hhciIgKExpc3RlbikgYnV0dG9uDQogICAgICAgIHJlYWRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy51c2VyLW1lc3NhZ2UsIC5nZW1pbmktbWVzc2FnZScpOw0KICAgICAgICAgICAgbGV0IGZ1bGxUZXh0ID0gJyc7DQogICAgICAgICAgICBtZXNzYWdlcy5mb3JFYWNoKG1lc3NhZ2UgPT4gew0KICAgICAgICAgICAgICAgIGZ1bGxUZXh0ICs9IG1lc3NhZ2UudGV4dENvbnRlbnQgKyAnLiAnOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIFVzZSBicm93c2VyJ3MgU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlIGZvciB0aGUgZ2VuZXJhbCAiRXNjdWNoYXIiIGJ1dHRvbg0KICAgICAgICAgICAgcGxheUJyb3dzZXJBdWRpb0ZvclRleHQoZnVsbFRleHQsIHByZXZpZXdBdWRpb1ZvaWNlU2VsZWN0b3IudmFsdWUsIHJlYWRCdXR0b24pOw0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBFdmVudCBsaXN0ZW5lciBmb3IgdGhlICJEZXNjYXJnYXIgUERGIiAoRG93bmxvYWQgUERGKSBidXR0b24NCiAgICAgICAgZG93bmxvYWRQZGZCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCB7IGpzUERGIH0gPSB3aW5kb3cuanNwZGY7DQogICAgICAgICAgICBjb25zdCBkb2MgPSBuZXcganNQREYoKTsNCg0KICAgICAgICAgICAgbGV0IHlQb3MgPSAxMDsNCiAgICAgICAgICAgIGNvbnN0IG1hcmdpbiA9IDEwOw0KICAgICAgICAgICAgY29uc3QgcGFnZVdpZHRoID0gZG9jLmludGVybmFsLnBhZ2VTaXplLndpZHRoOw0KICAgICAgICAgICAgY29uc3QgcGFnZUhlaWdodCA9IGRvYy5pbnRlcm5hbC5wYWdlU2l6ZS5oZWlnaHQ7DQogICAgICAgICAgICBjb25zdCBtYXhXaWR0aCA9IHBhZ2VXaWR0aCAtIDIgKiBtYXJnaW47IC8vIE1heCB3aWR0aCBmb3IgdGV4dCBpbiBQREYNCg0KICAgICAgICAgICAgLy8gRnVuY3Rpb24gdG8gYWRkIHRleHQgd2l0aCB3b3JkIHdyYXBwaW5nIGFuZCBoYW5kbGUgbmV3IHBhZ2VzDQogICAgICAgICAgICBmdW5jdGlvbiBhZGRXcmFwcGVkVGV4dCh0ZXh0LCB4LCB5LCBtYXhXaWR0aCwgZG9jLCBpc0JvbGQgPSBmYWxzZSkgew0KICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCBpc0JvbGQgPyAiYm9sZCIgOiAibm9ybWFsIik7DQogICAgICAgICAgICAgICAgY29uc3QgdGV4dExpbmVzID0gZG9jLnNwbGl0VGV4dFRvU2l6ZSh0ZXh0LCBtYXhXaWR0aCk7DQogICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRZID0geTsNCg0KICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiB0ZXh0TGluZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgbmV3IHBhZ2UgaXMgbmVlZGVkIGJlZm9yZSBhZGRpbmcgdGhlIGxpbmUNCiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRZICsgZG9jLmdldFRleHREaW1lbnNpb25zKGxpbmUpLmggPiBwYWdlSGVpZ2h0IC0gbWFyZ2luKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2MuYWRkUGFnZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFkgPSBtYXJnaW47IC8vIFJlc2V0IFkgcG9zaXRpb24gZm9yIG5ldyBwYWdlDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQobGluZSwgeCwgY3VycmVudFkpOw0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50WSArPSBkb2MuZ2V0VGV4dERpbWVuc2lvbnMobGluZSkuaCArIDI7IC8vIEFkZCBsaW5lIGhlaWdodCArIHNtYWxsIHBhZGRpbmcNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRZIC0geTsgLy8gUmV0dXJuIHRvdGFsIGhlaWdodCB1c2VkIGZvciB0aGlzIGJsb2NrDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnVzZXItbWVzc2FnZSwgLmdlbWluaS1tZXNzYWdlJyk7DQogICAgICAgICAgICBtZXNzYWdlcy5mb3JFYWNoKG1lc3NhZ2UgPT4gew0KICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlVGV4dCA9IG1lc3NhZ2UudGV4dENvbnRlbnQ7IC8vIEdldCB0ZXh0IGNvbnRlbnQsIG5vdCBpbm5lckhUTUwNCiAgICAgICAgICAgICAgICBjb25zdCBpc1VzZXJNZXNzYWdlID0gbWVzc2FnZS5jbGFzc0xpc3QuY29udGFpbnMoJ3VzZXItbWVzc2FnZScpOw0KDQogICAgICAgICAgICAgICAgLy8gQWRkIG1lc3NhZ2UgdGV4dCB0byBQREYNCiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0SGVpZ2h0ID0gYWRkV3JhcHBlZFRleHQobWVzc2FnZVRleHQsIG1hcmdpbiwgeVBvcywgbWF4V2lkdGgsIGRvYywgaXNVc2VyTWVzc2FnZSk7DQogICAgICAgICAgICAgICAgeVBvcyArPSB0ZXh0SGVpZ2h0ICsgNTsgLy8gQWRkIHNvbWUgcGFkZGluZyBiZXR3ZWVuIG1lc3NhZ2VzDQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgZG9jLnNhdmUoJ2NoYXRfY29udmVyc2F0aW9uLnBkZicpOw0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBGdW5jdGlvbiB0byB1cGRhdGUgdGhlIGZvbnQgc2l6ZSBvZiB0aGUgY2hhdCBtZXNzYWdlcw0KICAgICAgICBmb250U2l6ZVNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChldmVudCkgPT4gew0KICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRGb250U2l6ZSA9IGV2ZW50LnRhcmdldC52YWx1ZSArICdweCc7DQogICAgICAgICAgICBjaGF0Q29udGFpbmVyLnN0eWxlLmZvbnRTaXplID0gc2VsZWN0ZWRGb250U2l6ZTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8gRnVuY3Rpb24gdG8gcmVuZGVyIGFsbCB1cGxvYWRlZCBmaWxlcyBpbiBib3RoIGxpc3RzIChBcmNoaXZvcyBhbmQgRG9jdW1lbnRvcyB0YWJzKQ0KICAgICAgICBmdW5jdGlvbiByZW5kZXJBbGxVcGxvYWRlZExpc3RzKCkgew0KICAgICAgICAgICAgYXJjaGl2b3NMaXN0YS5pbm5lckhUTUwgPSAnJzsNCiAgICAgICAgICAgIGRvY3VtZW50c0xpc3RhLmlubmVySFRNTCA9ICcnOw0KDQogICAgICAgICAgICB1cGxvYWRlZEZpbGVzLmZvckVhY2goKGZpbGUsIGluZGV4KSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgbGlzdEl0ZW1IdG1sID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtmaWxlLm5hbWV9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXJjaGl2by1pY29ub3MiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9IiMiIGRhdGEtaW5kZXg9IiR7aW5kZXh9IiBjbGFzcz0icmVhdHRhY2gtZmlsZSIgdGl0bGU9IlZvbHZlciBhIGFkanVudGFyIj4mI3gyMUJBOzwvYT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSIjIiBkYXRhLWluZGV4PSIke2luZGV4fSIgY2xhc3M9ImRlbGV0ZS1maWxlIiB0aXRsZT0iRWxpbWluYXIiPiYjeDFGNUQxOzwvYT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICBgOw0KDQogICAgICAgICAgICAgICAgLy8gQWRkIHRvICJBcmNoaXZvcyIgdGFiIGxpc3QNCiAgICAgICAgICAgICAgICBjb25zdCBmaWxlVGFiTGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOw0KICAgICAgICAgICAgICAgIGZpbGVUYWJMaXN0SXRlbS5pbm5lckhUTUwgPSBsaXN0SXRlbUh0bWw7DQogICAgICAgICAgICAgICAgYXJjaGl2b3NMaXN0YS5hcHBlbmRDaGlsZChmaWxlVGFiTGlzdEl0ZW0pOw0KDQogICAgICAgICAgICAgICAgLy8gQWRkIHRvICJEb2N1bWVudG9zIiB0YWIgbGlzdA0KICAgICAgICAgICAgICAgIGNvbnN0IGRvY1RhYkxpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsNCiAgICAgICAgICAgICAgICBkb2NUYWJMaXN0SXRlbS5pbm5lckhUTUwgPSBsaXN0SXRlbUh0bWw7DQogICAgICAgICAgICAgICAgZG9jdW1lbnRzTGlzdGEuYXBwZW5kQ2hpbGQoZG9jVGFiTGlzdEl0ZW0pOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBFdmVudCBsaXN0ZW5lciB0byB0b2dnbGUgdGhlIGZpbGUgbWVudSB2aXNpYmlsaXR5DQogICAgICAgIGFyY2hpdm9zQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgYXJjaGl2b01lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7DQogICAgICAgICAgICBpZiAoYXJjaGl2b01lbnUuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgew0KICAgICAgICAgICAgICAgIHNob3dUYWIoJ3RhYi1jb250ZW50LWZpbGVzJyk7IC8vIERlZmF1bHQgdG8gJ0FyY2hpdm9zJyB0YWIgd2hlbiBvcGVuaW5nDQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KDQogICAgICAgIC8vIEV2ZW50IGxpc3RlbmVyIHRvIGNsb3NlIHRoZSBmaWxlIG1lbnUNCiAgICAgICAgY2xvc2VNZW51QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgYXJjaGl2b01lbnUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7DQogICAgICAgIH0pOw0KDQogICAgICAgIC8vIEV2ZW50IGxpc3RlbmVyIGZvciBmaWxlIGlucHV0IGNoYW5nZSAoZnJvbSBtYWluIGNoYXQgaW50ZXJmYWNlKQ0KICAgICAgICBmaWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGV2ZW50KSA9PiB7DQogICAgICAgICAgICBjb25zdCBmaWxlcyA9IGV2ZW50LnRhcmdldC5maWxlczsNCiAgICAgICAgICAgIGlmIChmaWxlcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgcHJvY2Vzc0ZpbGVzKGZpbGVzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8gRXZlbnQgbGlzdGVuZXIgZm9yIGNsaWNraW5nIHRoZSAiQXJyYXN0cmEgeSBzdWVsdGEiIGFyZWEgdG8gb3BlbiBmaWxlIGlucHV0DQogICAgICAgIGFyY2hpdm9TdWJpci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4gew0KICAgICAgICAgICAgYXJjaGl2b1N1YmlySW5wdXQuY2xpY2soKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8gRXZlbnQgbGlzdGVuZXIgZm9yIGZpbGUgaW5wdXQgY2hhbmdlIChmcm9tIGZpbGUgbWVudSkNCiAgICAgICAgYXJjaGl2b1N1YmlySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGV2ZW50KSA9PiB7DQogICAgICAgICAgICBjb25zdCBmaWxlcyA9IGV2ZW50LnRhcmdldC5maWxlczsNCiAgICAgICAgICAgIGlmIChmaWxlcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgcHJvY2Vzc0ZpbGVzKGZpbGVzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8gRnVuY3Rpb24gdG8gcHJvY2VzcyBzZWxlY3RlZCBvciBkcm9wcGVkIGZpbGVzDQogICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NGaWxlcyhmaWxlcykgew0KICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsNCiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3RmlsZSA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGZpbGUubmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBmaWxlLnR5cGUsDQogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBlLnRhcmdldC5yZXN1bHQuc3BsaXQoJywnKVsxXSwgLy8gQmFzZTY0IGVuY29kZWQgZGF0YQ0KICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBlLnRhcmdldC5yZXN1bHQgLy8gRnVsbCBkYXRhIFVSTCBmb3IgbG9jYWwgZGlzcGxheSAoZS5nLiwgdGh1bWJuYWlscykNCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZmlsZSBhbHJlYWR5IGV4aXN0cyB0byBhdm9pZCBkdXBsaWNhdGVzIGluIGZpbGVEYXRhQXJyYXkgZm9yIHRoZSBjdXJyZW50IG1lc3NhZ2UNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdGaWxlSW5DdXJyZW50TWVzc2FnZSA9IGZpbGVEYXRhQXJyYXkuZmluZChmID0+IGYubmFtZSA9PT0gbmV3RmlsZS5uYW1lICYmIGYubWltZVR5cGUgPT09IG5ld0ZpbGUubWltZVR5cGUgJiYgZi5kYXRhID09PSBuZXdGaWxlLmRhdGEpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWV4aXN0aW5nRmlsZUluQ3VycmVudE1lc3NhZ2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVEYXRhQXJyYXkucHVzaChuZXdGaWxlKTsgLy8gQWRkIHRvIGN1cnJlbnQgbWVzc2FnZSdzIGZpbGVzDQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdG8gb3ZlcmFsbCB1cGxvYWRlZEZpbGVzIGxpc3QgaWYgbm90IGFscmVhZHkgdGhlcmUgKGJhc2VkIG9uIG5hbWUgYW5kIHR5cGUgZm9yIHNpbXBsaWNpdHkpDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nRmlsZUluVXBsb2FkZWQgPSB1cGxvYWRlZEZpbGVzLmZpbmQoZiA9PiBmLm5hbWUgPT09IG5ld0ZpbGUubmFtZSAmJiBmLm1pbWVUeXBlID09PSBuZXdGaWxlLm1pbWVUeXBlKTsNCiAgICAgICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmdGaWxlSW5VcGxvYWRlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkZWRGaWxlcy5wdXNoKG5ld0ZpbGUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJlbmRlckFsbFVwbG9hZGVkTGlzdHMoKTsgLy8gVXBkYXRlIGRpc3BsYXllZCBsaXN0cyBpbiB0aGUgIk1BUyIgbWVudQ0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7IC8vIFJlYWQgZmlsZSBhcyBEYXRhIFVSTCAoQmFzZTY0KQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gRHJhZyBhbmQgZHJvcCBldmVudCBsaXN0ZW5lcnMgZm9yIHRoZSBmaWxlIHVwbG9hZCBhcmVhDQogICAgICAgIGFyY2hpdm9TdWJpci5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChldmVudCkgPT4gew0KICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgIGFyY2hpdm9TdWJpci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2UwZTBlMCc7DQogICAgICAgIH0pOw0KDQogICAgICAgIGFyY2hpdm9TdWJpci5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCAoZXZlbnQpID0+IHsNCiAgICAgICAgICAgIGFyY2hpdm9TdWJpci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnOw0KICAgICAgICB9KTsNCg0KICAgICAgICBhcmNoaXZvU3ViaXIuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIChldmVudCkgPT4gew0KICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgIGFyY2hpdm9TdWJpci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnOw0KICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBldmVudC5kYXRhVHJhbnNmZXIuZmlsZXM7DQogICAgICAgICAgICBpZiAoZmlsZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIHByb2Nlc3NGaWxlcyhmaWxlcyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KDQogICAgICAgIC8vIEV2ZW50IGxpc3RlbmVyIGZvciBhY3Rpb25zIHdpdGhpbiB0aGUgdXBsb2FkZWQgZmlsZXMgbGlzdCAocmVhdHRhY2gvZGVsZXRlKQ0KICAgICAgICBhcmNoaXZvc0xpc3RhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7DQogICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncmVhdHRhY2gtZmlsZScpKSB7DQogICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KGV2ZW50LnRhcmdldC5kYXRhc2V0LmluZGV4KTsNCiAgICAgICAgICAgICAgICBjb25zdCBmaWxlVG9SZWF0dGFjaCA9IHVwbG9hZGVkRmlsZXNbaW5kZXhdOw0KICAgICAgICAgICAgICAgIGlmIChmaWxlVG9SZWF0dGFjaCkgew0KICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdG8gY3VycmVudCBtZXNzYWdlJ3MgZmlsZXMgaWYgbm90IGFscmVhZHkgdGhlcmUNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdGaWxlSW5DdXJyZW50TWVzc2FnZSA9IGZpbGVEYXRhQXJyYXkuZmluZChmID0+IGYubmFtZSA9PT0gZmlsZVRvUmVhdHRhY2gubmFtZSAmJiBmLm1pbWVUeXBlID09PSBmaWxlVG9SZWF0dGFjaC5taW1lVHlwZSAmJiBmLmRhdGEgPT09IGZpbGVUb1JlYXR0YWNoLmRhdGEpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWV4aXN0aW5nRmlsZUluQ3VycmVudE1lc3NhZ2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVEYXRhQXJyYXkucHVzaChmaWxlVG9SZWF0dGFjaCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEFyY2hpdm8gYWRqdW50YWRvIGRlIG51ZXZvOiAke2ZpbGVUb1JlYXR0YWNoLm5hbWV9YCk7DQogICAgICAgICAgICAgICAgICAgIC8vIGRpc3BsYXlTeXN0ZW1NZXNzYWdlKGBBcmNoaXZvICIke2ZpbGVUb1JlYXR0YWNoLm5hbWV9IiBsaXN0byBwYXJhIGVudmlhciBjb24gZWwgcHLDs3hpbW8gbWVuc2FqZS5gKTsgLy8gTGluZSBjb21tZW50ZWQgb3V0DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZWxldGUtZmlsZScpKSB7DQogICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KGV2ZW50LnRhcmdldC5kYXRhc2V0LmluZGV4KTsNCiAgICAgICAgICAgICAgICBjb25zdCBmaWxlVG9EZWxldGUgPSB1cGxvYWRlZEZpbGVzW2luZGV4XTsNCg0KICAgICAgICAgICAgICAgIGlmIChmaWxlVG9EZWxldGUpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGZyb20gb3ZlcmFsbCB1cGxvYWRlZCBmaWxlcw0KICAgICAgICAgICAgICAgICAgICB1cGxvYWRlZEZpbGVzLnNwbGljZShpbmRleCwgMSk7DQogICAgICAgICAgICAgICAgICAgIC8vIEFsc28gcmVtb3ZlIGZyb20gY3VycmVudCBtZXNzYWdlJ3MgZmlsZXMgaWYgaXQncyB0aGVyZQ0KICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IGZpbGVEYXRhQXJyYXkubGVuZ3RoOw0KICAgICAgICAgICAgICAgICAgICB3aGlsZShpLS0pew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoZmlsZURhdGFBcnJheVtpXS5uYW1lID09PSBmaWxlVG9EZWxldGUubmFtZSAmJiBmaWxlRGF0YUFycmF5W2ldLm1pbWVUeXBlID09PSBmaWxlVG9EZWxldGUubWltZVR5cGUgJiYgZmlsZURhdGFBcnJheVtpXS5kYXRhID09PSBmaWxlVG9EZWxldGUuZGF0YSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZURhdGFBcnJheS5zcGxpY2UoaSwxKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZW5kZXJBbGxVcGxvYWRlZExpc3RzKCk7IC8vIFJlLXJlbmRlciBsaXN0cyB0byByZWZsZWN0IGNoYW5nZXMNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEFyY2hpdm8gZWxpbWluYWRvOiAke2ZpbGVUb0RlbGV0ZS5uYW1lfWApOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FyY2hpdm8gbm8gZW5jb250cmFkbyBwYXJhIGVsaW1pbmFjacOzbiBlbiBlbCDDrW5kaWNlOicsIGluZGV4KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KDQogICAgICAgIC8vIEV2ZW50IGxpc3RlbmVyIGZvciBhY3Rpb25zIHdpdGhpbiB0aGUgZG9jdW1lbnRzIGxpc3QgKHJlYXR0YWNoL2RlbGV0ZSkgLSBtaXJyb3JzIGFyY2hpdm9zTGlzdGENCiAgICAgICAgZG9jdW1lbnRzTGlzdGEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHsNCiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyZWF0dGFjaC1maWxlJykpIHsNCiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoZXZlbnQudGFyZ2V0LmRhdGFzZXQuaW5kZXgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVUb1JlYXR0YWNoID0gdXBsb2FkZWRGaWxlc1tpbmRleF07DQogICAgICAgICAgICAgICAgaWYgKGZpbGVUb1JlYXR0YWNoKSB7DQogICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0ZpbGVJbkN1cnJlbnRNZXNzYWdlID0gZmlsZURhdGFBcnJheS5maW5kKGYgPT4gZi5uYW1lID09PSBmaWxlVG9SZWF0dGFjaC5uYW1lICYmIGYubWltZVR5cGUgPT09IGZpbGVUb1JlYXR0YWNoLm1pbWVUeXBlICYmIGYuZGF0YSA9PT0gZmlsZVRvUmVhdHRhY2guZGF0YSk7DQogICAgICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmdGaWxlSW5DdXJyZW50TWVzc2FnZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsZURhdGFBcnJheS5wdXNoKGZpbGVUb1JlYXR0YWNoKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQXJjaGl2byBhZGp1bnRhZG8gZGUgbnVldm8gZGVzZGUgZG9jdW1lbnRvczogJHtmaWxlVG9SZWF0dGFjaC5uYW1lfWApOw0KICAgICAgICAgICAgICAgICAgICAvLyBkaXNwbGF5U3lzdGVtTWVzc2FnZShgQXJjaGl2byAiJHtmaWxlVG9SZWF0dGFjaC5uYW1lfSIgbGlzdG8gcGFyYSBlbnZpYXIgY29uIGVsIHByw7N4aW1vIG1lbnNhamUuYCk7IC8vIExpbmUgY29tbWVudGVkIG91dA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGVsZXRlLWZpbGUnKSkgew0KICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChldmVudC50YXJnZXQuZGF0YXNldC5pbmRleCk7DQogICAgICAgICAgICAgICAgY29uc3QgZmlsZVRvRGVsZXRlID0gdXBsb2FkZWRGaWxlc1tpbmRleF07DQoNCiAgICAgICAgICAgICAgICBpZiAoZmlsZVRvRGVsZXRlKSB7DQogICAgICAgICAgICAgICAgICAgIHVwbG9hZGVkRmlsZXMuc3BsaWNlKGluZGV4LCAxKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSBmaWxlRGF0YUFycmF5Lmxlbmd0aDsNCiAgICAgICAgICAgICAgICAgICAgd2hpbGUoaS0tKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZpbGVEYXRhQXJyYXlbaV0ubmFtZSA9PT0gZmlsZVRvRGVsZXRlLm5hbWUgJiYgZmlsZURhdGFBcnJheVtpXS5taW1lVHlwZSA9PT0gZmlsZVRvRGVsZXRlLm1pbWVUeXBlICYmIGZpbGVEYXRhQXJyYXlbaV0uZGF0YSA9PT0gZmlsZVRvRGVsZXRlLmRhdGEpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVEYXRhQXJyYXkuc3BsaWNlKGksMSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyQWxsVXBsb2FkZWRMaXN0cygpOw0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQXJjaGl2byBlbGltaW5hZG8gZGVzZGUgZG9jdW1lbnRvczogJHtmaWxlVG9EZWxldGUubmFtZX1gKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBcmNoaXZvIG5vIGVuY29udHJhZG8gcGFyYSBlbGltaW5hY2nDs24gZW4gZWwgw61uZGljZTonLCBpbmRleCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBGdW5jdGlvbiB0byBoYW5kbGUgdGFiIHN3aXRjaGluZyBpbiB0aGUgZmlsZSBtZW51DQogICAgICAgIGZ1bmN0aW9uIHNob3dUYWIodGFiSWQpIHsNCiAgICAgICAgICAgIC8vIEhpZGUgYWxsIHRhYiBjb250ZW50cw0KICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYi1jb250ZW50JykuZm9yRWFjaChjb250ZW50ID0+IHsNCiAgICAgICAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZS10YWItY29udGVudCcpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAvLyBEZWFjdGl2YXRlIGFsbCB0YWIgYnV0dG9ucw0KICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYi1idXR0b25zIGJ1dHRvbicpLmZvckVhY2goYnV0dG9uID0+IHsNCiAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLXRhYicpOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIFNob3cgdGhlIHNlbGVjdGVkIHRhYiBjb250ZW50DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YWJJZCkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlLXRhYi1jb250ZW50Jyk7DQoNCiAgICAgICAgICAgIC8vIEFjdGl2YXRlIHRoZSBjb3JyZXNwb25kaW5nIHRhYiBidXR0b24NCiAgICAgICAgICAgIGlmICh0YWJJZCA9PT0gJ3RhYi1jb250ZW50LWZpbGVzJykgew0KICAgICAgICAgICAgICAgIHRhYkJ1dHRvbkZpbGVzLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS10YWInKTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFiSWQgPT09ICd0YWItY29udGVudC1odG1sLXByZXZpZXcnKSB7DQogICAgICAgICAgICAgICAgdGFiQnV0dG9uSHRtbFByZXZpZXcuY2xhc3NMaXN0LmFkZCgnYWN0aXZlLXRhYicpOw0KICAgICAgICAgICAgfSBlbHNlIGlmICh0YWJJZCA9PT0gJ3RhYi1jb250ZW50LWRvY3VtZW50cycpIHsNCiAgICAgICAgICAgICAgICB0YWJCdXR0b25Eb2N1bWVudHMuY2xhc3NMaXN0LmFkZCgnYWN0aXZlLXRhYicpOw0KICAgICAgICAgICAgfSBlbHNlIGlmICh0YWJJZCA9PT0gJ3RhYi1jb250ZW50LXdlYi1zZWFyY2hlcycpIHsNCiAgICAgICAgICAgICAgICB0YWJCdXR0b25XZWJTZWFyY2hlcy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUtdGFiJyk7DQogICAgICAgICAgICB9IGVsc2UgaWYgKHRhYklkID09PSAndGFiLWNvbnRlbnQtYXVkaW8tcHJldmlldycpIHsNCiAgICAgICAgICAgICAgICB0YWJCdXR0b25BdWRpb1ByZXZpZXcuY2xhc3NMaXN0LmFkZCgnYWN0aXZlLXRhYicpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gRXZlbnQgbGlzdGVuZXJzIGZvciB0YWIgYnV0dG9ucw0KICAgICAgICB0YWJCdXR0b25GaWxlcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNob3dUYWIoJ3RhYi1jb250ZW50LWZpbGVzJykpOw0KICAgICAgICB0YWJCdXR0b25IdG1sUHJldmlldy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNob3dUYWIoJ3RhYi1jb250ZW50LWh0bWwtcHJldmlldycpKTsNCiAgICAgICAgdGFiQnV0dG9uRG9jdW1lbnRzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2hvd1RhYigndGFiLWNvbnRlbnQtZG9jdW1lbnRzJykpOw0KICAgICAgICB0YWJCdXR0b25XZWJTZWFyY2hlcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNob3dUYWIoJ3RhYi1jb250ZW50LXdlYi1zZWFyY2hlcycpKTsNCiAgICAgICAgdGFiQnV0dG9uQXVkaW9QcmV2aWV3LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2hvd1RhYigndGFiLWNvbnRlbnQtYXVkaW8tcHJldmlldycpKTsNCg0KICAgICAgICAvLyBFdmVudCBsaXN0ZW5lciBmb3IgYmluYXJ5IHBhc3RlIHRleHRhcmVhDQogICAgICAgIGJpbmFyeVBhc3RlVGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcigncGFzdGUnLCAoZXZlbnQpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gZXZlbnQuY2xpcGJvYXJkRGF0YT8uaXRlbXM7DQogICAgICAgICAgICBpZiAoIWl0ZW1zKSByZXR1cm47DQoNCiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnQgZGVmYXVsdCBwYXN0ZSBiZWhhdmlvcg0KDQogICAgICAgICAgICBsZXQgZmlsZXNQcm9jZXNzZWQgPSBmYWxzZTsNCiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykgew0KICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJykpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IGl0ZW0uZ2V0QXNGaWxlKCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChmaWxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1bmlxdWVGaWxlTmFtZSA9IGBwYXN0ZWRfaW1hZ2VfJHtjcnlwdG8ucmFuZG9tVVVJRCgpfS4ke2ZpbGUudHlwZS5zcGxpdCgnLycpWzFdIHx8ICdwbmcnfWA7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1bmlxdWVGaWxlID0gbmV3IEZpbGUoW2ZpbGVdLCB1bmlxdWVGaWxlTmFtZSwgeyB0eXBlOiBmaWxlLnR5cGUgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRmlsZXMoW3VuaXF1ZUZpbGVdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVzUHJvY2Vzc2VkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAndGV4dC9wbGFpbicpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFzdGVkVGV4dCA9IGV2ZW50LmNsaXBib2FyZERhdGEuZ2V0RGF0YSgndGV4dC9wbGFpbicpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGFzdGVkVGV4dC5zdGFydHNXaXRoKCdkYXRhOicpIHx8IChwYXN0ZWRUZXh0Lmxlbmd0aCA+IDUwMCAmJiBwYXN0ZWRUZXh0Lm1hdGNoKC9eW2EtekEtWjAtOSsvPV0rJC8pKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtaW1lVHlwZU1hdGNoID0gcGFzdGVkVGV4dC5tYXRjaCgvXmRhdGE6KFthLXpBLVowLTldK1wvW2EtekEtWjAtOS0uK10rKTtiYXNlNjQsLyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pbWVUeXBlTWF0Y2gpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWltZVR5cGUgPSBtaW1lVHlwZU1hdGNoWzFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjREYXRhID0gcGFzdGVkVGV4dC5zcGxpdCgnLCcpWzFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1bmlxdWVGaWxlTmFtZSA9IGBwYXN0ZWRfZGF0YV8ke2NyeXB0by5yYW5kb21VVUlEKCl9LiR7bWltZVR5cGUuc3BsaXQoJy8nKVsxXSB8fCAnYmluJ31gOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdGaWxlID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdW5pcXVlRmlsZU5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZTogbWltZVR5cGUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBiYXNlNjREYXRhLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBwYXN0ZWRUZXh0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVEYXRhQXJyYXkucHVzaChuZXdGaWxlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkZWRGaWxlcy5wdXNoKG5ld0ZpbGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJBbGxVcGxvYWRlZExpc3RzKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVzUHJvY2Vzc2VkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3IgcHJvY2Vzc2luZyBwYXN0ZWQgYmFzZTY0IGRhdGE6IiwgZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VGV4dCA9IGJpbmFyeVBhc3RlVGV4dGFyZWEudmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICBiaW5hcnlQYXN0ZVRleHRhcmVhLnZhbHVlID0gY3VycmVudFRleHQgKyBwYXN0ZWRUZXh0Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGZpbGVzUHJvY2Vzc2VkKSB7DQogICAgICAgICAgICAgICAgYmluYXJ5UGFzdGVUZXh0YXJlYS52YWx1ZSA9ICcnOw0KICAgICAgICAgICAgICAgIC8vIGRpc3BsYXlTeXN0ZW1NZXNzYWdlKCdBcmNoaXZvcyBwZWdhZG9zIGxpc3RvcyBwYXJhIGVudmlhciBjb24gZWwgcHLDs3hpbW8gbWVuc2FqZS4nKTsgLy8gTGluZSBjb21tZW50ZWQgb3V0DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KDQogICAgICAgIC8vIEV2ZW50IGxpc3RlbmVyIGZvciBIVE1MIHByZXZpZXcgdGV4dGFyZWEgaW5wdXQNCiAgICAgICAgaHRtbFByZXZpZXdUZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGh0bWxDb250ZW50ID0gaHRtbFByZXZpZXdUZXh0YXJlYS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGlmcmFtZURvYyA9IGh0bWxQcmV2aWV3SWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7DQogICAgICAgICAgICBpZnJhbWVEb2Mub3BlbigpOw0KICAgICAgICAgICAgaWZyYW1lRG9jLndyaXRlKGh0bWxDb250ZW50KTsNCiAgICAgICAgICAgIGlmcmFtZURvYy5jbG9zZSgpOw0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBFdmVudCBsaXN0ZW5lciBmb3Igb3BlbmluZyBIVE1MIGluIGEgbmV3IHRhYg0KICAgICAgICBvcGVuSHRtbE5ld1RhYkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGh0bWxDb250ZW50ID0gaHRtbFByZXZpZXdUZXh0YXJlYS52YWx1ZTsNCiAgICAgICAgICAgIGlmIChodG1sQ29udGVudCkgew0KICAgICAgICAgICAgICAgIGNvbnN0IG5ld1dpbmRvdyA9IHdpbmRvdy5vcGVuKCk7DQogICAgICAgICAgICAgICAgbmV3V2luZG93LmRvY3VtZW50LndyaXRlKGh0bWxDb250ZW50KTsNCiAgICAgICAgICAgICAgICBuZXdXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIEhUTUwgY29udGVudCB0byBvcGVuLicpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBFdmVudCBsaXN0ZW5lciBmb3Igb3BlbmluZyBmdWxsc2NyZWVuIEhUTUwgbW9kYWwNCiAgICAgICAgaHRtbFByZXZpZXdJZnJhbWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBodG1sQ29udGVudCA9IGh0bWxQcmV2aWV3VGV4dGFyZWEudmFsdWU7DQogICAgICAgICAgICBpZiAoaHRtbENvbnRlbnQpIHsNCiAgICAgICAgICAgICAgICBmdWxsc2NyZWVuSHRtbElmcmFtZS5zcmNkb2MgPSBodG1sQ29udGVudDsNCiAgICAgICAgICAgICAgICBmdWxsc2NyZWVuSHRtbE1vZGFsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBFdmVudCBsaXN0ZW5lciBmb3IgY2xvc2luZyBmdWxsc2NyZWVuIEhUTUwgbW9kYWwNCiAgICAgICAgY2xvc2VGdWxsc2NyZWVuTW9kYWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgICAgICAgICBmdWxsc2NyZWVuSHRtbE1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgZnVsbHNjcmVlbkh0bWxJZnJhbWUuc3JjZG9jID0gJyc7IC8vIENsZWFyIGlmcmFtZSBjb250ZW50DQogICAgICAgIH0pOw0KDQogICAgICAgIC8vIEV2ZW50IGxpc3RlbmVyIGZvciAiR2VuZXJhciBBdWRpbyIgYnV0dG9uDQogICAgICAgIHBsYXlDdXN0b21BdWRpb0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHRleHRUb1BsYXkgPSBjdXN0b21BdWRpb1RleHRhcmVhLnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVm9pY2UgPSBwcmV2aWV3QXVkaW9Wb2ljZVNlbGVjdG9yLnZhbHVlOw0KICAgICAgICAgICAgYXdhaXQgZ2VuZXJhdGVBbmRQbGF5UG9sbGluYXRpb25zQXVkaW8odGV4dFRvUGxheSwgc2VsZWN0ZWRWb2ljZSwgcGxheUN1c3RvbUF1ZGlvQnV0dG9uKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8gRXZlbnQgbGlzdGVuZXIgZm9yICJSZXN1bWlyIHkgRXNjdWNoYXIiIGJ1dHRvbg0KICAgICAgICBzdW1tYXJpemVBdWRpb0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgIHN1bW1hcml6ZUF1ZGlvQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIHN1bW1hcml6ZUF1ZGlvQnV0dG9uLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLXNwaW5uZXIgZmEtc3BpbiI+PC9pPiBSZXN1bWllbmRvLi4uJzsNCiAgICAgICAgICAgIHBvbGxpbmF0aW9uc0F1ZGlvUGxheWVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQoNCiAgICAgICAgICAgIGxldCBmdWxsQ29udmVyc2F0aW9uVGV4dCA9ICcnOw0KICAgICAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudXNlci1tZXNzYWdlLCAuZ2VtaW5pLW1lc3NhZ2UnKTsNCiAgICAgICAgICAgIG1lc3NhZ2VzLmZvckVhY2gobWVzc2FnZURpdiA9PiB7DQogICAgICAgICAgICAgICAgY29uc3Qgcm9sZSA9IG1lc3NhZ2VEaXYuY2xhc3NMaXN0LmNvbnRhaW5zKCd1c2VyLW1lc3NhZ2UnKSA/ICdVc3VhcmlvJyA6ICdJQSc7DQogICAgICAgICAgICAgICAgZnVsbENvbnZlcnNhdGlvblRleHQgKz0gYCR7cm9sZX06ICR7bWVzc2FnZURpdi50ZXh0Q29udGVudH1cblxuYDsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBpZiAoIWZ1bGxDb252ZXJzYXRpb25UZXh0LnRyaW0oKSkgew0KICAgICAgICAgICAgICAgIC8vIGRpc3BsYXlTeXN0ZW1NZXNzYWdlKCdObyBoYXkgY29udmVyc2FjacOzbiBwYXJhIHJlc3VtaXIuJyk7IC8vIExpbmUgY29tbWVudGVkIG91dA0KICAgICAgICAgICAgICAgIHN1bW1hcml6ZUF1ZGlvQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgc3VtbWFyaXplQXVkaW9CdXR0b24uaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYXMgZmEtZmlsZS1hdWRpbyI+PC9pPiBSZXN1bWlyIHkgRXNjdWNoYXInOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3Qgc3VtbWFyaXplUHJvbXB0ID0gYEdlbmVyYSB1biByZXN1bWVuIGNvbmNpc28geSBjb2hlcmVudGUgZGUgbGEgc2lndWllbnRlIGNvbnZlcnNhY2nDs246XG5cbiR7ZnVsbENvbnZlcnNhdGlvblRleHR9YDsNCiAgICAgICAgICAgIGNvbnN0IHN1bW1hcml6YXRpb25Nb2RlbCA9ICdncHQtMy41LXR1cmJvJzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBlbmNvZGVkU3VtbWFyaXplUHJvbXB0ID0gZW5jb2RlVVJJQ29tcG9uZW50KHN1bW1hcml6ZVByb21wdCk7DQogICAgICAgICAgICAgICAgY29uc3Qgc3VtbWFyaXplVXJsID0gYGh0dHBzOi8vdGV4dC5wb2xsaW5hdGlvbnMuYWkvJHtlbmNvZGVkU3VtbWFyaXplUHJvbXB0fT9tb2RlbD0ke3N1bW1hcml6YXRpb25Nb2RlbH1gOw0KDQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzdW1tYXJpemVVcmwpOw0KICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgZXJyb3IgYWwgcmVzdW1pciBjb24gUG9sbGluYXRpb25zLmFpOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fSAtICR7ZXJyb3JUZXh0fWApOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IHN1bW1hcnlUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVm9pY2UgPSBwcmV2aWV3QXVkaW9Wb2ljZVNlbGVjdG9yLnZhbHVlOw0KICAgICAgICAgICAgICAgIGF3YWl0IGdlbmVyYXRlQW5kUGxheVBvbGxpbmF0aW9uc0F1ZGlvKHN1bW1hcnlUZXh0LCBzZWxlY3RlZFZvaWNlLCBzdW1tYXJpemVBdWRpb0J1dHRvbik7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgcmVzdW1pciBsYSBjb252ZXJzYWNpw7NuOicsIGVycm9yKTsNCiAgICAgICAgICAgICAgICBkaXNwbGF5U3lzdGVtTWVzc2FnZShgRXJyb3IgYWwgcmVzdW1pciBsYSBjb252ZXJzYWNpw7NuOiAke2Vycm9yLm1lc3NhZ2V9YCk7DQogICAgICAgICAgICAgICAgc3VtbWFyaXplQXVkaW9CdXR0b24uZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBzdW1tYXJpemVBdWRpb0J1dHRvbi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1maWxlLWF1ZGlvIj48L2k+IFJlc3VtaXIgeSBFc2N1Y2hhcic7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KDQoNCiAgICAgICAgLy8gRXZlbnQgbGlzdGVuZXIgZm9yIFJlcG9ydCBidXR0b24NCiAgICAgICAgcmVwb3J0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgaXNSZXBvcnRNb2RlQWN0aXZlID0gIWlzUmVwb3J0TW9kZUFjdGl2ZTsNCiAgICAgICAgICAgIHJlcG9ydEJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdyZXBvcnQtYWN0aXZlJywgaXNSZXBvcnRNb2RlQWN0aXZlKTsNCg0KICAgICAgICAgICAgaWYgKGlzUmVwb3J0TW9kZUFjdGl2ZSkgew0KICAgICAgICAgICAgICAgIGlmIChpc0h0bWxNb2RlQWN0aXZlKSB7DQogICAgICAgICAgICAgICAgICAgIGlzSHRtbE1vZGVBY3RpdmUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgaHRtbE1vZGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaHRtbC1hY3RpdmUnKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gZGlzcGxheVN5c3RlbU1lc3NhZ2UoIk1vZG8gSFRNTCBkZXNhY3RpdmFkby4iKTsgLy8gTGluZSBjb21tZW50ZWQgb3V0DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChpc0ltYWdlNE1vZGVBY3RpdmUpIHsNCiAgICAgICAgICAgICAgICAgICAgaXNJbWFnZTRNb2RlQWN0aXZlID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIGltYWdlTW9kZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpbWFnZS1hY3RpdmUnKTsNCiAgICAgICAgICAgICAgICAgICAgc2hvd0NoYXRNb2RlKCk7DQogICAgICAgICAgICAgICAgICAgIC8vIGRpc3BsYXlTeXN0ZW1NZXNzYWdlKCJNb2RvIEltYWdlbiA0IGRlc2FjdGl2YWRvLiIpOyAvLyBMaW5lIGNvbW1lbnRlZCBvdXQNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGlzU2NoZW1hTW9kZUFjdGl2ZSkgeyAvLyBEZWFjdGl2YXRlIHNjaGVtYSBtb2RlDQogICAgICAgICAgICAgICAgICAgIGlzU2NoZW1hTW9kZUFjdGl2ZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICBzY2hlbWFNb2RlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3NjaGVtYS1hY3RpdmUnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIk1vZG8gSW5mb3JtZSBhY3RpdmFkby4iKTsNCiAgICAgICAgICAgICAgICAvLyBkaXNwbGF5U3lzdGVtTWVzc2FnZSgiTW9kbyBJbmZvcm1lIGFjdGl2YWRvLiBMb3MgcHLDs3hpbW9zIG1lbnNhamVzIGdlbmVyYXLDoW4gaW5mb3JtZXMuIik7IC8vIExpbmUgY29tbWVudGVkIG91dA0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiTW9kbyBJbmZvcm1lIGRlc2FjdGl2YWRvLiIpOw0KICAgICAgICAgICAgICAgIC8vIGRpc3BsYXlTeXN0ZW1NZXNzYWdlKCJNb2RvIEluZm9ybWUgZGVzYWN0aXZhZG8uIik7IC8vIExpbmUgY29tbWVudGVkIG91dA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdXBkYXRlSW5wdXRQbGFjZWhvbGRlcigpOw0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBFdmVudCBsaXN0ZW5lciBmb3IgSFRNTCBNb2RlIGJ1dHRvbiAobm93IGZvciBIVE1MIGZpbHRlcmluZykNCiAgICAgICAgaHRtbE1vZGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgICAgICAgICBpc0h0bWxNb2RlQWN0aXZlID0gIWlzSHRtbE1vZGVBY3RpdmU7DQogICAgICAgICAgICBodG1sTW9kZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdodG1sLWFjdGl2ZScsIGlzSHRtbE1vZGVBY3RpdmUpOw0KDQogICAgICAgICAgICBpZiAoaXNIdG1sTW9kZUFjdGl2ZSkgew0KICAgICAgICAgICAgICAgIGlmIChpc1JlcG9ydE1vZGVBY3RpdmUpIHsNCiAgICAgICAgICAgICAgICAgICAgaXNSZXBvcnRNb2RlQWN0aXZlID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIHJlcG9ydEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdyZXBvcnQtYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgIC8vIGRpc3BsYXlTeXN0ZW1NZXNzYWdlKCJNb2RvIEluZm9ybWUgZGVzYWN0aXZhZG8uIik7IC8vIExpbmUgY29tbWVudGVkIG91dA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoaXNJbWFnZTRNb2RlQWN0aXZlKSB7DQogICAgICAgICAgICAgICAgICAgIGlzSW1hZ2U0TW9kZUFjdGl2ZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICBpbWFnZU1vZGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaW1hZ2UtYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgIHNob3dDaGF0TW9kZSgpOw0KICAgICAgICAgICAgICAgICAgICAvLyBkaXNwbGF5U3lzdGVtTWVzc2FnZSgiTW9kbyBIVE1MIGRlc2FjdGl2YWRvLiIpOyAvLyBMaW5lIGNvbW1lbnRlZCBvdXQNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGlzU2NoZW1hTW9kZUFjdGl2ZSkgeyAvLyBEZWFjdGl2YXRlIHNjaGVtYSBtb2RlDQogICAgICAgICAgICAgICAgICAgIGlzU2NoZW1hTW9kZUFjdGl2ZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICBzY2hlbWFNb2RlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3NjaGVtYS1hY3RpdmUnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIk1vZG8gSFRNTCBhY3RpdmFkby4iKTsNCiAgICAgICAgICAgICAgICAvLyBkaXNwbGF5U3lzdGVtTWVzc2FnZSgiTW9kbyBIVE1MIGFjdGl2YWRvLiBTZSBpbnRlbnRhcsOhIGdlbmVyYXIgSFRNTCBjb21wbGV0by4iKTsgLy8gTGluZSBjb21tZW50ZWQgb3V0DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJNb2RvIEhUTUwgZGVzYWN0aXZhZG8uIik7DQogICAgICAgICAgICAgICAgLy8gZGlzcGxheVN5c3RlbU1lc3NhZ2UoIk1vZG8gSFRNTCBkZXNhY3RpdmFkby4iKTsgLy8gTGluZSBjb21tZW50ZWQgb3V0DQogICAgICAgICAgICB9DQogICAgICAgICAgICB1cGRhdGVJbnB1dFBsYWNlaG9sZGVyKCk7DQogICAgICAgIH0pOw0KDQogICAgICAgIC8vIEV2ZW50IGxpc3RlbmVyIGZvciBJbWFnZSBNb2RlIGJ1dHRvbg0KICAgICAgICBpbWFnZU1vZGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgICAgICAgICBpc0ltYWdlNE1vZGVBY3RpdmUgPSAhaXNJbWFnZTRNb2RlQWN0aXZlOw0KICAgICAgICAgICAgaW1hZ2VNb2RlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2ltYWdlLWFjdGl2ZScsIGlzSW1hZ2U0TW9kZUFjdGl2ZSk7DQoNCiAgICAgICAgICAgIGlmIChpc0ltYWdlNE1vZGVBY3RpdmUpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNSZXBvcnRNb2RlQWN0aXZlKSB7DQogICAgICAgICAgICAgICAgICAgIGlzUmVwb3J0TW9kZUFjdGl2ZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICByZXBvcnRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgncmVwb3J0LWFjdGl2ZScpOw0KICAgICAgICAgICAgICAgICAgICAvLyBkaXNwbGF5U3lzdGVtTWVzc2FnZSgiTW9kbyBJbmZvcm1lIGRlc2FjdGl2YWRvLiIpOyAvLyBMaW5lIGNvbW1lbnRlZCBvdXQNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGlzSHRtbE1vZGVBY3RpdmUpIHsNCiAgICAgICAgICAgICAgICAgICAgaXNIdG1sTW9kZUFjdGl2ZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICBodG1sTW9kZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdodG1sLWFjdGl2ZScpOw0KICAgICAgICAgICAgICAgICAgICBzaG93Q2hhdE1vZGUoKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gZGlzcGxheVN5c3RlbU1lc3NhZ2UoIk1vZG8gSFRNTCBkZXNhY3RpdmFkby4iKTsgLy8gTGluZSBjb21tZW50ZWQgb3V0DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChpc1NjaGVtYU1vZGVBY3RpdmUpIHsgLy8gRGVhY3RpdmF0ZSBzY2hlbWEgbW9kZQ0KICAgICAgICAgICAgICAgICAgICBpc1NjaGVtYU1vZGVBY3RpdmUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgc2NoZW1hTW9kZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdzY2hlbWEtYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJNb2RvIEltYWdlbiA0IGFjdGl2YWRvLiIpOw0KICAgICAgICAgICAgICAgIHNob3dJbWFnZTRNb2RlKCk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJNb2RvIEltYWdlbiA0IGRlc2FjdGl2YWRvLiIpOw0KICAgICAgICAgICAgICAgIHNob3dDaGF0TW9kZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdXBkYXRlSW5wdXRQbGFjZWhvbGRlcigpOw0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBFdmVudCBsaXN0ZW5lciBmb3IgU2NoZW1hIE1vZGUgYnV0dG9uDQogICAgICAgIHNjaGVtYU1vZGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgICAgICAgICBpc1NjaGVtYU1vZGVBY3RpdmUgPSAhaXNTY2hlbWFNb2RlQWN0aXZlOw0KICAgICAgICAgICAgc2NoZW1hTW9kZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdzY2hlbWEtYWN0aXZlJywgaXNTY2hlbWFNb2RlQWN0aXZlKTsNCg0KICAgICAgICAgICAgaWYgKGlzU2NoZW1hTW9kZUFjdGl2ZSkgew0KICAgICAgICAgICAgICAgIC8vIERlYWN0aXZhdGUgb3RoZXIgbW9kZXMNCiAgICAgICAgICAgICAgICBpZiAoaXNSZXBvcnRNb2RlQWN0aXZlKSB7DQogICAgICAgICAgICAgICAgICAgIGlzUmVwb3J0TW9kZUFjdGl2ZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICByZXBvcnRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgncmVwb3J0LWFjdGl2ZScpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoaXNIdG1sTW9kZUFjdGl2ZSkgew0KICAgICAgICAgICAgICAgICAgICBpc0h0bWxNb2RlQWN0aXZlID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIGh0bWxNb2RlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2h0bWwtYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChpc0ltYWdlNE1vZGVBY3RpdmUpIHsNCiAgICAgICAgICAgICAgICAgICAgaXNJbWFnZTRNb2RlQWN0aXZlID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIGltYWdlTW9kZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpbWFnZS1hY3RpdmUnKTsNCiAgICAgICAgICAgICAgICAgICAgc2hvd0NoYXRNb2RlKCk7IC8vIFJldHVybiB0byBjaGF0IHZpZXcgaWYgaW4gaW1hZ2UgbW9kZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiTW9kbyBFc3F1ZW1hIEludGVyYWN0aXZvIGFjdGl2YWRvLiIpOw0KICAgICAgICAgICAgICAgIGRpc3BsYXlTeXN0ZW1NZXNzYWdlKCJNb2RvIEVzcXVlbWEgSW50ZXJhY3Rpdm8gYWN0aXZhZG8uIExvcyBwcsOzeGltb3MgbWVuc2FqZXMgZ2VuZXJhcsOhbiBlc3F1ZW1hcyBpbnRlcmFjdGl2b3MuIFB1ZWRlcyBlc3BlY2lmaWNhciBlbCB0aXBvIGRlIGRpYWdyYW1hIChlai4gJ2RpYWdyYW1hIGRlIGZsdWpvIHNvYnJlIFgnLCAnZGlhZ3JhbWEgZGUgc2VjdWVuY2lhIHNvYnJlIFknLCAnbnViZSBkZSBwYWxhYnJhcyBzb2JyZSBaJywgJ2RpYWdyYW1hIGRlIGJsb3F1ZXMgc29icmUgQScsICdkaWFncmFtYSBCUE1OIHNvYnJlIEInLCBldGMuKS4iKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIk1vZG8gRXNxdWVtYSBJbnRlcmFjdGl2byBkZXNhY3RpdmFkby4iKTsNCiAgICAgICAgICAgICAgICBkaXNwbGF5U3lzdGVtTWVzc2FnZSgiTW9kbyBFc3F1ZW1hIEludGVyYWN0aXZvIGRlc2FjdGl2YWRvLiIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdXBkYXRlSW5wdXRQbGFjZWhvbGRlcigpOw0KICAgICAgICB9KTsNCg0KDQogICAgICAgIC8vIEZ1bmN0aW9uIHRvIHNob3cgdGhlIGNoYXQgaW50ZXJmYWNlIGFuZCBoaWRlIHRoZSBpbWFnZSBpbnRlcmZhY2UNCiAgICAgICAgZnVuY3Rpb24gc2hvd0NoYXRNb2RlKCkgew0KICAgICAgICAgICAgY2hhdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KICAgICAgICAgICAgaW5wdXRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCiAgICAgICAgICAgIGJvdHRvbUJ1dHRvbnNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCiAgICAgICAgICAgIGltYWdlNENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgaW1hZ2VNb2RlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2ltYWdlLWFjdGl2ZScpOw0KICAgICAgICAgICAgaXNJbWFnZTRNb2RlQWN0aXZlID0gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBGdW5jdGlvbiB0byBzaG93IHRoZSBpbWFnZSBpbnRlcmZhY2UgYW5kIGhpZGUgdGhlIGNoYXQgaW50ZXJmYWNlDQogICAgICAgIGZ1bmN0aW9uIHNob3dJbWFnZTRNb2RlKCkgew0KICAgICAgICAgICAgY2hhdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgaW5wdXRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIGJvdHRvbUJ1dHRvbnNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIGltYWdlNENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KICAgICAgICAgICAgaW5pdGlhbGl6ZUltYWdlNEFwcCgpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gSW1hZ2UgNCBTcGVjaWZpYyBKYXZhU2NyaXB0DQogICAgICAgIGNvbnN0IGltYWdlbkdlbmVyYWRhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImltYWdlbkdlbmVyYWRhIik7DQogICAgICAgIGNvbnN0IGdlbmVyYXJJbWFnZW5CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZ2VuZXJhckltYWdlbiIpOw0KICAgICAgICBjb25zdCBtZW5zYWplSW5wdXRJbWc0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1lbnNhamVJbnB1dCIpOyAvLyBSZW5hbWVkIHRvIGF2b2lkIGNvbmZsaWN0DQogICAgICAgIGNvbnN0IHZhcmlhckltYWdlbkJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2YXJpYXJJbWFnZW4iKTsNCiAgICAgICAgY29uc3QgdmFyaWFjaW9uQWxnb3JpdG1pY2FCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmFyaWFjaW9uQWxnb3JpdG1pY2EiKTsNCiAgICAgICAgY29uc3QgcGFyYXJWYXJpYWNpb25CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGFyYXJWYXJpYWNpb24iKTsgLy8gQ29ycmVjdGVkIGFzc2lnbm1lbnQNCiAgICAgICAgY29uc3QgZ2FsZXJpYUltYWdlbmVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImdhbGVyaWFJbWFnZW5lcyIpOw0KICAgICAgICBjb25zdCB2ZXJCaWJsaW90ZWNhQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInZlckJpYmxpb3RlY2EiKTsNCiAgICAgICAgY29uc3Qgb2N1bHRhckJpYmxpb3RlY2FCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgib2N1bHRhckJpYmxpb3RlY2EiKTsNCiAgICAgICAgY29uc3QgZGVzY2FyZ2FySW1hZ2VuQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRlc2NhcmdhckltYWdlblByaW5jaXBhbCIpOw0KICAgICAgICBjb25zdCBkZXNjYXJnYXJHYWxlcmlhQnRuID0gZG9jdW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGVzY2FyZ2FyR2FsZXJpYSIpOw0KICAgICAgICBjb25zdCBkZXNjYXJnYXJTZWxlY2Npb25hZGFzQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRlc2NhcmdhclNlbGVjY2lvbmFkYXMiKTsNCiAgICAgICAgY29uc3QgbW9kZWxvU2VsZWN0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibW9kZWxvU2VsZWN0b3IiKTsNCg0KICAgICAgICBsZXQgY3VycmVudFNlZWQgPSAwOw0KICAgICAgICBsZXQgZ2VuZXJhY2lvbkNvbnRpbnVhOw0KDQogICAgICAgIGZ1bmN0aW9uIGdlbmVyYXJOdW1lcm9BbGVhdG9yaW8oKSB7DQogICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMCk7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBnZW5lcmFyVVJMSW1hZ2VuKG1lbnNhamUsIHNlZWQsIG1vZGVsbyA9ICdmbHV4Jykgew0KICAgICAgICAgICAgY29uc3QgZGltZW5zaW9uID0gNTEyOw0KICAgICAgICAgICAgY29uc3QgdXJsID0gYGh0dHBzOi8vaW1hZ2UucG9sbGluYXRpb25zLmFpL3Byb21wdC8ke2VuY29kZVVSSUNvbXBvbmVudChtZW5zYWplKX0/d2lkdGg9JHtkaW1lbnNpb259JmhlaWdodD0ke2RpbWVuc2lvbn0mc2VlZD0ke3NlZWR9Jm1vZGVsPSR7bW9kZWxvfSZub2xvZ289dHJ1ZWA7DQogICAgICAgICAgICByZXR1cm4gdXJsOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gY29udmVydGlyVVJMQURhdGFVUkwodXJsLCBjYWxsYmFjaykgew0KICAgICAgICAgICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7DQogICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQogICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVhZGVyLnJlc3VsdCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKHhoci5yZXNwb25zZSk7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7DQogICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InOw0KICAgICAgICAgICAgeGhyLnNlbmQoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIGdlbmVyYXJWYXJpYWNpb25lc0FsZ29yaXRtaWNhcyhtZW5zYWplLCBtb2RlbG9TZWxlY2Npb25hZG8gPSAnZmx1eCcpIHsNCiAgICAgICAgICAgIGNvbnN0IGdhbGVyaWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZ2FsZXJpYUltYWdlbmVzIik7DQogICAgICAgICAgICBsZXQgc2VlZCA9IDE7DQogICAgICAgICAgICBsZXQgZ2VuZXJhbmRvID0gdHJ1ZTsNCg0KICAgICAgICAgICAgZnVuY3Rpb24gZ2VuZXJhclNpZ3VpZW50ZUltYWdlbigpIHsNCiAgICAgICAgICAgICAgICBpZiAoIWdlbmVyYW5kbykgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgbnVldmFJbWFnZW5VUkwgPSBnZW5lcmFyVVJMSW1hZ2VuKG1lbnNhamUsIHNlZWQsIG1vZGVsb1NlbGVjY2lvbmFkbyk7DQogICAgICAgICAgICAgICAgY29udmVydGlyVVJMQURhdGFVUkwobnVldmFJbWFnZW5VUkwsIChkYXRhVVJMKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG51ZXZhSW1hZ2VuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7DQogICAgICAgICAgICAgICAgICAgIG51ZXZhSW1hZ2VuLnNyYyA9IGRhdGFVUkw7DQogICAgICAgICAgICAgICAgICAgIG51ZXZhSW1hZ2VuLnNldEF0dHJpYnV0ZSgnZGF0YS11cmwnLCBkYXRhVVJMKTsNCiAgICAgICAgICAgICAgICAgICAgbnVldmFJbWFnZW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxlY2Npb25hckltYWdlbik7DQogICAgICAgICAgICAgICAgICAgIGdhbGVyaWEuYXBwZW5kQ2hpbGQobnVldmFJbWFnZW4pOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChnYWxlcmlhLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VuR2VuZXJhZGEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW1hZ2VuR2VuZXJhZGEiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlbkdlbmVyYWRhLnNyYyA9IGRhdGFVUkw7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBzZWVkKys7DQogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZ2VuZXJhclNpZ3VpZW50ZUltYWdlbiwgMCk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGdlbmVyYXJTaWd1aWVudGVJbWFnZW4oKTsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgZGV0ZW5lcjogKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBnZW5lcmFuZG8gPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gZGVzY2FyZ2FySW1hZ2VuKHVybCwgbm9tYnJlKSB7DQogICAgICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOw0KICAgICAgICAgICAgYS5ocmVmID0gdXJsOw0KICAgICAgICAgICAgYS5kb3dubG9hZCA9IG5vbWJyZTsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7DQogICAgICAgICAgICBhLmNsaWNrKCk7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gZGVzY2FyZ2FyU2VsZWNjaW9uYWRhcygpIHsNCiAgICAgICAgICAgIGNvbnN0IGltYWdlbmVzU2VsZWNjaW9uYWRhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNpbWFnZS00LWNvbnRhaW5lciAuc2VsZWNjaW9uYWRhJyk7DQogICAgICAgICAgICBpZiAoaW1hZ2VuZXNTZWxlY2Npb25hZGFzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgIG1vc3RyYXJNZW5zYWplSW1nNCgiTm8gaGF5IGltw6FnZW5lcyBzZWxlY2Npb25hZGFzIHBhcmEgZGVzY2FyZ2FyLiIpOyAvLyBVc2UgSW1nNCBzcGVjaWZpYyBtZXNzYWdlDQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCB6aXAgPSBuZXcgSlNaaXAoKTsNCiAgICAgICAgICAgIGxldCBjb21wbGV0ZWREb3dubG9hZHMgPSAwOw0KICAgICAgICAgICAgY29uc3QgdG90YWxJbWFnZXMgPSBpbWFnZW5lc1NlbGVjY2lvbmFkYXMubGVuZ3RoOw0KDQogICAgICAgICAgICBpbWFnZW5lc1NlbGVjY2lvbmFkYXMuZm9yRWFjaCgoaW1nLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IGltZy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdXJsJyk7DQogICAgICAgICAgICAgICAgY29uc3Qgbm9tYnJlID0gYGltYWdlbl9zZWxlY2Npb25hZGFfJHtpbmRleCArIDF9LnBuZ2A7DQoNCiAgICAgICAgICAgICAgICBmZXRjaCh1cmwpDQogICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmJsb2IoKSkNCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oYmxvYiA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICB6aXAuZmlsZShub21icmUsIGJsb2IpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkRG93bmxvYWRzKys7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29tcGxldGVkRG93bmxvYWRzID09PSB0b3RhbEltYWdlcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHppcC5nZW5lcmF0ZUFzeW5jKHsgdHlwZTogImJsb2IiIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChjb250ZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChjb250ZW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuZG93bmxvYWQgPSAiaW1hZ2VuZXNfc2VsZWNjaW9uYWRhcy56aXAiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuY2xpY2soKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGEuaHJlZik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3IgYWwgZGVzY2FyZ2FyIGxhIGltYWdlbiBzZWxlY2Npb25hZGE6IiwgZXJyb3IpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbW9zdHJhck1lbnNhamVJbWc0KCJFcnJvciBhbCBkZXNjYXJnYXIgdW5hIGltYWdlbiBzZWxlY2Npb25hZGEuIik7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBkZXNjYXJnYXJHYWxlcmlhKCkgew0KICAgICAgICAgICAgY29uc3QgaW1hZ2VuZXMgPSBnYWxlcmlhSW1hZ2VuZXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2ltZycpOw0KICAgICAgICAgICAgaWYgKGltYWdlbmVzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgIG1vc3RyYXJNZW5zYWplSW1nNCgiTm8gaGF5IGltw6FnZW5lcyBlbiBsYSBnYWxlcsOtYSBwYXJhIGRlc2Nhcmdhci4iKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IHppcCA9IG5ldyBKU1ppcCgpOw0KICAgICAgICAgICAgbGV0IGNvbXBsZXRlZERvd25sb2FkcyA9IDA7DQogICAgICAgICAgICBjb25zdCB0b3RhbEltYWdlcyA9IGltYWdlbmVzLmxlbmd0aDsNCg0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbEltYWdlczsgaSsrKSB7DQogICAgICAgICAgICAgICAgY29uc3QgaW1nID0gaW1hZ2VuZXNbaV07DQogICAgICAgICAgICAgICAgY29uc3QgdXJsID0gaW1nLmdldEF0dHJpYnV0ZSgnZGF0YS11cmwnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBub21icmUgPSBgaW1hZ2VuX2dhbGVyaWFfJHtpICsgMX0ucG5nYDsNCg0KICAgICAgICAgICAgICAgIGZldGNoKHVybCkNCiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuYmxvYigpKQ0KICAgICAgICAgICAgICAgICAgICAudGhlbihibG9iID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHppcC5maWxlKG5vbWJyZSwgYmxvYik7DQogICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWREb3dubG9hZHMrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb21wbGV0ZWREb3dubG9hZHMgPT09IHRvdGFsSW1hZ2VzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgemlwLmdlbmVyYXRlQXN5bmMoeyB0eXBlOiAiYmxvYiIgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGNvbnRlbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGNvbnRlbnQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5kb3dubG9hZCA9ICJnYWxlcmlhX2RlX2ltYWdlbmVzLnppcCI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5jbGljaygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYS5ocmVmKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBhbCBkZXNjYXJnYXIgbGEgaW1hZ2VuIGRlIGxhIGdhbGVyw61hOiIsIGVycm9yKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RyYXJNZW5zYWplSW1nNCgiRXJyb3IgYWwgZGVzY2FyZ2FyIHVuYSBpbWFnZW4gZGUgbGEgZ2FsZXLDrWEuIik7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gc2VsZWNjaW9uYXJJbWFnZW4oZXZlbnQpIHsNCiAgICAgICAgICAgIGNvbnN0IGltZyA9IGV2ZW50LnRhcmdldDsNCiAgICAgICAgICAgIGltZy5jbGFzc0xpc3QudG9nZ2xlKCdzZWxlY2Npb25hZGEnKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIG1vc3RyYXJNZW5zYWplSW1nNChtZW5zYWplKSB7IC8vIFJlbmFtZWQgdG8gYXZvaWQgY29uZmxpY3QNCiAgICAgICAgICAgIGxldCBtZXNzYWdlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJNZXNzYWdlJyk7IC8vIFRoaXMgaXMgdGhlIG9uZSBpbiBJbWFnZSA0IGNvbnRhaW5lcg0KICAgICAgICAgICAgbWVzc2FnZURpdi50ZXh0Q29udGVudCA9IG1lbnNhamU7DQogICAgICAgICAgICBtZXNzYWdlRGl2LnN0eWxlLm9wYWNpdHkgPSAnMSc7DQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICBtZXNzYWdlRGl2LnN0eWxlLm9wYWNpdHkgPSAnMCc7DQogICAgICAgICAgICB9LCAzMDAwKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEZ1bmNpw7NuIHBhcmEgZ2VuZXJhciB1biBlc3F1ZW1hIChmdW5jacOzbiBnZW7DqXJpY2EsIG5vIHVzYWRhIGRpcmVjdGFtZW50ZSBwb3IgZWwgbnVldm8gbW9kbykNCiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhckVzcXVlbWEoKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygiTGEgZnVuY2nDs24gJ2dlbmVyYXJFc3F1ZW1hJyBoYSBzaWRvIGxsYW1hZGEuIik7DQogICAgICAgICAgICBkaXNwbGF5U3lzdGVtTWVzc2FnZSgiTGEgZnVuY2nDs24gJ2dlbmVyYXJFc3F1ZW1hJyBzZSBoYSBlamVjdXRhZG8uIEFxdcOtIHNlIGdlbmVyYXLDrWEgdW4gZXNxdWVtYS4iKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIE1hcGEgZGUgdGlwb3MgZGUgZGlhZ3JhbWEgYSBzdXMgcGFsYWJyYXMgY2xhdmUgeSBzaW50YXhpcyBNZXJtYWlkDQogICAgICAgIGNvbnN0IGRpYWdyYW1UeXBlTWFwID0gew0KICAgICAgICAgICAgImZsdWpvIjogeyBrcm9raVR5cGU6ICJtZXJtYWlkIiwgbWVybWFpZFN5bnRheDogImdyYXBoIFREIiwgcHJvbXB0S2V5d29yZDogInVuIGZsdWpvIG8gdW4gZ3JhZm8iLCBnZW1pbmlJbnN0cnVjdGlvbjogIk1lcm1haWQsIHVzYW5kbyBsYSBzaW50YXhpcyAnZ3JhcGggVEQnLCBwYXJhIHVuIGZsdWpvIG8gdW4gZ3JhZm8iLCBrcm9raUNvbnRlbnRUeXBlOiAndGV4dC9wbGFpbicgfSwNCiAgICAgICAgICAgICJzZWN1ZW5jaWEiOiB7IGtyb2tpVHlwZTogIm1lcm1haWQiLCBtZXJtYWlkU3ludGF4OiAic2VxdWVuY2VEaWFncmFtIiwgcHJvbXB0S2V5d29yZDogInVuIGRpYWdyYW1hIGRlIHNlY3VlbmNpYSIsIGdlbWluaUluc3RydWN0aW9uOiAiTWVybWFpZCwgdXNhbmRvIGxhIHNpbnRheGlzICdzZXF1ZW5jZURpYWdyYW0nLCBwYXJhIHVuIGRpYWdyYW1hIGRlIHNlY3VlbmNpYSIsIGtyb2tpQ29udGVudFR5cGU6ICd0ZXh0L3BsYWluJyB9LA0KICAgICAgICAgICAgImNsYXNlcyI6IHsga3Jva2lUeXBlOiAibWVybWFpZCIsIG1lcm1haWRTeW50YXg6ICJjbGFzc0RpYWdyYW0iLCBwcm9tcHRLZXl3b3JkOiAidW4gZGlhZ3JhbWEgZGUgY2xhc2VzIiwgZ2VtaW5pSW5zdHJ1Y3Rpb246ICJNZXJtYWlkLCB1c2FuZG8gbGEgc2ludGF4aXMgJ2NsYXNzRGlhZ3JhbScsIHBhcmEgdW4gZGlhZ3JhbWEgZGUgY2xhc2VzIiwga3Jva2lDb250ZW50VHlwZTogJ3RleHQvcGxhaW4nIH0sDQogICAgICAgICAgICAiZXN0YWRvcyI6IHsga3Jva2lUeXBlOiAibWVybWFpZCIsIG1lcm1haWRTeW50YXg6ICJzdGF0ZURpYWdyYW0tdjIiLCBwcm9tcHRLZXl3b3JkOiAidW4gZGlhZ3JhbWEgZGUgZXN0YWRvcyIsIGdlbWluaUluc3RydWN0aW9uOiAiTWVybWFpZCwgdXNhbmRvIGxhIHNpbnRheGlzICdzdGF0ZURpYWdyYW0tdjInLCBwYXJhIHVuIGRpYWdyYW1hIGRlIGVzdGFkb3MiLCBrcm9raUNvbnRlbnRUeXBlOiAndGV4dC9wbGFpbicgfSwNCiAgICAgICAgICAgICJnYW50dCI6IHsga3Jva2lUeXBlOiAibWVybWFpZCIsIG1lcm1haWRTeW50YXg6ICJnYW50dCIsIHByb21wdEtleXdvcmQ6ICJ1biBkaWFncmFtYSBkZSBHYW50dCIsIGdlbWluaUluc3RydWN0aW9uOiAiTWVybWFpZCwgdXNhbmRvIGxhIHNpbnRheGlzICdnYW50dCcsIHBhcmEgdW4gZGlhZ3JhbWEgZGUgR2FudHQiLCBrcm9raUNvbnRlbnRUeXBlOiAndGV4dC9wbGFpbicgfSwNCiAgICAgICAgICAgICJ0YXJ0YSI6IHsga3Jva2lUeXBlOiAibWVybWFpZCIsIG1lcm1haWRTeW50YXg6ICJwaWUiLCBwcm9tcHRLZXl3b3JkOiAidW4gZGlhZ3JhbWEgZGUgdGFydGEiLCBnZW1pbmlJbnN0cnVjdGlvbjogIk1lcm1haWQsIHVzYW5kbyBsYSBzaW50YXhpcyAncGllJywgcGFyYSB1biBkaWFncmFtYSBkZSB0YXJ0YSIsIGtyb2tpQ29udGVudFR5cGU6ICd0ZXh0L3BsYWluJyB9LA0KICAgICAgICAgICAgInJlcXVpc2l0b3MiOiB7IGtyb2tpVHlwZTogIm1lcm1haWQiLCBtZXJtYWlkU3ludGF4OiAicmVxdWlyZW1lbnREaWFncmFtIiwgcHJvbXB0S2V5d29yZDogInVuIGRpYWdyYW1hIGRlIHJlcXVpc2l0b3MiLCBnZW1pbmlJbnN0cnVjdGlvbjogIk1lcm1haWQsIHVzYW5kbyBsYSBzaW50YXhpcyAncmVxdWlyZW1lbnREaWFncmFtJywgcGFyYSB1biBkaWFncmFtYSBkZSByZXF1aXNpdG9zIiwga3Jva2lDb250ZW50VHlwZTogJ3RleHQvcGxhaW4nIH0sDQogICAgICAgICAgICAiZ2l0IjogeyBrcm9raVR5cGU6ICJtZXJtYWlkIiwgbWVybWFpZFN5bnRheDogImdpdEdyYXBoIiwgcHJvbXB0S2V5d29yZDogInVuIGRpYWdyYW1hIGRlIGdyYWZvIGRlIEdpdCIsIGdlbWluaUluc3RydWN0aW9uOiAiTWVybWFpZCwgdXNhbmRvIGxhIHNpbnRheGlzICdnaXRHcmFwaCcsIHBhcmEgdW4gZGlhZ3JhbWEgZGUgZ3JhZm8gZGUgR2l0Iiwga3Jva2lDb250ZW50VHlwZTogJ3RleHQvcGxhaW4nIH0sDQogICAgICAgICAgICAidmlhamUiOiB7IGtyb2tpVHlwZTogIm1lcm1haWQiLCBtZXJtYWlkU3ludGF4OiAiam91cm5leSIsIHByb21wdEtleXdvcmQ6ICJ1biBkaWFncmFtYSBkZSB2aWFqZSBkZSB1c3VhcmlvIiwgZ2VtaW5pSW5zdHJ1Y3Rpb246ICJNZXJtYWlkLCB1c2FuZG8gbGEgc2ludGF4aXMgJ2pvdXJuZXknLCBwYXJhIHVuIGRpYWdyYW1hIGRlIHZpYWplIGRlIHVzdWFyaW8iLCBrcm9raUNvbnRlbnRUeXBlOiAndGV4dC9wbGFpbicgfSwNCiAgICAgICAgICAgICJudWJlIGRlIHBhbGFicmFzIjogeyBrcm9raVR5cGU6ICJ3b3JkY2xvdWQiLCBwcm9tcHRLZXl3b3JkOiAidW5hIG51YmUgZGUgcGFsYWJyYXMiLCBnZW1pbmlJbnN0cnVjdGlvbjogInVuYSBsaXN0YSBkZSBwYWxhYnJhcyBjbGF2ZSB5IHN1IGltcG9ydGFuY2lhIChwZXNvIHJlbGF0aXZvKSBwYXJhIHVuYSBudWJlIGRlIHBhbGFicmFzLiBMYSBzYWxpZGEgZGViZSBzZXIgdW5hIGxpc3RhIGRlIHBhbGFicmFzLCBjYWRhIHVuYSBzZWd1aWRhIGRlIGRvcyBwdW50b3MgeSB1biBuw7ptZXJvIChlai4gJ3BhbGFicmE6MTAnKSwgc2VwYXJhZGFzIHBvciBjb21hcyBvIHNhbHRvcyBkZSBsw61uZWEuIE5vIGluY2x1eWFzIG5pbmfDum4gdGV4dG8gZXhwbGljYXRpdm8sIHNvbG8gbGEgbGlzdGEgZGUgcGFsYWJyYXMgeSBwZXNvcy4iLCBrcm9raUNvbnRlbnRUeXBlOiAndGV4dC9wbGFpbicgfSwNCiAgICAgICAgICAgICJ3b3JkIGNsb3VkIjogeyBrcm9raVR5cGU6ICJ3b3JkY2xvdWQiLCBwcm9tcHRLZXl3b3JkOiAidW5hIG51YmUgZGUgcGFsYWJyYXMiLCBnZW1pbmlJbnN0cnVjdGlvbjogInVuYSBsaXN0YSBkZSBwYWxhYnJhcyBjbGF2ZSB5IHN1IGltcG9ydGFuY2lhIChwZXNvIHJlbGF0aXZvKSBwYXJhIHVuYSBudWJlIGRlIHBhbGFicmFzLiBMYSBzYWxpZGEgZGViZSBzZXIgdW5hIGxpc3RhIGRlIHBhbGFicmFzLCBjYWRhIHVuYSBzZWd1aWRhIGRlIGRvcyBwdW50b3MgeSB1biBuw7ptZXJvIChlai4gJ3BhbGFicmE6MTAnKSwgc2VwYXJhZGFzIHBvciBjb21hcyBvIHNhbHRvcyBkZSBsw61uZWEuIE5vIGluY2x1eWFzIG5pbmfDum4gdGV4dG8gZXhwbGljYXRpdm8sIHNvbG8gbGEgbGlzdGEgZGUgcGFsYWJyYXMgeSBwZXNvcy4iLCBrcm9raUNvbnRlbnRUeXBlOiAndGV4dC9wbGFpbicgfSwNCiAgICAgICAgICAgICJibG9ja2RpYWciOiB7IGtyb2tpVHlwZTogImJsb2NrZGlhZyIsIHByb21wdEtleXdvcmQ6ICJ1biBkaWFncmFtYSBCbG9ja0RpYWcgKGRlIGJsb3F1ZXMpIiwgZ2VtaW5pSW5zdHJ1Y3Rpb246ICJCbG9ja0RpYWcgcGFyYSB1biBkaWFncmFtYSBkZSBibG9xdWVzLiBQcm9wb3JjaW9uYSBlbCBjw7NkaWdvIEJsb2NrRGlhZyBzaW4gZXhwbGljYWNpb25lcyBuaSB0ZXh0byBhZGljaW9uYWwuIiwga3Jva2lDb250ZW50VHlwZTogJ3RleHQvcGxhaW4nIH0sDQogICAgICAgICAgICAiYnBtbiI6IHsga3Jva2lUeXBlOiAiYnBtbiIsIHByb21wdEtleXdvcmQ6ICJ1biBkaWFncmFtYSBCUE1OIiwgZ2VtaW5pSW5zdHJ1Y3Rpb246ICJCUE1OIHBhcmEgdW4gZGlhZ3JhbWEgZGUgcHJvY2VzbyBkZSBuZWdvY2lvLiBQcm9wb3JjaW9uYSBlbCBjw7NkaWdvIEJQTU4gc2luIGV4cGxpY2FjaW9uZXMgbmkgdGV4dG8gYWRpY2lvbmFsLiIsIGtyb2tpQ29udGVudFR5cGU6ICd0ZXh0L3BsYWluJyB9LA0KICAgICAgICAgICAgImJ5dGVmaWVsZCI6IHsga3Jva2lUeXBlOiAiYnl0ZWZpZWxkIiwgcHJvbXB0S2V5d29yZDogInVuIGRpYWdyYW1hIEJ5dGVmaWVsZCAoZGUgY2FtcG8gZGUgYnl0ZXMpIiwgZ2VtaW5pSW5zdHJ1Y3Rpb246ICJCeXRlZmllbGQgcGFyYSB1biBkaWFncmFtYSBkZSBjYW1wbyBkZSBieXRlcy4gUHJvcG9yY2lvbmEgZWwgY8OzZGlnbyBCeXRlZmllbGQgc2luIGV4cGxpY2FjaW9uZXMgbmkgdGV4dG8gYWRpY2lvbmFsLiIsIGtyb2tpQ29udGVudFR5cGU6ICd0ZXh0L3BsYWluJyB9LA0KICAgICAgICAgICAgInNlcWRpYWciOiB7IGtyb2tpVHlwZTogInNlcWRpYWciLCBwcm9tcHRLZXl3b3JkOiAidW4gZGlhZ3JhbWEgU2VxRGlhZyAoZGUgc2VjdWVuY2lhKSIsIGdlbWluaUluc3RydWN0aW9uOiAiU2VxRGlhZyBwYXJhIHVuIGRpYWdyYW1hIGRlIHNlY3VlbmNpYS4gUHJvcG9yY2lvbmEgZWwgY8OzZGlnbyBTZXFEaWFnIHNpbiBleHBsaWNhY2lvbmVzIG5pIHRleHRvIGFkaWNpb25hbC4iLCBrcm9raUNvbnRlbnRUeXBlOiAndGV4dC9wbGFpbicgfSwNCiAgICAgICAgICAgICJhY3RkaWFnIjogeyBrcm9raVR5cGU6ICJhY3RkaWFnIiwgcHJvbXB0S2V5d29yZDogInVuIGRpYWdyYW1hIEFjdERpYWcgKGRlIGFjdGl2aWRhZCkiLCBnZW1pbmlJbnN0cnVjdGlvbjogIkFjdERpYWcgcGFyYSB1biBkaWFncmFtYSBkZSBhY3RpdmlkYWQuIFByb3BvcmNpb25hIGVsIGPDs2RpZ28gQWN0RGlhZyBzaW4gZXhwbGljYWNpb25lcyBuaSB0ZXh0byBhZGljaW9uYWwuIiwga3Jva2lDb250ZW50VHlwZTogJ3RleHQvcGxhaW4nIH0sDQogICAgICAgICAgICAibndkaWFnIjogeyBrcm9raVR5cGU6ICJud2RpYWciLCBwcm9tcHRLZXl3b3JkOiAidW4gZGlhZ3JhbWEgTndEaWFnIChkZSByZWQpIiwgZ2VtaW5pSW5zdHJ1Y3Rpb246ICJOd0RpYWcgcGFyYSB1biBkaWFncmFtYSBkZSByZWQuIFByb3BvcmNpb25hIGVsIGPDs2RpZ28gTndEaWFnIHNpbiBleHBsaWNhY2lvbmVzIG5pIHRleHRvIGFkaWNpb25hbC4iLCBrcm9raUNvbnRlbnRUeXBlOiAndGV4dC9wbGFpbicgfSwNCiAgICAgICAgICAgICJwYWNrZXRkaWFnIjogeyBrcm9raVR5cGU6ICJwYWNrZXRkaWFnIiwgcHJvbXB0S2V5d29yZDogInVuIGRpYWdyYW1hIFBhY2tldERpYWcgKGRlIHBhcXVldGVzKSIsIGdlbWluaUluc3RydWN0aW9uOiAiUGFja2V0RGlhZyBwYXJhIHVuIGRpYWdyYW1hIGRlIHBhcXVldGVzLiBQcm9wb3JjaW9uYSBlbCBjw7NkaWdvIFBhY2tldERpYWcgc2luIGV4cGxpY2FjaW9uZXMgbmkgdGV4dG8gYWRpY2lvbmFsLiIsIGtyb2tpQ29udGVudFR5cGU6ICd0ZXh0L3BsYWluJyB9LA0KICAgICAgICAgICAgInJhY2tkaWFnIjogeyBrcm9raVR5cGU6ICJyYWNrZGlhZyIsIHByb21wdEtleXdvcmQ6ICJ1biBkaWFncmFtYSBSYWNrRGlhZyAoZGUgcmFjaykiLCBnZW1pbmlJbnN0cnVjdGlvbjogIlJhY2tEaWFnIHBhcmEgdW4gZGlhZ3JhbWEgZGUgcmFjay4gUHJvcG9yY2lvbmEgZWwgY8OzZGlnbyBSYWNrRGlhZyBzaW4gZXhwbGljYWNpb25lcyBuaSB0ZXh0byBhZGljaW9uYWwuIiwga3Jva2lDb250ZW50VHlwZTogJ3RleHQvcGxhaW4nIH0sDQogICAgICAgICAgICAiYzRwbGFudHVtbCI6IHsga3Jva2lUeXBlOiAiYzRwbGFudHVtbCIsIHByb21wdEtleXdvcmQ6ICJ1biBkaWFncmFtYSBDNCBjb24gUGxhbnRVTUwiLCBnZW1pbmlJbnN0cnVjdGlvbjogIkM0IFBsYW50VU1MIHBhcmEgdW4gZGlhZ3JhbWEgQzQuIFByb3BvcmNpb25hIGVsIGPDs2RpZ28gQzQgUGxhbnRVTUwgc2luIGV4cGxpY2FjaW9uZXMgbmkgdGV4dG8gYWRpY2lvbmFsLiIsIGtyb2tpQ29udGVudFR5cGU6ICd0ZXh0L3BsYWluJyB9LA0KICAgICAgICAgICAgImQyIjogeyBrcm9raVR5cGU6ICJkMiIsIHByb21wdEtleXdvcmQ6ICJ1biBkaWFncmFtYSBEMiIsIGdlbWluaUluc3RydWN0aW9uOiAiRDIgcGFyYSB1biBkaWFncmFtYSBEMi4gUHJvcG9yY2lvbmEgZWwgY8OzZGlnbyBEMiBzaW4gZXhwbGljYWNpb25lcyBuaSB0ZXh0byBhZGljaW9uYWwuIiwga3Jva2lDb250ZW50VHlwZTogJ3RleHQvcGxhaW4nIH0sDQogICAgICAgICAgICAiZGJtbCI6IHsga3Jva2lUeXBlOiAiZGJtbCIsIHByb21wdEtleXdvcmQ6ICJ1biBkaWFncmFtYSBEQk1MIiwgZ2VtaW5pSW5zdHJ1Y3Rpb246ICJEQk1MIHBhcmEgdW4gZGlhZ3JhbWEgZGUgYmFzZSBkZSBkYXRvcy4gUHJvcG9yY2lvbmEgZWwgY8OzZGlnbyBEQk1MIHNpbiBleHBsaWNhY2lvbmVzIG5pIHRleHRvIGFkaWNpb25hbC4iLCBrcm9raUNvbnRlbnRUeXBlOiAndGV4dC9wbGFpbicgfSwNCiAgICAgICAgICAgICJkaXRhYSI6IHsga3Jva2lUeXBlOiAiZGl0YWEiLCBwcm9tcHRLZXl3b3JkOiAidW4gZGlhZ3JhbWEgRGl0YWEiLCBnZW1pbmlJbnN0cnVjdGlvbjogIkRpdGFhIHBhcmEgdW4gZGlhZ3JhbWEgRGl0YWEuIFByb3BvcmNpb25hIGVsIGPDs2RpZ28gRGl0YWEgc2luIGV4cGxpY2FjaW9uZXMgbmkgdGV4dG8gYWRpY2lvbmFsLiIsIGtyb2tpQ29udGVudFR5cGU6ICd0ZXh0L3BsYWluJyB9LA0KICAgICAgICAgICAgImVyZCI6IHsga3Jva2lUeXBlOiAiZXJkIiwgcHJvbXB0S2V5d29yZDogInVuIGRpYWdyYW1hIEVSRCIsIGdlbWluaUluc3RydWN0aW9uOiAiRXJkIHBhcmEgdW4gZGlhZ3JhbWEgZGUgZW50aWRhZC1yZWxhY2nDs24uIFByb3BvcmNpb25hIGVsIGPDs2RpZ28gRXJkIHNpbiBleHBsaWNhY2lvbmVzIG5pIHRleHRvIGFkaWNpb25hbC4iLCBrcm9raUNvbnRlbnRUeXBlOiAndGV4dC9wbGFpbicgfSwNCiAgICAgICAgICAgICJleGNhbGlkcmF3IjogeyBrcm9raVR5cGU6ICJleGNhbGlkcmF3IiwgcHJvbXB0S2V5d29yZDogInVuIGRpYWdyYW1hIEV4Y2FsaWRyYXciLCBnZW1pbmlJbnN0cnVjdGlvbjogIkV4Y2FsaWRyYXcgcGFyYSB1biBkaWFncmFtYSB0aXBvIGJvY2V0by4gUHJvcG9yY2lvbmEgZWwgY8OzZGlnbyBFeGNhbGlkcmF3IHNpbiBleHBsaWNhY2lvbmVzIG5pIHRleHRvIGFkaWNpb25hbC4iLCBrcm9raUNvbnRlbnRUeXBlOiAndGV4dC9wbGFpbicgfSwNCiAgICAgICAgICAgICJncmFwaHZpeiI6IHsga3Jva2lUeXBlOiAiZ3JhcGh2aXoiLCBwcm9tcHRLZXl3b3JkOiAidW4gZGlhZ3JhbWEgR3JhcGhWaXoiLCBnZW1pbmlJbnN0cnVjdGlvbjogIkdyYXBoVml6IHBhcmEgdW4gZGlhZ3JhbWEgZGUgZ3JhZm8uIFByb3BvcmNpb25hIGVsIGPDs2RpZ28gR3JhcGhWaXogc2luIGV4cGxpY2FjaW9uZXMgbmkgdGV4dG8gYWRpY2lvbmFsLiIsIGtyb2tpQ29udGVudFR5cGU6ICd0ZXh0L3BsYWluJyB9LA0KICAgICAgICAgICAgIm5vbW5vbWwiOiB7IGtyb2tpVHlwZTogIm5vbW5vbWwiLCBwcm9tcHRLZXl3b3JkOiAidW4gZGlhZ3JhbWEgTm9tbm9tbCIsIGdlbWluaUluc3RydWN0aW9uOiAiTm9tbm9tbCBwYXJhIHVuIGRpYWdyYW1hIE5vbW5vbWwuIFByb3BvcmNpb25hIGVsIGPDs2RpZ28gTm9tbm9tbCBzaW4gZXhwbGljYWNpb25lcyBuaSB0ZXh0byBhZGljaW9uYWwuIiwga3Jva2lDb250ZW50VHlwZTogJ3RleHQvcGxhaW4nIH0sDQogICAgICAgICAgICAicGlrY2hyIjogeyBrcm9raVR5cGU6ICJwaWtjaHIiLCBwcm9tcHRLZXl3b3JkOiAidW4gZGlhZ3JhbWEgUGlrY2hyIiwgZ2VtaW5pSW5zdHJ1Y3Rpb246ICJQaWtjaHIgcGFyYSB1biBkaWFncmFtYSBQaWtjaHIuIFByb3BvcmNpb25hIGVsIGPDs2RpZ28gUGlrY2hyIHNpbiBleHBsaWNhY2lvbmVzIG5pIHRleHRvIGFkaWNpb25hbC4iLCBrcm9raUNvbnRlbnRUeXBlOiAndGV4dC9wbGFpbicgfSwNCiAgICAgICAgICAgICJwbGFudHVtbCI6IHsga3Jva2lUeXBlOiAicGxhbnR1bWwiLCBwcm9tcHRLZXl3b3JkOiAidW4gZGlhZ3JhbWEgUGxhbnRVTUwiLCBnZW1pbmlJbnN0cnVjdGlvbjogIlBsYW50VU1MIHBhcmEgdW4gZGlhZ3JhbWEgUGxhbnRVTUwuIFByb3BvcmNpb25hIGVsIGPDs2RpZ28gUGxhbnRVTUwgc2luIGV4cGxpY2FjaW9uZXMgbmkgdGV4dG8gYWRpY2lvbmFsLiIsIGtyb2tpQ29udGVudFR5cGU6ICd0ZXh0L3BsYWluJyB9LA0KICAgICAgICAgICAgInN0cnVjdHVyaXpyIjogeyBrcm9raVR5cGU6ICJzdHJ1Y3R1cml6ciIsIHByb21wdEtleXdvcmQ6ICJ1biBkaWFncmFtYSBTdHJ1Y3R1cml6ciIsIGdlbWluaUluc3RydWN0aW9uOiAiU3RydWN0dXJpenIgcGFyYSB1biBkaWFncmFtYSBTdHJ1Y3R1cml6ci4gUHJvcG9yY2lvbmEgZWwgY8OzZGlnbyBTdHJ1Y3R1cml6ciBzaW4gZXhwbGljYWNpb25lcyBuaSB0ZXh0byBhZGljaW9uYWwuIiwga3Jva2lDb250ZW50VHlwZTogJ3RleHQvcGxhaW4nIH0sDQogICAgICAgICAgICAic3ZnYm9iIjogeyBrcm9raVR5cGU6ICJzdmdib2IiLCBwcm9tcHRLZXl3b3JkOiAidW4gZGlhZ3JhbWEgU3ZnYm9iIiwgZ2VtaW5pSW5zdHJ1Y3Rpb246ICJTdmdib2IgcGFyYSB1biBkaWFncmFtYSBBU0NJSS4gUHJvcG9yY2lvbmEgZWwgY8OzZGlnbyBTdmdib2Igc2luIGV4cGxpY2FjaW9uZXMgbmkgdGV4dG8gYWRpY2lvbmFsLiIsIGtyb2tpQ29udGVudFR5cGU6ICd0ZXh0L3BsYWluJyB9LA0KICAgICAgICAgICAgInN5bWJvbGF0b3IiOiB7IGtyb2tpVHlwZTogInN5bWJvbGF0b3IiLCBwcm9tcHRLZXl3b3JkOiAidW4gZGlhZ3JhbWEgU3ltYm9sYXRvciIsIGdlbWluaUluc3RydWN0aW9uOiAiU3ltYm9sYXRvciBwYXJhIHVuIGRpYWdyYW1hIFN5bWJvbGF0b3IuIFByb3BvcmNpb25hIGVsIGPDs2RpZ28gU3ltYm9sYXRvciBzaW4gZXhwbGljYWNpb25lcyBuaSB0ZXh0byBhZGljaW9uYWwuIiwga3Jva2lDb250ZW50VHlwZTogJ3RleHQvcGxhaW4nIH0sDQogICAgICAgICAgICAidGlreiI6IHsga3Jva2lUeXBlOiAidGlreiIsIHByb21wdEtleXdvcmQ6ICJ1biBkaWFncmFtYSBUaWtaIiwgZ2VtaW5pSW5zdHJ1Y3Rpb246ICJUaWtaIHBhcmEgdW4gZGlhZ3JhbWEgVGlrWi4gUHJvcG9yY2lvbmEgZWwgY8OzZGlnbyBUaWtaIHNpbiBleHBsaWNhY2lvbmVzIG5pIHRleHRvIGFkaWNpb25hbC4iLCBrcm9raUNvbnRlbnRUeXBlOiAndGV4dC9wbGFpbicgfSwNCiAgICAgICAgICAgICJ1bWxldCI6IHsga3Jva2lUeXBlOiAidW1sZXQiLCBwcm9tcHRLZXl3b3JkOiAidW4gZGlhZ3JhbWEgVU1sZXQiLCBnZW1pbmlJbnN0cnVjdGlvbjogIlVNbGV0IHBhcmEgdW4gZGlhZ3JhbWEgVU1sZXQuIFByb3BvcmNpb25hIGVsIGPDs2RpZ28gVU1sZXQgc2luIGV4cGxpY2FjaW9uZXMgbmkgdGV4dG8gYWRpY2lvbmFsLiIsIGtyb2tpQ29udGVudFR5cGU6ICd0ZXh0L3BsYWluJyB9LA0KICAgICAgICAgICAgInZlZ2EiOiB7IGtyb2tpVHlwZTogInZlZ2EiLCBwcm9tcHRLZXl3b3JkOiAidW4gZGlhZ3JhbWEgVmVnYSIsIGdlbWluaUluc3RydWN0aW9uOiAiVmVnYSBwYXJhIHVuIGRpYWdyYW1hIFZlZ2EuIFByb3BvcmNpb25hIGVsIGPDs2RpZ28gVmVnYSBKU09OIHNpbiBleHBsaWNhY2lvbmVzIG5pIHRleHRvIGFkaWNpb25hbC4iLCBrcm9raUNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicgfSwNCiAgICAgICAgICAgICJ2ZWdhLWxpdGUiOiB7IGtyb2tpVHlwZTogInZlZ2FsaXRlIiwgcHJvbXB0S2V5d29yZDogInVuIGRpYWdyYW1hIFZlZ2EtTGl0ZSIsIGdlbWluaUluc3RydWN0aW9uOiAiVmVnYS1MaXRlIHBhcmEgdW4gZGlhZ3JhbWEgVmVnYS1MaXRlLiBQcm9wb3JjaW9uYSBlbCBjw7NkaWdvIFZlZ2EtTGl0ZSBKU09OIHNpbiBleHBsaWNhY2lvbmVzIG5pIHRleHRvIGFkaWNpb25hbC4iLCBrcm9raUNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicgfSwNCiAgICAgICAgICAgICJ3YXZlZHJvbSI6IHsga3Jva2lUeXBlOiAid2F2ZWRyb20iLCBwcm9tcHRLZXl3b3JkOiAidW4gZGlhZ3JhbWEgV2F2ZURyb20iLCBnZW1pbmlJbnN0cnVjdGlvbjogIldhdmVEcm9tIHBhcmEgdW4gZGlhZ3JhbWEgZGUgZm9ybWEgZGUgb25kYS4gUHJvcG9yY2lvbmEgZWwgY8OzZGlnbyBXYXZlRHJvbSBKU09OIHNpbiBleHBsaWNhY2lvbmVzIG5pIHRleHRvIGFkaWNpb25hbC4iLCBrcm9raUNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicgfSwNCiAgICAgICAgICAgICJ3aXJldml6IjogeyBrcm9raVR5cGU6ICJ3aXJldml6IiwgcHJvbXB0S2V5d29yZDogInVuIGRpYWdyYW1hIFdpcmVWaXoiLCBnZW1pbmlJbnN0cnVjdGlvbjogIldpcmVWaXogcGFyYSB1biBkaWFncmFtYSBkZSBjYWJsZWFkby4gUHJvcG9yY2lvbmEgZWwgY8OzZGlnbyBXaXJlVml6IFlBTUwgc2luIGV4cGxpY2FjaW9uZXMgbmkgdGV4dG8gYWRpY2lvbmFsLiIsIGtyb2tpQ29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi94LXlhbWwnIH0NCiAgICAgICAgfTsNCg0KDQogICAgICAgIC8vIEZ1bmNpw7NuIHBhcmEgZ2VuZXJhciB1biBlc3F1ZW1hIGludGVyYWN0aXZvIGVuIEhUTUwgdXNhbmRvIGxhIEFQSSBkZSBHZW1pbmkgeSBLcm9raQ0KICAgICAgICBhc3luYyBmdW5jdGlvbiBnZW5lcmFyRXNxdWVtYUludGVyYWN0aXZvSFRNTChtZXNzYWdlKSB7DQogICAgICAgICAgICBsZXQgdG9waWMgPSBtZXNzYWdlOw0KICAgICAgICAgICAgbGV0IGtyb2tpRGlhZ3JhbVR5cGUgPSAibWVybWFpZCI7IC8vIERlZmF1bHQgS3Jva2kgdHlwZQ0KICAgICAgICAgICAgbGV0IG1lcm1haWRTeW50YXggPSAiZ3JhcGggVEQiOyAvLyBEZWZhdWx0IE1lcm1haWQgc3ludGF4IGZvciBmbG93Y2hhcnRzDQogICAgICAgICAgICBsZXQgcHJvbXB0S2V5d29yZCA9ICJ1biBmbHVqbyBvIHVuIGdyYWZvIjsNCiAgICAgICAgICAgIGxldCBnZW1pbmlJbnN0cnVjdGlvbiA9ICJNZXJtYWlkLCB1c2FuZG8gbGEgc2ludGF4aXMgJ2dyYXBoIFREJywgcGFyYSB1biBmbHVqbyBvIHVuIGdyYWZvIjsgLy8gRGVmYXVsdCBpbnN0cnVjdGlvbg0KICAgICAgICAgICAgbGV0IGtyb2tpQ29udGVudFR5cGUgPSAndGV4dC9wbGFpbic7DQoNCiAgICAgICAgICAgIGxldCBmb3VuZFR5cGUgPSBmYWxzZTsNCiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRpYWdyYW1UeXBlTWFwKSkgew0KICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIHJlZ2V4IHRvIG1hdGNoIHRoZSBkaWFncmFtIHR5cGUsIG1ha2luZyBpdCBmbGV4aWJsZSBmb3IgImRpYWdyYW1hIGRlIFggc29icmUgWSIgb3IganVzdCAiWCBzb2JyZSBZIg0KICAgICAgICAgICAgICAgIC8vIEFsc28gaGFuZGxlICJudWJlIGRlIHBhbGFicmFzIiBhbmQgIndvcmQgY2xvdWQiIHNwZWNpZmljYWxseQ0KICAgICAgICAgICAgICAgIC8vIFRoZSByZWdleCBub3cgbG9va3MgZm9yIHRoZSBzcGVjaWZpYyBrZXkgKGUuZy4sICJibG9ja2RpYWciLCAibnViZSBkZSBwYWxhYnJhcyIpDQogICAgICAgICAgICAgICAgLy8gb3IgY29tbW9uIGRlc2NyaXB0aXZlIHBocmFzZXMgKGUuZy4sICJkaWFncmFtYSBkZSBmbHVqbyIsICJkaWFncmFtYSBkZSBibG9xdWVzIikNCiAgICAgICAgICAgICAgICBjb25zdCBjb21tb25QaHJhc2VSZWdleCA9IG5ldyBSZWdFeHAoYCg/OmRpYWdyYW1hIGRlXFxzKyk/KCR7a2V5LnJlcGxhY2UoLy0vZywgJ1xccyotPycpfSlcXHMrc29icmVcXHMrKC4rKWAsICdpJyk7DQogICAgICAgICAgICAgICAgY29uc3QgZGlyZWN0TWF0Y2ggPSBtZXNzYWdlLm1hdGNoKG5ldyBSZWdFeHAoYF4oJHtrZXl9KVxccytzb2JyZVxccysoLispYCwgJ2knKSk7DQogICAgICAgICAgICAgICAgY29uc3QgcGhyYXNlTWF0Y2ggPSBtZXNzYWdlLm1hdGNoKGNvbW1vblBocmFzZVJlZ2V4KTsNCg0KICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IG51bGw7DQogICAgICAgICAgICAgICAgaWYgKGRpcmVjdE1hdGNoKSB7DQogICAgICAgICAgICAgICAgICAgIG1hdGNoID0gZGlyZWN0TWF0Y2g7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwaHJhc2VNYXRjaCkgew0KICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IHBocmFzZU1hdGNoOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChtYXRjaCkgew0KICAgICAgICAgICAgICAgICAgICBrcm9raURpYWdyYW1UeXBlID0gdmFsdWUua3Jva2lUeXBlOw0KICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUubWVybWFpZFN5bnRheCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWVybWFpZFN5bnRheCA9IHZhbHVlLm1lcm1haWRTeW50YXg7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcHJvbXB0S2V5d29yZCA9IHZhbHVlLnByb21wdEtleXdvcmQ7DQogICAgICAgICAgICAgICAgICAgIGdlbWluaUluc3RydWN0aW9uID0gdmFsdWUuZ2VtaW5pSW5zdHJ1Y3Rpb247DQogICAgICAgICAgICAgICAgICAgIGtyb2tpQ29udGVudFR5cGUgPSB2YWx1ZS5rcm9raUNvbnRlbnRUeXBlOyAvLyBTZXQgdGhlIGNvcnJlY3QgY29udGVudCB0eXBlDQogICAgICAgICAgICAgICAgICAgIHRvcGljID0gbWF0Y2hbMl0udHJpbSgpOyAvLyBFeHRyYWN0IHRoZSBhY3R1YWwgdG9waWMNCiAgICAgICAgICAgICAgICAgICAgZm91bmRUeXBlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7IC8vIEZvdW5kIGEgbWF0Y2gsIHN0b3AgY2hlY2tpbmcNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIElmIG5vIHNwZWNpZmljIGRpYWdyYW0gdHlwZSBpcyBtZW50aW9uZWQsIGFzc3VtZSB0aGUgd2hvbGUgbWVzc2FnZSBpcyB0aGUgdG9waWMgZm9yIGEgZGVmYXVsdCBmbG93Y2hhcnQNCiAgICAgICAgICAgIGlmICghZm91bmRUeXBlKSB7DQogICAgICAgICAgICAgICAgdG9waWMgPSBtZXNzYWdlOw0KICAgICAgICAgICAgICAgIC8vIERlZmF1bHRzIGFyZSBhbHJlYWR5IHNldA0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBkaXNwbGF5U3lzdGVtTWVzc2FnZShgR2VuZXJhbmRvICR7cHJvbXB0S2V5d29yZH0gcGFyYTogIiR7dG9waWN9Ii4uLmApOw0KDQogICAgICAgICAgICBsZXQgZ2VtaW5pUHJvbXB0Rm9yRGlhZ3JhbTsNCiAgICAgICAgICAgIGlmIChrcm9raURpYWdyYW1UeXBlID09PSAid29yZGNsb3VkIikgew0KICAgICAgICAgICAgICAgIGdlbWluaVByb21wdEZvckRpYWdyYW0gPSBgR2VuZXJhICR7Z2VtaW5pSW5zdHJ1Y3Rpb259IHNvYnJlICIke3RvcGljfSIuYDsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoa3Jva2lEaWFncmFtVHlwZSA9PT0gIm1lcm1haWQiKSB7DQogICAgICAgICAgICAgICAgZ2VtaW5pUHJvbXB0Rm9yRGlhZ3JhbSA9IGBHZW5lcmEgdW5hIGRlc2NyaXBjacOzbiBkZSBkaWFncmFtYSBlbiBmb3JtYXRvICR7Z2VtaW5pSW5zdHJ1Y3Rpb259IHNvYnJlICIke3RvcGljfSIuIEVsIGRpYWdyYW1hIGRlYmUgcmVzdW1pciBsb3MgcHVudG9zIGNsYXZlIGRlIG1hbmVyYSBtdXkgZGV0YWxsYWRhLCBzZW5jaWxsYSB5IGNsYXJhLiAqKlV0aWxpemEgZWwgZm9ybWF0byBJRFtUZXh0byBkZWwgTm9kb10gcGFyYSBkZWZpbmlyIGxvcyBub2Rvcy4gQXNlZ8O6cmF0ZSBkZSBxdWUgSUQgc2VhIHVuIGlkZW50aWZpY2Fkb3Igc2ltcGxlIChzaW4gZXNwYWNpb3MgbmkgY2FyYWN0ZXJlcyBlc3BlY2lhbGVzKSB5IFRleHRvIGRlbCBOb2RvIHNlYSBlbCB0ZXh0byBkZXNjcmlwdGl2byBkZW50cm8gZGUgbG9zIGNvcmNoZXRlcy4gTm8gdXNlcyBwYXLDqW50ZXNpcyAoKSBvIGNvcmNoZXRlcyBhbmlkYWRvcyBbXSBkZW50cm8gZGUgbGEgZGVmaW5pY2nDs24gZGVsIG5vZG8sIHNvbG8gSURbVGV4dG8gZGVsIE5vZG9dLiBDYWRhIGRlY2xhcmFjacOzbiBkZSBub2RvIG8gY29uZXhpw7NuIGRlYmUgdGVybWluYXIgY29uIHVuIHB1bnRvIHkgY29tYSAoOykgc2kgbm8gZXMgbGEgw7psdGltYSBsw61uZWEgZGVsIGJsb3F1ZS4gTm8gaW5jbHV5YXMgbmluZ8O6biB0ZXh0byBleHBsaWNhdGl2bywgc29sbyBlbCBjw7NkaWdvIE1lcm1haWQuKipgOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyBGb3Igb3RoZXIgS3Jva2kgdHlwZXMsIGFzayBHZW1pbmkgdG8gZ2VuZXJhdGUgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGNvZGUNCiAgICAgICAgICAgICAgICBnZW1pbmlQcm9tcHRGb3JEaWFncmFtID0gYEdlbmVyYSBlbCBjw7NkaWdvICR7a3Jva2lEaWFncmFtVHlwZX0gcGFyYSAke2dlbWluaUluc3RydWN0aW9ufSBzb2JyZSAiJHt0b3BpY30iLiBQcm9wb3JjaW9uYSBzb2xvIGVsIGPDs2RpZ28sIHNpbiBleHBsaWNhY2lvbmVzIG5pIHRleHRvIGFkaWNpb25hbC5gOw0KICAgICAgICAgICAgfQ0KDQoNCiAgICAgICAgICAgIGNvbnN0IGdlbWluaVBheWxvYWQgPSB7DQogICAgICAgICAgICAgICAgY29udGVudHM6IFt7IHJvbGU6ICd1c2VyJywgcGFydHM6IFt7IHRleHQ6IGdlbWluaVByb21wdEZvckRpYWdyYW0gfV0gfV0sDQogICAgICAgICAgICAgICAgZ2VuZXJhdGlvbkNvbmZpZzogew0KICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogMC43LA0KICAgICAgICAgICAgICAgICAgICB0b3BQOiAwLjk1LA0KICAgICAgICAgICAgICAgICAgICB0b3BLOiA0MCwNCiAgICAgICAgICAgICAgICAgICAgbWF4T3V0cHV0VG9rZW5zOiAyMDQ4LA0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBsZXQgZGlhZ3JhbVNvdXJjZUNvZGUgPSAnJzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyBQYXNvIDE6IE9idGVuZXIgZWwgY8OzZGlnbyBmdWVudGUgZGVsIGRpYWdyYW1hIGRlIEdlbWluaQ0KICAgICAgICAgICAgICAgIGNvbnN0IGdlbWluaVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYXBpVXJsLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZ2VtaW5pUGF5bG9hZCkNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmICghZ2VtaW5pUmVzcG9uc2Uub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgZ2VtaW5pUmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBUEkgcmVzcG9uc2Ugbm90IE9LIChHZW5lcmFjacOzbiBkZSBjw7NkaWdvIGRlIGRpYWdyYW1hIGRlIEdlbWluaSk6JywgZ2VtaW5pUmVzcG9uc2Uuc3RhdHVzLCBnZW1pbmlSZXNwb25zZS5zdGF0dXNUZXh0LCBlcnJvclRleHQpOw0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGRlIEFQSSAoR2VuZXJhY2nDs24gZGUgY8OzZGlnbyBkZSBkaWFncmFtYSBkZSBHZW1pbmkpOiAke2dlbWluaVJlc3BvbnNlLnN0YXR1c30gJHtnZW1pbmlSZXNwb25zZS5zdGF0dXNUZXh0fSAtICR7ZXJyb3JUZXh0fWApOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IGdlbWluaURhdGEgPSBhd2FpdCBnZW1pbmlSZXNwb25zZS5qc29uKCk7DQoNCiAgICAgICAgICAgICAgICBpZiAoZ2VtaW5pRGF0YS5jYW5kaWRhdGVzICYmIGdlbWluaURhdGEuY2FuZGlkYXRlcy5sZW5ndGggPiAwICYmDQogICAgICAgICAgICAgICAgICAgIGdlbWluaURhdGEuY2FuZGlkYXRlc1swXS5jb250ZW50ICYmIGdlbWluaURhdGEuY2FuZGlkYXRlc1swXS5jb250ZW50LnBhcnRzICYmDQogICAgICAgICAgICAgICAgICAgIGdlbWluaURhdGEuY2FuZGlkYXRlc1swXS5jb250ZW50LnBhcnRzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgZGlhZ3JhbVNvdXJjZUNvZGUgPSBnZW1pbmlEYXRhLmNhbmRpZGF0ZXNbMF0uY29udGVudC5wYXJ0c1swXS50ZXh0LnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkPDs2RpZ28gZnVlbnRlIGRlbCBkaWFncmFtYSBkZSBHZW1pbmk6IiwgZGlhZ3JhbVNvdXJjZUNvZGUpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBNYXJrZG93biBjb2RlIGJsb2NrIGRlbGltaXRlcnMgaWYgR2VtaW5pIGFkZHMgdGhlbQ0KICAgICAgICAgICAgICAgICAgICBpZiAoZGlhZ3JhbVNvdXJjZUNvZGUuc3RhcnRzV2l0aCgnYGBgJykgJiYgZGlhZ3JhbVNvdXJjZUNvZGUuZW5kc1dpdGgoJ2BgYCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IGRpYWdyYW1Tb3VyY2VDb2RlLnNwbGl0KCdcbicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+IDIgJiYgbGluZXNbMF0uc3RhcnRzV2l0aCgnYGBgJykgJiYgbGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09ICdgYGAnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlhZ3JhbVNvdXJjZUNvZGUgPSBsaW5lcy5zbGljZSgxLCAtMSkuam9pbignXG4nKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCg0KDQogICAgICAgICAgICAgICAgICAgIC8vIFBhc28gMjogRW52aWFyIGVsIGPDs2RpZ28gZnVlbnRlIGRlbCBkaWFncmFtYSBhIGxhIEFQSSBkZSBLcm9raQ0KICAgICAgICAgICAgICAgICAgICBjb25zdCBrcm9raVVybCA9IGBodHRwczovL2tyb2tpLmlvLyR7a3Jva2lEaWFncmFtVHlwZX0vc3ZnYDsgLy8gVXNlIGtyb2tpRGlhZ3JhbVR5cGUgaGVyZQ0KICAgICAgICAgICAgICAgICAgICBjb25zdCBrcm9raVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goa3Jva2lVcmwsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzoga3Jva2lDb250ZW50VHlwZSB9LCAvLyBVc2UgZHluYW1pYyBjb250ZW50IHR5cGUNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGRpYWdyYW1Tb3VyY2VDb2RlDQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGlmICgha3Jva2lSZXNwb25zZS5vaykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQga3Jva2lSZXNwb25zZS50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBUEkgcmVzcG9uc2Ugbm90IE9LIChHZW5lcmFjacOzbiBkZSBkaWFncmFtYSBkZSBLcm9raSk6Jywga3Jva2lSZXNwb25zZS5zdGF0dXMsIGtyb2tpUmVzcG9uc2Uuc3RhdHVzVGV4dCwgZXJyb3JUZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZGUgQVBJIChHZW5lcmFjacOzbiBkZSBkaWFncmFtYSBkZSBLcm9raSk6ICR7a3Jva2lSZXNwb25zZS5zdGF0dXN9ICR7a3Jva2lSZXNwb25zZS5zdGF0dXNUZXh0fSAtICR7ZXJyb3JUZXh0fWApOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlhZ3JhbVN2ZyA9IGF3YWl0IGtyb2tpUmVzcG9uc2UudGV4dCgpOyAvLyBLcm9raSBkZXZ1ZWx2ZSBTVkcgZGlyZWN0YW1lbnRlDQoNCiAgICAgICAgICAgICAgICAgICAgLy8gUGFzbyAzOiBNb3N0cmFyIGVsIFNWRyBlbiBlbCBpZnJhbWUgZGUgcHJldmlzdWFsaXphY2nDs24gSFRNTA0KICAgICAgICAgICAgICAgICAgICBodG1sUHJldmlld1RleHRhcmVhLnZhbHVlID0gZGlhZ3JhbVN2ZzsgLy8gQWxtYWNlbmFyIFNWRyBlbiBlbCB0ZXh0YXJlYQ0KICAgICAgICAgICAgICAgICAgICBjb25zdCBpZnJhbWVEb2MgPSBodG1sUHJldmlld0lmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50Ow0KICAgICAgICAgICAgICAgICAgICBpZnJhbWVEb2Mub3BlbigpOw0KICAgICAgICAgICAgICAgICAgICBpZnJhbWVEb2Mud3JpdGUoZGlhZ3JhbVN2Zyk7DQogICAgICAgICAgICAgICAgICAgIGlmcmFtZURvYy5jbG9zZSgpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIE1vc3RyYXIgbGEgcGVzdGHDsWEgZGUgcHJldmlzdWFsaXphY2nDs24gSFRNTA0KICAgICAgICAgICAgICAgICAgICBzaG93VGFiKCd0YWItY29udGVudC1odG1sLXByZXZpZXcnKTsNCiAgICAgICAgICAgICAgICAgICAgYXJjaGl2b01lbnUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7IC8vIEFzZWd1cmFyc2UgZGUgcXVlIGVsIG1lbsO6IGVzdMOpIGFiaWVydG8NCg0KICAgICAgICAgICAgICAgICAgICAvLyBQYXNvIDQ6IE1vc3RyYXIgZWwgbWVuc2FqZSBkZSBjb25maXJtYWNpw7NuIGVuIGVsIGNoYXQgKHNpbiBlbCBjw7NkaWdvIGRlbCBkaWFncmFtYSkNCiAgICAgICAgICAgICAgICAgICAgbGV0IGNoYXREaXNwbGF5TWVzc2FnZSA9IGDCoSR7cHJvbXB0S2V5d29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHByb21wdEtleXdvcmQuc2xpY2UoMSl9IHBhcmEgIiR7dG9waWN9IiBnZW5lcmFkbyBjb24gw6l4aXRvISBQdWVkZXMgdmVybG8gZW4gbGEgcGVzdGHDsWEgJ1ByZXZpc3VhbGl6YXIgSFRNTCcgZGVsIG1lbsO6ICdNQVMnLmA7DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlSHRtbCA9IHNob3dkb3duQ29udmVydGVyLm1ha2VIdG1sKGNoYXREaXNwbGF5TWVzc2FnZSk7DQogICAgICAgICAgICAgICAgICAgIC8vIEFwbGljYXIgS2FUZVggeSByZXNhbHRhZG8gZGUgY8OzZGlnbyBjb21vIGFudGVzIChhdW5xdWUgcGFyYSBlc3RlIG1lbnNhamUgbm8gaGF5IGPDs2RpZ28pDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSHRtbCA9IHJlc3BvbnNlSHRtbC5yZXBsYWNlKC8oLWIgwrEg4oiaKGLCsiAtIDRhYykpIFwvIDJhL2csICc8c3BhbiBjbGFzcz0ia2F0ZXgiPlxcZnJhY3stYiBcXHBtIFxcc3FydHtiXjIgLSA0YWN9fXsyYX08L3NwYW4+Jyk7DQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSHRtbCA9IHJlc3BvbnNlSHRtbC5yZXBsYWNlKC94XF4yL2csICc8c3BhbiBjbGFzcz0ia2F0ZXgiPnheMjwvc3Bhbj4nKTsNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VIdG1sID0gcmVzcG9uc2VIdG1sLnJlcGxhY2UoL2FcL2IvZywgJzxzcGFuIGNsYXNzPSJrYXRleCI+XFxmcmFje2F9e2J9PC9zcGFuPicpOw0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZUh0bWwgPSByZXNwb25zZUh0bWwucmVwbGFjZSgvXFxzcXJ0XHsoXHcrKVx9L2csICc8c3BhbiBjbGFzcz0ia2F0ZXgiPlxcc3FydHskMX08L3NwYW4+Jyk7DQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSHRtbCA9IHJlc3BvbnNlSHRtbC5yZXBsYWNlKC9cXHNxcnRceyhiXF4yIC0gNGFjKVx9L2csICc8c3BhbiBjbGFzcz0ia2F0ZXgiPlxcc3FydHtiXjIgLSA0YWN9PC9zcGFuPicpOw0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZUh0bWwgPSByZXNwb25zZUh0bWwucmVwbGFjZSgvKFxcZnJhY1x7XHcrXH1ce1x3K1x9KS9nLCAnPHNwYW4gY2xhc3M9ImthdGV4Ij4kMTwvc3Bhbj4nKTsNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VIdG1sID0gcmVzcG9uc2VIdG1sLnJlcGxhY2UoLzxwcmU+PGNvZGVbXj5dKj4oW1xzXFNdKj8pPFwvY29kZT48XC9wcmU+L2csIChtYXRjaCwgY29kZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGlnaGxpZ2h0ZWRDb2RlID0gaGlnaGxpZ2h0Q29kZShjb2RlLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYDxwcmU+PGNvZGUgY2xhc3M9ImNvZGUtYmxvY2siPiR7aGlnaGxpZ2h0ZWRDb2RlfTwvY29kZT48L3ByZT5gOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBnZW1pbmlNZXNzYWdlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICAgICAgICAgIGdlbWluaU1lc3NhZ2VEaXYuY2xhc3NOYW1lID0gJ2dlbWluaS1tZXNzYWdlJzsNCiAgICAgICAgICAgICAgICAgICAgZ2VtaW5pTWVzc2FnZURpdi5pbm5lckhUTUwgPSByZXNwb25zZUh0bWw7DQogICAgICAgICAgICAgICAgICAgIGNoYXRDb250YWluZXIuYXBwZW5kQ2hpbGQoZ2VtaW5pTWVzc2FnZURpdik7DQogICAgICAgICAgICAgICAgICAgIGNoYXRDb250YWluZXIuc2Nyb2xsVG9wID0gY2hhdENvbnRhaW5lci5zY3JvbGxIZWlnaHQ7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQWxtYWNlbmFyIGxhIHJlc3B1ZXN0YSB0ZXh0dWFsIGRlbCBtb2RlbG8gZW4gZWwgaGlzdG9yaWFsDQogICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaCh7IHJvbGU6ICdtb2RlbCcsIHBhcnRzOiBbeyB0ZXh0OiBjaGF0RGlzcGxheU1lc3NhZ2UgfV0gfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUlucHV0LnZhbHVlID0gJyc7IC8vIENsZWFyIGlucHV0IG9uIHN1Y2Nlc3MNCiAgICAgICAgICAgICAgICAgICAgZmlsZURhdGFBcnJheSA9IFtdOw0KICAgICAgICAgICAgICAgICAgICBmaWxlSW5wdXQudmFsdWUgPSAnJzsNCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyQWxsVXBsb2FkZWRMaXN0cygpOyAvLyBVcGRhdGUgZmlsZSBsaXN0IGRpc3BsYXkNCg0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGRpc3BsYXlTeXN0ZW1NZXNzYWdlKCdFcnJvcjogR2VtaW5pIG5vIHB1ZG8gZ2VuZXJhciBlbCBjw7NkaWdvIGRlbCBkaWFncmFtYS4gSW50w6ludGFsbyBkZSBudWV2byBjb24gdW4gdGVtYSBkaWZlcmVudGUuJyk7DQogICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdCBjbGVhciBpbnB1dHMgb24gZmFpbHVyZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgZ2VuZXJhciBkaWFncmFtYSBpbnRlcmFjdGl2byBjb24gS3Jva2k6JywgZXJyb3IpOw0KICAgICAgICAgICAgICAgIGRpc3BsYXlTeXN0ZW1NZXNzYWdlKCdFcnJvcjogTm8gc2UgcHVkbyBnZW5lcmFyIGVsIGRpYWdyYW1hIGludGVyYWN0aXZvLiBJbnTDqW50YWxvIGRlIG51ZXZvLiBBc2Vnw7pyYXRlIGRlIHF1ZSBlbCB0ZW1hIHNlYSBjbGFybyB5IHF1ZSBsYSBzaW50YXhpcyBkZSB0dSBzb2xpY2l0dWQgc2VhIGNvcnJlY3RhLicpOw0KICAgICAgICAgICAgICAgIC8vIERvIG5vdCBjbGVhciBpbnB1dHMgb24gZmFpbHVyZQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHJlY3Vyc2l2ZWx5IGJ1aWxkIHRoZSBIVE1MIGZvciB0aGUgc2NoZW1hIChubyBsb25nZXIgdXNlZCBmb3IgS3Jva2kgZGlhZ3JhbXMgZGlyZWN0bHkpDQogICAgICAgIGZ1bmN0aW9uIGJ1aWxkSW50ZXJhY3RpdmVTY2hlbWFIdG1sKGRhdGEpIHsNCiAgICAgICAgICAgIGxldCBodG1sID0gJyc7DQogICAgICAgICAgICAvLyBUaGlzIGZ1bmN0aW9uIGlzIG5vdyBtb3N0bHkgYSBwbGFjZWhvbGRlciBhcyBLcm9raSBnZW5lcmF0ZXMgdGhlIGZ1bGwgU1ZHLg0KICAgICAgICAgICAgLy8gSWYgd2Ugd2VyZSB0byBpbnRlcnByZXQgS3Jva2kncyBvdXRwdXQgYW5kIG1ha2UgaXQgaW50ZXJhY3RpdmUgd2l0aCBKUywgdGhpcyB3b3VsZCBiZSBtb3JlIGNvbXBsZXguDQogICAgICAgICAgICAvLyBGb3Igbm93LCBpdCdzIGp1c3QgYSBiYXNpYyB3cmFwcGVyIGZvciB0aGUgU1ZHLg0KICAgICAgICAgICAgaHRtbCArPSBgDQogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tdG9wOiAyMHB4OyI+DQogICAgICAgICAgICAgICAgICAgIDxoMz5EaWFncmFtYSBHZW5lcmFkbyBwb3IgS3Jva2k8L2gzPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIGA7DQogICAgICAgICAgICByZXR1cm4gaHRtbDsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gLS0tIFN0YXJ0IG9mIGV4aXN0aW5nICdlc3F1ZW1hcycgZnVuY3Rpb24gKGtlcHQgZm9yIGNvbXBhdGliaWxpdHkpIC0tLQ0KICAgICAgICBmdW5jdGlvbiBlc3F1ZW1hcygpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJMYSBmdW5jacOzbiAnZXNxdWVtYXMnIGhhIHNpZG8gbGxhbWFkYS4iKTsNCiAgICAgICAgICAgIGRpc3BsYXlTeXN0ZW1NZXNzYWdlKCJMYSBmdW5jacOzbiAnZXNxdWVtYXMnIHNlIGhhIGVqZWN1dGFkby4gRXN0YSBlcyB1bmEgZnVuY2nDs24gZ2Vuw6lyaWNhIHBhcmEgZXNxdWVtYXMuIFBhcmEgZ2VuZXJhciB1biBkaWFncmFtYSBpbnRlcmFjdGl2bywgYWN0aXZhIGVsICdNb2RvIEVzcXVlbWEnIHkgcHJvcG9yY2lvbmEgdW4gdGVtYS4iKTsNCiAgICAgICAgfQ0KICAgICAgICAvLyAtLS0gRW5kIG9mIGV4aXN0aW5nICdlc3F1ZW1hcycgZnVuY3Rpb24gLS0tDQoNCiAgICAgICAgZnVuY3Rpb24gaW5pdGlhbGl6ZUltYWdlNEFwcCgpIHsNCiAgICAgICAgICAgIGlmICghaW1hZ2VuR2VuZXJhZGEuc3JjIHx8IGltYWdlbkdlbmVyYWRhLnNyYy5pbmNsdWRlcygicGxhY2Vob2xkLmNvIikpIHsNCiAgICAgICAgICAgICAgICBjb252ZXJ0aXJVUkxBRGF0YVVSTChnZW5lcmFyVVJMSW1hZ2VuKCJJbWFnZW4gNCIsIGN1cnJlbnRTZWVkLCBtb2RlbG9TZWxlY3Rvci52YWx1ZSksIChkYXRhVVJMKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGltYWdlbkdlbmVyYWRhLnNyYyA9IGRhdGFVUkw7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICghZ2VuZXJhckltYWdlbkJ0bi5kYXRhc2V0Lmxpc3RlbmVyQWRkZWQpIHsNCiAgICAgICAgICAgICAgICBnZW5lcmFySW1hZ2VuQnRuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBtZW5zYWplID0gbWVuc2FqZUlucHV0SW1nNC52YWx1ZS50cmltKCk7IC8vIFVzZSByZW5hbWVkIGlucHV0DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVsb1NlbGVjY2lvbmFkbyA9IG1vZGVsb1NlbGVjdG9yLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBpZiAobWVuc2FqZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNlZWQgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVldmFJbWFnZW5VUkwgPSBnZW5lcmFyVVJMSW1hZ2VuKG1lbnNhamUsIGN1cnJlbnRTZWVkLCBtb2RlbG9TZWxlY2Npb25hZG8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29udmVydGlyVVJMQURhdGFVUkwobnVldmFJbWFnZW5VUkwsIChkYXRhVVJMKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VuR2VuZXJhZGEuc3JjID0gZGF0YVVSTDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBudWV2YUltYWdlbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51ZXZhSW1hZ2VuLnNyYyA9IGRhdGFVUkw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVldmFJbWFnZW4uc2V0QXR0cmlidXRlKCdkYXRhLXVybCcsIGRhdGFVUkwpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51ZXZhSW1hZ2VuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VsZWNjaW9uYXJJbWFnZW4pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbGVyaWFJbWFnZW5lcy5hcHBlbmRDaGlsZChudWV2YUltYWdlbik7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RyYXJNZW5zYWplSW1nNCgiUG9yIGZhdm9yLCBpbnRyb2R1Y2UgdW4gbWVuc2FqZSBhbnRlcyBkZSBnZW5lcmFyIGxhIGltYWdlbi4iKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGdlbmVyYXJJbWFnZW5CdG4uZGF0YXNldC5saXN0ZW5lckFkZGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKCF2YXJpYXJJbWFnZW5CdG4uZGF0YXNldC5saXN0ZW5lckFkZGVkKSB7DQogICAgICAgICAgICAgICAgdmFyaWFySW1hZ2VuQnRuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBtZW5zYWplID0gbWVuc2FqZUlucHV0SW1nNC52YWx1ZS50cmltKCk7IC8vIFVzZSByZW5hbWVkIGlucHV0DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVsb1NlbGVjY2lvbmFkbyA9IG1vZGVsb1NlbGVjdG9yLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBpZiAobWVuc2FqZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNlZWQgPSBnZW5lcmFyTnVtZXJvQWxlYXRvcmlvKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBudWV2YUltYWdlblVSTCA9IGdlbmVyYXJVUkxJbWFnZW4obWVuc2FqZSwgY3VycmVudFNlZWQsIG1vZGVsb1NlbGVjY2lvbmFkbyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJ0aXJVUkxBRGF0YVVSTChudWV2YUltYWdlblVSTCwgKGRhdGFVUkwpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZW5HZW5lcmFkYS5zcmMgPSBkYXRhVVJMOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG51ZXZhSW1hZ2VuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVldmFJbWFnZW4uc3JjID0gZGF0YVVSTDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWV2YUltYWdlbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtdXJsJywgZGF0YVVSTCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVldmFJbWFnZW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxlY2Npb25hckltYWdlbik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FsZXJpYUltYWdlbmVzLmFwcGVuZENoaWxkKG51ZXZhSW1hZ2VuKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgbW9zdHJhck1lbnNhamVJbWc0KCJQb3IgZmF2b3IsIGludHJvZHVjZSB1biBtZW5zYWplIGFudGVzIGRlIGdlbmVyYXIgbGEgaW1hZ2VuLiIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgdmFyaWFySW1hZ2VuQnRuLmRhdGFzZXQubGlzdGVuZXJBZGRlZCA9IHRydWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICghdmFyaWFjaW9uQWxnb3JpdG1pY2FCdG4uZGF0YXNldC5saXN0ZW5lckFkZGVkKSB7DQogICAgICAgICAgICAgICAgdmFyaWFjaW9uQWxnb3JpdG1pY2FCdG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lbnNhamUgPSBtZW5zYWplSW5wdXRJbWc0LnZhbHVlLnRyaW0oKTsgLy8gVXNlIHJlbmFtZWQgaW5wdXQNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kZWxvU2VsZWNjaW9uYWRvID0gbW9kZWxvU2VsZWN0b3IudmFsdWU7DQogICAgICAgICAgICAgICAgICAgIGlmIChtZW5zYWplKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBnYWxlcmlhSW1hZ2VuZXMuaW5uZXJIVE1MID0gJyc7DQogICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmFjaW9uQ29udGludWEgPSBnZW5lcmFyVmFyaWFjaW9uZXNBbGdvcml0bWljYXMobWVuc2FqZSwgbW9kZWxvU2VsZWNjaW9uYWRvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhY2lvbkFsZ29yaXRtaWNhQnRuLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJhclZhcmlhY2lvbkJ0bi5zdHlsZS5kaXNwbGF5ID0gImlubGluZS1ibG9jayI7DQogICAgICAgICAgICAgICAgICAgICAgICBnYWxlcmlhSW1hZ2VuZXMuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZlckJpYmxpb3RlY2FCdG4uc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIG9jdWx0YXJCaWJsaW90ZWNhQnRuLnN0eWxlLmRpc3BsYXkgPSAiaW5saW5lLWJsb2NrIjsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RyYXJNZW5zYWplSW1nNCgiUG9yIGZhdm9yLCBpbnRyb2R1Y2UgdW4gbWVuc2FqZSBhbnRlcyBkZSBnZW5lcmFyIGxhIGltYWdlbi4iKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHZhcmlhY2lvbkFsZ29yaXRtaWNhQnRuLmRhdGFzZXQubGlzdGVuZXJBZGRlZCA9IHRydWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICghcGFyYXJWYXJpYWNpb25CdG4uZGF0YXNldC5saXN0ZW5lckFkZGVkKSB7DQogICAgICAgICAgICAgICAgcGFyYXJWYXJpYWNpb25CdG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmIChnZW5lcmFjaW9uQ29udGludWEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYWNpb25Db250aW51YS5kZXRlbmVyKCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcGFyYXJWYXJpYWNpb25CdG4uc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgICAgICAgICAgdmFyaWFjaW9uQWxnb3JpdG1pY2FCdG4uc3R5bGUuZGlzcGxheSA9ICJpbmxpbmUtYmxvY2siOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHBhcmFyVmFyaWFjaW9uQnRuLmRhdGFzZXQubGlzdGVuZXJBZGRlZCA9IHRydWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICghdmVyQmlibGlvdGVjYUJ0bi5kYXRhc2V0Lmxpc3RlbmVyQWRkZWQpIHsNCiAgICAgICAgICAgICAgICB2ZXJCaWJsaW90ZWNhQnRuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBnYWxlcmlhSW1hZ2VuZXMuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsNCiAgICAgICAgICAgICAgICAgICAgdmVyQmlibGlvdGVjYUJ0bi5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICAgICAgICAgICAgICBvY3VsdGFyQmlibGlvdGVjYUJ0bi5zdHlsZS5kaXNwbGF5ID0gImlubGluZS1ibG9jayI7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgdmVyQmlibGlvdGVjYUJ0bi5kYXRhc2V0Lmxpc3RlbmVyQWRkZWQgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoIW9jdWx0YXJCaWJsaW90ZWNhQnRuLmRhdGFzZXQubGlzdGVuZXJBZGRlZCkgew0KICAgICAgICAgICAgICAgIG9jdWx0YXJCaWJsaW90ZWNhQnRuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBnYWxlcmlhSW1hZ2VuZXMuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgICAgICAgICAgdmVyQmlibGlvdGVjYUJ0bi5zdHlsZS5kaXNwbGF5ID0gImlubGluZS1ibG9jayI7DQogICAgICAgICAgICAgICAgICAgIG9jdWx0YXJCaWJsaW90ZWNhQnRuLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgb2N1bHRhckJpYmxpb3RlY2FCdG4uZGF0YXNldC5saXN0ZW5lckFkZGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKCFkZXNjYXJnYXJJbWFnZW5CdG4uZGF0YXNldC5saXN0ZW5lckFkZGVkKSB7DQogICAgICAgICAgICAgICAgZGVzY2FyZ2FySW1hZ2VuQnRuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBkZXNjYXJnYXJJbWFnZW4oaW1hZ2VuR2VuZXJhZGEuc3JjLCAnaW1hZ2VuX2dlbmVyYWRhLnBuZycpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGRlc2NhcmdhckltYWdlbkJ0bi5kYXRhc2V0Lmxpc3RlbmVyQWRkZWQgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoIWRlc2NhcmdhckdhbGVyaWFCdG4uZGF0YXNldC5saXN0ZW5lckFkZGVkKSB7DQogICAgICAgICAgICAgICAgZGVzY2FyZ2FyR2FsZXJpYUJ0bi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgZGVzY2FyZ2FyR2FsZXJpYSgpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGRlc2NhcmdhckdhbGVyaWFCdG4uZGF0YXNldC5saXN0ZW5lckFkZGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKCFkZXNjYXJnYXJTZWxlY2Npb25hZGFzQnRuLmRhdGFzZXQubGlzdGVuZXJBZGRlZCkgew0KICAgICAgICAgICAgICAgIGRlc2NhcmdhclNlbGVjY2lvbmFkYXNCdG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGRlc2NhcmdhclNlbGVjY2lvbmFkYXMoKTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBkZXNjYXJnYXJTZWxlY2Npb25hZGFzQnRuLmRhdGFzZXQubGlzdGVuZXJBZGRlZCA9IHRydWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICghYmFja1RvQ2hhdEJ1dHRvbi5kYXRhc2V0Lmxpc3RlbmVyQWRkZWQpIHsNCiAgICAgICAgICAgICAgICBiYWNrVG9DaGF0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBzaG93Q2hhdE1vZGUoKTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBiYWNrVG9DaGF0QnV0dG9uLmRhdGFzZXQubGlzdGVuZXJBZGRlZCA9IHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KDQogICAgICAgIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZW5kZXJNYXRoKCk7DQogICAgICAgICAgICBjaGF0Q29udGFpbmVyLnN0eWxlLmZvbnRTaXplID0gZm9udFNpemVTZWxlY3Rvci52YWx1ZSArICdweCc7DQogICAgICAgICAgICB1cGRhdGVJbnB1dFBsYWNlaG9sZGVyKCk7DQogICAgICAgICAgICBzaG93Q2hhdE1vZGUoKTsNCiAgICAgICAgICAgIC8vIFVuY29tbWVudCB0aGUgbGluZSBiZWxvdyB0byBjYWxsICdlc3F1ZW1hcygpJyB3aGVuIHRoZSBwYWdlIGxvYWRzDQogICAgICAgICAgICAvLyBlc3F1ZW1hcygpOw0KICAgICAgICAgICAgLy8gVW5jb21tZW50IHRoZSBsaW5lIGJlbG93IHRvIGNhbGwgJ2dlbmVyYXJFc3F1ZW1hKCknIHdoZW4gdGhlIHBhZ2UgbG9hZHMNCiAgICAgICAgICAgIC8vIGdlbmVyYXJFc3F1ZW1hKCk7DQogICAgICAgIH07DQogICAgPC9zY3JpcHQ+DQo8L2JvZHk+DQoNCjwvaHRtbD4NCg==