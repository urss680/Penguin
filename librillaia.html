data:text/html;base64,PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlcyI+DQo8aGVhZD4NCiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+DQogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPg0KICAgIDx0aXRsZT5HcmFiYWRvciBkZSBQYW50YWxsYTwvdGl0bGU+DQogICAgPCEtLSBJbmNsdWlyIFRhaWx3aW5kIENTUyBwYXJhIHVuIGVzdGlsbyBtb2Rlcm5vIHkgcmVzcG9uc2l2ZSAtLT4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG4udGFpbHdpbmRjc3MuY29tIj48L3NjcmlwdD4NCiAgICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PUludGVyOndnaHRANDAwOzYwMDs3MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPg0KICAgIDxzdHlsZT4NCiAgICAgICAgYm9keSB7DQogICAgICAgICAgICBmb250LWZhbWlseTogJ0ludGVyJywgc2Fucy1zZXJpZjsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMGY0Zjg7IC8qIENvbG9yIGRlIGZvbmRvIHN1YXZlICovDQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgbWluLWhlaWdodDogMTAwdmg7IC8qIEFzZWd1cmEgcXVlIG9jdXBlIHRvZGEgbGEgYWx0dXJhIGRlIGxhIHZlbnRhbmEgKi8NCiAgICAgICAgICAgIG1hcmdpbjogMDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7DQogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICB9DQogICAgICAgIC5jb250YWluZXIgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDFyZW07IC8qIEJvcmRlcyBtw6FzIHJlZG9uZGVhZG9zICovDQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDEwcHggMjVweCByZ2JhKDAsIDAsIDAsIDAuMSk7IC8qIFNvbWJyYSBtw6FzIHByb251bmNpYWRhICovDQogICAgICAgICAgICBwYWRkaW5nOiAyLjVyZW07DQogICAgICAgICAgICBtYXgtd2lkdGg6IDkwMHB4OyAvKiBBbmNobyBtw6F4aW1vIHBhcmEgZWwgY29udGVuZWRvciAqLw0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIGdhcDogMS41cmVtOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgfQ0KICAgICAgICAudmlkZW8tcHJldmlldyB7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIG1heC13aWR0aDogODAwcHg7IC8qIEFuY2hvIG3DoXhpbW8gcGFyYSBlbCB2aWRlbyAqLw0KICAgICAgICAgICAgaGVpZ2h0OiBhdXRvOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC43NXJlbTsgLyogQm9yZGVzIHJlZG9uZGVhZG9zIHBhcmEgZWwgdmlkZW8gKi8NCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlMmU4ZjA7IC8qIEZvbmRvIHBhcmEgZWwgdmlkZW8gY3VhbmRvIG5vIGhheSBjb250ZW5pZG8gKi8NCiAgICAgICAgICAgIGFzcGVjdC1yYXRpbzogMTYvOTsgLyogUHJvcG9yY2nDs24gMTY6OSAqLw0KICAgICAgICAgICAgb2JqZWN0LWZpdDogY29udGFpbjsgLyogQXNlZ3VyYSBxdWUgZWwgdmlkZW8gc2UgYWp1c3RlICovDQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2JkNWUxOyAvKiBCb3JkZSBzdXRpbCAqLw0KICAgICAgICB9DQogICAgICAgIC5idXR0b24tZ3JvdXAgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMXJlbTsgLyogRXNwYWNpbyBlbnRyZSBib3RvbmVzICovDQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7IC8qIFBlcm1pdGUgcXVlIGxvcyBib3RvbmVzIHNlIGVudnVlbHZhbiBlbiBwYW50YWxsYXMgcGVxdWXDsWFzICovDQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgfQ0KICAgICAgICAuYnRuIHsNCiAgICAgICAgICAgIHBhZGRpbmc6IDAuNzVyZW0gMS41cmVtOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC41cmVtOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2UtaW4tb3V0Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTsNCiAgICAgICAgfQ0KICAgICAgICAuYnRuLXByaW1hcnkgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzRmNDZlNTsgLyogw41uZGlnbyAqLw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICB9DQogICAgICAgIC5idG4tcHJpbWFyeTpob3ZlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDMzOGNhOw0KICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA2cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMTUpOw0KICAgICAgICB9DQogICAgICAgIC5idG4tZGFuZ2VyIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlZjQ0NDQ7IC8qIFJvam8gKi8NCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgfQ0KICAgICAgICAuYnRuLWRhbmdlcjpob3ZlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGMyNjI2Ow0KICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA2cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMTUpOw0KICAgICAgICB9DQogICAgICAgIC5idG4tc3VjY2VzcyB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjJjNTVlOyAvKiBWZXJkZSAqLw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICB9DQogICAgICAgIC5idG4tc3VjY2Vzczpob3ZlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTZhMzRhOw0KICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA2cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMTUpOw0KICAgICAgICB9DQogICAgICAgIC5idG46ZGlzYWJsZWQgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2NiZDVlMTsgLyogR3JpcyBjbGFybyAqLw0KICAgICAgICAgICAgY29sb3I6ICM2NDc0OGI7DQogICAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogbm9uZTsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogbm9uZTsNCiAgICAgICAgfQ0KICAgICAgICAubWVzc2FnZS1ib3ggew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2UwZjJmZTsgLyogQXp1bCBtdXkgY2xhcm8gKi8NCiAgICAgICAgICAgIGNvbG9yOiAjMDM2OWExOyAvKiBBenVsIG9zY3VybyAqLw0KICAgICAgICAgICAgcGFkZGluZzogMXJlbTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDAuNXJlbTsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgbWF4LXdpZHRoOiA4MDBweDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjN2RkM2ZjOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4wNSk7DQogICAgICAgICAgICBkaXNwbGF5OiBub25lOyAvKiBPY3VsdG8gcG9yIGRlZmVjdG8gKi8NCiAgICAgICAgfQ0KICAgICAgICAubWVzc2FnZS1ib3guc2hvdyB7DQogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQo8L2hlYWQ+DQo8Ym9keT4NCiAgICA8ZGl2IGNsYXNzPSJjb250YWluZXIiPg0KICAgICAgICA8aDEgY2xhc3M9InRleHQtNHhsIGZvbnQtZXh0cmFib2xkIHRleHQtZ3JheS04MDAgbWItNCI+R3JhYmFkb3IgZGUgUGFudGFsbGE8L2gxPg0KICAgICAgICA8cCBjbGFzcz0idGV4dC1ncmF5LTYwMCB0ZXh0LWxnIG1iLTYiPkdyYWJhIGxhIGFjdGl2aWRhZCBkZSB0dSBwYW50YWxsYSB5IGRlc2NhcmdhIGVsIHZpZGVvIGbDoWNpbG1lbnRlLjwvcD4NCg0KICAgICAgICA8IS0tIEVsZW1lbnRvIGRlIHZpZGVvIHBhcmEgcHJldmlzdWFsaXphciBsYSBncmFiYWNpw7NuIC0tPg0KICAgICAgICA8dmlkZW8gaWQ9InZpZGVvUHJldmlldyIgY2xhc3M9InZpZGVvLXByZXZpZXciIGF1dG9wbGF5IG11dGVkPjwvdmlkZW8+DQoNCiAgICAgICAgPCEtLSBHcnVwbyBkZSBib3RvbmVzIHBhcmEgY29udHJvbGFyIGxhIGdyYWJhY2nDs24gLS0+DQogICAgICAgIDxkaXYgY2xhc3M9ImJ1dHRvbi1ncm91cCI+DQogICAgICAgICAgICA8YnV0dG9uIGlkPSJzdGFydEJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSI+SW5pY2lhciBHcmFiYWNpw7NuPC9idXR0b24+DQogICAgICAgICAgICA8YnV0dG9uIGlkPSJzdG9wQnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIiIGRpc2FibGVkPkRldGVuZXIgR3JhYmFjacOzbjwvYnV0dG9uPg0KICAgICAgICAgICAgPGJ1dHRvbiBpZD0iZG93bmxvYWRCdXR0b24iIGNsYXNzPSJidG4gYnRuLXN1Y2Nlc3MiIGRpc2FibGVkPkRlc2NhcmdhciBWaWRlbzwvYnV0dG9uPg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8IS0tIMOBcmVhIHBhcmEgbWVuc2FqZXMgeSBub3RpZmljYWNpb25lcyAtLT4NCiAgICAgICAgPGRpdiBpZD0ibWVzc2FnZUJveCIgY2xhc3M9Im1lc3NhZ2UtYm94Ij48L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDxzY3JpcHQ+DQogICAgICAgIC8vIFJlZmVyZW5jaWFzIGEgbG9zIGVsZW1lbnRvcyBkZWwgRE9NDQogICAgICAgIGNvbnN0IHZpZGVvUHJldmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWRlb1ByZXZpZXcnKTsNCiAgICAgICAgY29uc3Qgc3RhcnRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnRCdXR0b24nKTsNCiAgICAgICAgY29uc3Qgc3RvcEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdG9wQnV0dG9uJyk7DQogICAgICAgIGNvbnN0IGRvd25sb2FkQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rvd25sb2FkQnV0dG9uJyk7DQogICAgICAgIGNvbnN0IG1lc3NhZ2VCb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVzc2FnZUJveCcpOw0KDQogICAgICAgIGxldCBtZWRpYVJlY29yZGVyOyAvLyBPYmpldG8gTWVkaWFSZWNvcmRlcg0KICAgICAgICBsZXQgcmVjb3JkZWRDaHVua3MgPSBbXTsgLy8gQXJyYXkgcGFyYSBhbG1hY2VuYXIgbG9zIGZyYWdtZW50b3MgZGUgdmlkZW8NCiAgICAgICAgbGV0IHN0cmVhbTsgLy8gT2JqZXRvIE1lZGlhU3RyZWFtDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIE11ZXN0cmEgdW4gbWVuc2FqZSBlbiBlbCBjdWFkcm8gZGUgbWVuc2FqZXMuDQogICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIC0gRWwgbWVuc2FqZSBhIG1vc3RyYXIuDQogICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gRWwgdGlwbyBkZSBtZW5zYWplIChlai4gJ2luZm8nLCAnZXJyb3InKS4NCiAgICAgICAgICovDQogICAgICAgIGZ1bmN0aW9uIHNob3dNZXNzYWdlKG1lc3NhZ2UsIHR5cGUgPSAnaW5mbycpIHsNCiAgICAgICAgICAgIG1lc3NhZ2VCb3gudGV4dENvbnRlbnQgPSBtZXNzYWdlOw0KICAgICAgICAgICAgbWVzc2FnZUJveC5jbGFzc05hbWUgPSAnbWVzc2FnZS1ib3ggc2hvdyc7IC8vIEFzZWd1cmEgcXVlIGVsIG1lbnNhamUgc2UgbXVlc3RyZQ0KICAgICAgICAgICAgLy8gUHVlZGVzIGHDsWFkaXIgY2xhc2VzIHBhcmEgZGlmZXJlbnRlcyB0aXBvcyBkZSBtZW5zYWplcyBzaSBlcyBuZWNlc2FyaW8NCiAgICAgICAgICAgIGlmICh0eXBlID09PSAnZXJyb3InKSB7DQogICAgICAgICAgICAgICAgbWVzc2FnZUJveC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2ZlZTJlMic7IC8vIFJvam8gbXV5IGNsYXJvDQogICAgICAgICAgICAgICAgbWVzc2FnZUJveC5zdHlsZS5jb2xvciA9ICcjOTkxYjFiJzsgLy8gUm9qbyBvc2N1cm8NCiAgICAgICAgICAgICAgICBtZXNzYWdlQm94LnN0eWxlLmJvcmRlckNvbG9yID0gJyNlZjQ0NDQnOyAvLyBSb2pvDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIG1lc3NhZ2VCb3guc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNlMGYyZmUnOyAvLyBBenVsIG11eSBjbGFybw0KICAgICAgICAgICAgICAgIG1lc3NhZ2VCb3guc3R5bGUuY29sb3IgPSAnIzAzNjlhMSc7IC8vIEF6dWwgb3NjdXJvDQogICAgICAgICAgICAgICAgbWVzc2FnZUJveC5zdHlsZS5ib3JkZXJDb2xvciA9ICcjN2RkM2ZjJzsgLy8gQXp1bA0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIE9jdWx0YSBlbCBjdWFkcm8gZGUgbWVuc2FqZXMuDQogICAgICAgICAqLw0KICAgICAgICBmdW5jdGlvbiBoaWRlTWVzc2FnZSgpIHsNCiAgICAgICAgICAgIG1lc3NhZ2VCb3gudGV4dENvbnRlbnQgPSAnJzsNCiAgICAgICAgICAgIG1lc3NhZ2VCb3guY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOw0KICAgICAgICB9DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEhhYmlsaXRhIG8gZGVzaGFiaWxpdGEgbG9zIGJvdG9uZXMgc2Vnw7puIGVsIGVzdGFkbyBkZSBsYSBncmFiYWNpw7NuLg0KICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmVjb3JkaW5nIC0gVHJ1ZSBzaSBzZSBlc3TDoSBncmFiYW5kbywgZmFsc2UgZW4gY2FzbyBjb250cmFyaW8uDQogICAgICAgICAqLw0KICAgICAgICBmdW5jdGlvbiB1cGRhdGVCdXR0b25TdGF0ZXMoaXNSZWNvcmRpbmcpIHsNCiAgICAgICAgICAgIHN0YXJ0QnV0dG9uLmRpc2FibGVkID0gaXNSZWNvcmRpbmc7DQogICAgICAgICAgICBzdG9wQnV0dG9uLmRpc2FibGVkID0gIWlzUmVjb3JkaW5nOw0KICAgICAgICAgICAgZG93bmxvYWRCdXR0b24uZGlzYWJsZWQgPSBpc1JlY29yZGluZyB8fCByZWNvcmRlZENodW5rcy5sZW5ndGggPT09IDA7DQogICAgICAgIH0NCg0KICAgICAgICAvKioNCiAgICAgICAgICogSW5pY2lhIGxhIGdyYWJhY2nDs24gZGUgbGEgcGFudGFsbGEuDQogICAgICAgICAqLw0KICAgICAgICBzdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgIHJlY29yZGVkQ2h1bmtzID0gW107IC8vIExpbXBpYXIgZnJhZ21lbnRvcyBhbnRlcmlvcmVzDQogICAgICAgICAgICBoaWRlTWVzc2FnZSgpOyAvLyBPY3VsdGFyIG1lbnNhamVzIHByZXZpb3MNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyBTb2xpY2l0YXIgYWNjZXNvIGEgbGEgcGFudGFsbGEgZGVsIHVzdWFyaW8gKHkgYWwgYXVkaW8gZGVsIHNpc3RlbWEgc2kgc2UgZGVzZWEpDQogICAgICAgICAgICAgICAgLy8gVXNhbW9zIGdldERpc3BsYXlNZWRpYSBwYXJhIGdyYWJhciBsYSBwYW50YWxsYS4NCiAgICAgICAgICAgICAgICAvLyBFbCBvYmpldG8gY29uc3RyYWludHMgcHVlZGUgaW5jbHVpciBhdWRpbzogdHJ1ZSBwYXJhIGdyYWJhciBlbCBhdWRpbyBkZWwgc2lzdGVtYS4NCiAgICAgICAgICAgICAgICBzdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSh7DQogICAgICAgICAgICAgICAgICAgIHZpZGVvOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICBhdWRpbzogdHJ1ZSAvLyBJbmNsdWlyIGF1ZGlvIGRlbCBzaXN0ZW1hIGVuIGxhIGdyYWJhY2nDs24NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIEFzaWduYXIgZWwgc3RyZWFtIGFsIGVsZW1lbnRvIGRlIHZpZGVvIHBhcmEgcHJldmlzdWFsaXphcg0KICAgICAgICAgICAgICAgIHZpZGVvUHJldmlldy5zcmNPYmplY3QgPSBzdHJlYW07DQoNCiAgICAgICAgICAgICAgICAvLyBDcmVhciB1bmEgaW5zdGFuY2lhIGRlIE1lZGlhUmVjb3JkZXINCiAgICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyID0gbmV3IE1lZGlhUmVjb3JkZXIoc3RyZWFtKTsNCg0KICAgICAgICAgICAgICAgIC8vIEV2ZW50byBxdWUgc2UgZGlzcGFyYSBjdWFuZG8gaGF5IGRhdG9zIGRlIHZpZGVvIGRpc3BvbmlibGVzDQogICAgICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5hZGRFdmVudExpc3RlbmVyKCdkYXRhYXZhaWxhYmxlJywgZXZlbnQgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGF0YS5zaXplID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkZWRDaHVua3MucHVzaChldmVudC5kYXRhKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gRXZlbnRvIHF1ZSBzZSBkaXNwYXJhIGN1YW5kbyBsYSBncmFiYWNpw7NuIHNlIGRldGllbmUNCiAgICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3N0b3AnLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgZWwgZXN0YWRvIGRlIGxvcyBib3RvbmVzIGRlc3B1w6lzIGRlIGRldGVuZXINCiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQnV0dG9uU3RhdGVzKGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gT2N1bHRhciBsYSBwcmV2aXN1YWxpemFjacOzbiBkZWwgdmlkZW8gZGVzcHXDqXMgZGUgZGV0ZW5lcg0KICAgICAgICAgICAgICAgICAgICB2aWRlb1ByZXZpZXcuc3JjT2JqZWN0ID0gbnVsbDsNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIEluaWNpYXIgbGEgZ3JhYmFjacOzbg0KICAgICAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIuc3RhcnQoKTsNCiAgICAgICAgICAgICAgICBzaG93TWVzc2FnZSgnR3JhYmFjacOzbiBpbmljaWFkYS4gU2VsZWNjaW9uYSBsYSB2ZW50YW5hIG8gcGFudGFsbGEgcXVlIGRlc2VhcyBncmFiYXIuJywgJ2luZm8nKTsNCiAgICAgICAgICAgICAgICB1cGRhdGVCdXR0b25TdGF0ZXModHJ1ZSk7IC8vIEFjdHVhbGl6YXIgZWwgZXN0YWRvIGRlIGxvcyBib3RvbmVzDQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGluaWNpYXIgbGEgZ3JhYmFjacOzbjonLCBlcnJvcik7DQogICAgICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdOb3RBbGxvd2VkRXJyb3InKSB7DQogICAgICAgICAgICAgICAgICAgIHNob3dNZXNzYWdlKCdQZXJtaXNvIGRlbmVnYWRvOiBObyBzZSBwdWRvIGFjY2VkZXIgYSBsYSBwYW50YWxsYS4gUG9yIGZhdm9yLCBjb25jZWRlIGxvcyBwZXJtaXNvcyBuZWNlc2FyaW9zLicsICdlcnJvcicpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ05vdEZvdW5kRXJyb3InKSB7DQogICAgICAgICAgICAgICAgICAgIHNob3dNZXNzYWdlKCdObyBzZSBlbmNvbnRyYXJvbiBkaXNwb3NpdGl2b3MgZGUgZ3JhYmFjacOzbiBkZSBwYW50YWxsYS4nLCAnZXJyb3InKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBzaG93TWVzc2FnZShgRXJyb3IgYWwgaW5pY2lhciBsYSBncmFiYWNpw7NuOiAke2Vycm9yLm1lc3NhZ2V9YCwgJ2Vycm9yJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHVwZGF0ZUJ1dHRvblN0YXRlcyhmYWxzZSk7IC8vIEFzZWd1cmFyIHF1ZSBsb3MgYm90b25lcyBlc3TDqW4gZW4gZWwgZXN0YWRvIGNvcnJlY3RvDQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBEZXRpZW5lIGxhIGdyYWJhY2nDs24gZGUgbGEgcGFudGFsbGEuDQogICAgICAgICAqLw0KICAgICAgICBzdG9wQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgaWYgKG1lZGlhUmVjb3JkZXIgJiYgbWVkaWFSZWNvcmRlci5zdGF0ZSA9PT0gJ3JlY29yZGluZycpIHsNCiAgICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyLnN0b3AoKTsNCiAgICAgICAgICAgICAgICAvLyBEZXRlbmVyIHRvZGFzIGxhcyBwaXN0YXMgZGVsIHN0cmVhbSBwYXJhIGxpYmVyYXIgbG9zIHJlY3Vyc29zDQogICAgICAgICAgICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4gdHJhY2suc3RvcCgpKTsNCiAgICAgICAgICAgICAgICBzaG93TWVzc2FnZSgnR3JhYmFjacOzbiBkZXRlbmlkYS4gWWEgcHVlZGVzIGRlc2NhcmdhciBlbCB2aWRlby4nLCAnaW5mbycpOw0KICAgICAgICAgICAgICAgIHVwZGF0ZUJ1dHRvblN0YXRlcyhmYWxzZSk7IC8vIEFjdHVhbGl6YXIgZWwgZXN0YWRvIGRlIGxvcyBib3RvbmVzDQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBEZXNjYXJnYSBlbCB2aWRlbyBncmFiYWRvLg0KICAgICAgICAgKi8NCiAgICAgICAgZG93bmxvYWRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgICAgICAgICBpZiAocmVjb3JkZWRDaHVua3MubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgc2hvd01lc3NhZ2UoJ05vIGhheSB2aWRlbyBwYXJhIGRlc2Nhcmdhci4gUG9yIGZhdm9yLCBncmFiYSBhbGdvIHByaW1lcm8uJywgJ2Vycm9yJyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBDcmVhciB1biBCbG9iIGEgcGFydGlyIGRlIGxvcyBmcmFnbWVudG9zIGRlIHZpZGVvDQogICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IocmVjb3JkZWRDaHVua3MsIHsNCiAgICAgICAgICAgICAgICB0eXBlOiAndmlkZW8vd2VibScgLy8gRm9ybWF0byBkZWwgdmlkZW8gKHdlYm0gZXMgY29tw7puIHBhcmEgTWVkaWFSZWNvcmRlcikNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBDcmVhciB1bmEgVVJMIHBhcmEgZWwgQmxvYg0KICAgICAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCg0KICAgICAgICAgICAgLy8gQ3JlYXIgdW4gZWxlbWVudG8gPGE+IHRlbXBvcmFsIHBhcmEgbGEgZGVzY2FyZ2ENCiAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQogICAgICAgICAgICBhLmhyZWYgPSB1cmw7DQogICAgICAgICAgICBhLmRvd25sb2FkID0gYGdyYWJhY2lvbl9wYW50YWxsYV8ke25ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlcy1FUycsIHsgeWVhcjogJ251bWVyaWMnLCBtb250aDogJzItZGlnaXQnLCBkYXk6ICcyLWRpZ2l0JyB9KS5yZXBsYWNlKC9cLy9nLCAnLScpfV8ke25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCdlcy1FUycsIHsgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0Jywgc2Vjb25kOiAnMi1kaWdpdCcgfSkucmVwbGFjZSgvOi9nLCAnLScpfS53ZWJtYDsNCg0KICAgICAgICAgICAgLy8gQcOxYWRpciBlbCBlbGVtZW50byA8YT4gYWwgRE9NLCBzaW11bGFyIHVuIGNsaWMgeSBsdWVnbyByZW1vdmVybG8NCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7DQogICAgICAgICAgICBhLmNsaWNrKCk7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpOw0KDQogICAgICAgICAgICAvLyBMaWJlcmFyIGxhIFVSTCBkZWwgQmxvYiBwYXJhIGxpYmVyYXIgbWVtb3JpYQ0KICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOw0KDQogICAgICAgICAgICByZWNvcmRlZENodW5rcyA9IFtdOyAvLyBMaW1waWFyIGxvcyBmcmFnbWVudG9zIGRlc3B1w6lzIGRlIGxhIGRlc2NhcmdhDQogICAgICAgICAgICB1cGRhdGVCdXR0b25TdGF0ZXMoZmFsc2UpOyAvLyBBc2VndXJhciBxdWUgZWwgYm90w7NuIGRlIGRlc2NhcmdhIHNlIGRlc2hhYmlsaXRlDQogICAgICAgICAgICBzaG93TWVzc2FnZSgnVmlkZW8gZGVzY2FyZ2FkbyBjb3JyZWN0YW1lbnRlLicsICdzdWNjZXNzJyk7DQogICAgICAgIH0pOw0KDQogICAgICAgIC8vIEluaWNpYWxpemFyIGVsIGVzdGFkbyBkZSBsb3MgYm90b25lcyBhbCBjYXJnYXIgbGEgcMOhZ2luYQ0KICAgICAgICB3aW5kb3cub25sb2FkID0gKCkgPT4gew0KICAgICAgICAgICAgdXBkYXRlQnV0dG9uU3RhdGVzKGZhbHNlKTsNCiAgICAgICAgICAgIHNob3dNZXNzYWdlKCdIYXogY2xpYyBlbiAiSW5pY2lhciBHcmFiYWNpw7NuIiBwYXJhIGNvbWVuemFyLicsICdpbmZvJyk7DQogICAgICAgIH07DQogICAgPC9zY3JpcHQ+DQo8L2JvZHk+DQo8L2h0bWw+DQo=